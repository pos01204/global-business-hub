# 🚀 Global Business Hub 데이터 활용 고도화 제안서

> **문서 버전**: 3.0  
> **작성일**: 2024-12-17  
> **문서 성격**: 데이터 활용 및 의사결정 구조 고도화를 위한 허브 설계 전략서  
> **참조 문서**: `데이터_규칙_가이드.md`, `Phase5_고도화_IA설계_및_데이터전략.md`

---

## 📋 목차

1. [Executive Summary](#1-executive-summary)
2. [허브 개선의 목적과 배경](#2-허브-개선의-목적과-배경)
3. [데이터 활용 성숙도 진단 (As-Is)](#3-데이터-활용-성숙도-진단-as-is)
4. [데이터 스케일업 전략 (To-Be)](#4-데이터-스케일업-전략-to-be)
5. [IA/메뉴 구조 재설계](#5-ia메뉴-구조-재설계)
6. [Phase별 구현 로드맵 개요](#6-phase별-구현-로드맵-개요)
7. [Phase 1: 데이터 기반 표준화](#7-phase-1-데이터-기반-표준화)
8. [Phase 2: 1차 가공 데이터 구축](#8-phase-2-1차-가공-데이터-구축)
9. [Phase 3: 2차 가공 분석 체계](#9-phase-3-2차-가공-분석-체계)
10. [Phase 4: 복합 분석 및 인사이트](#10-phase-4-복합-분석-및-인사이트)
11. [Phase 5: 예측·자동화 확장](#11-phase-5-예측자동화-확장)
12. [부록: 데이터 흐름 및 기대 효과](#12-부록-데이터-흐름-및-기대-효과)

---

## 1. Executive Summary

### 1.1 핵심 목표

본 제안서는 **Global Business Hub의 데이터 활용 구조를 고도화**하여,  
단순 데이터 조회 수준에서 **복합 분석 기반 의사결정 지원 체계**로 전환하는 것을 목표로 합니다.

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        데이터 활용 고도화 방향                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   현재 (As-Is)                          목표 (To-Be)                       │
│   ─────────────                         ───────────                         │
│                                                                             │
│   Raw Data → 표시                       Raw → 1차 가공 → 2차 가공 → n차    │
│   (단순 조회)                           (정제)   (분석)   (집계)    (예측)   │
│                                                                             │
│   페이지별 독립 처리                    데이터 레이어 공유 및 재사용         │
│                                                                             │
│   "지금 무엇이?"                        "왜 그런가?" + "다음은 무엇인가?"    │
│   (What)                                (Why + What's Next)                 │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 1.2 전략 요약

| 전략 | 설명 | 기대 효과 |
|------|------|----------|
| **데이터 레이어링** | Raw → 1차 → 2차 → n차 단계별 가공 체계 | 분석 깊이 확보, 재사용성 향상 |
| **IA 재구조화** | 목적 기반 분석 허브 구성 | UX 개선, 교차 분석 지원 |
| **데이터 자산화** | 가공 데이터의 저장 및 아카이빙 | 시계열 비교, ML 학습 데이터 확보 |
| **확장 가능 설계** | 구조적으로 열어두는 영역 명시 | 향후 기능 추가 비용 최소화 |

### 1.3 Phase 구조 및 데이터 역할

| Phase | 명칭 | 데이터 역할 | 주요 산출물 |
|:-----:|------|-----------|-----------|
| **1** | 데이터 기반 표준화 | Raw Data 접근 일관성 확보 | 공통 유틸리티, 상수 정의 |
| **2** | 1차 가공 데이터 구축 | 정제·표준화·기본 집계 | 일별 집계, 기본 지표 |
| **3** | 2차 가공 분석 체계 | 파생 지표·기간 비교·세그먼트 | 전환율, ROI, NPS, RFM |
| **4** | 복합 분석 및 인사이트 | 다차원 분석·자동 인사이트 | 분석 허브, 360° 뷰 |
| **5** | 예측·자동화 확장 | 예측 모델·자동화 트리거 | ML 파이프라인 (향후) |

---

## 2. 허브 개선의 목적과 배경

### 2.1 왜 이 작업이 필요한가?

#### 현재 허브의 구조적 한계

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           현재 허브의 데이터 흐름                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   [Google Sheets]                                                           │
│        │                                                                    │
│        ├──────────────────┬──────────────────┬──────────────────┐          │
│        │                  │                  │                  │          │
│        ▼                  ▼                  ▼                  ▼          │
│   ┌─────────┐        ┌─────────┐        ┌─────────┐        ┌─────────┐    │
│   │Dashboard│        │Analytics│        │ Control │        │ Reviews │    │
│   │         │        │         │        │  Tower  │        │         │    │
│   │ 동일    │        │ 동일    │        │ 동일    │        │ 동일    │    │
│   │ 계산    │        │ 계산    │        │ 계산    │        │ 표시만  │    │
│   │ 반복    │        │ 반복    │        │ 반복    │        │         │    │
│   └─────────┘        └─────────┘        └─────────┘        └─────────┘    │
│                                                                             │
│   문제점:                                                                   │
│   • 페이지별 독립적 데이터 처리 → 중복 연산, 일관성 저하                     │
│   • Raw Data 직접 사용 → 복잡한 분석 불가                                   │
│   • 가공 데이터 미저장 → 히스토리 비교 불가                                  │
│   • 분석 수준 제한 → "지금 무엇이?" 수준에서 정체                           │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 개선이 필요한 핵심 이유

| # | 문제 | 영향 | 개선 방향 |
|:-:|------|------|----------|
| 1 | **분석 깊이 부족** | "왜?"를 설명할 수 없음 | 2차 가공 데이터로 원인 분석 |
| 2 | **데이터 재사용 불가** | 동일 계산 반복, 비효율 | 데이터 레이어 공유 구조 |
| 3 | **의사결정 지원 한계** | 현황 파악에 그침 | 인사이트 자동 생성, 예측 |
| 4 | **확장 비용 과다** | 신규 기능마다 전체 재개발 | 모듈화된 데이터 구조 |

### 2.2 이 문서가 다루는 범위

#### ⭕ 포함 범위

- 데이터 가공 단계 정의 (Raw → 1차 → 2차 → n차)
- IA/메뉴 구조 재설계 전략
- Phase별 구현 로드맵 및 상세 태스크
- 데이터 저장·아카이빙·재사용 전략
- 확장 가능성을 위해 열어두는 영역

#### ⛔ 제외 범위

- 캐싱 및 성능 최적화 (별도 문서)
- UI/UX 디자인 상세 (별도 문서)
- 인프라 아키텍처 (별도 문서)

---

## 3. 데이터 활용 성숙도 진단 (As-Is)

### 3.1 데이터 활용 레벨 정의

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        데이터 활용 성숙도 모델                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  Level 5: 자동화       ─── 규칙 기반 자동 액션, 알림 트리거                  │
│       ▲                                                                     │
│  Level 4: 예측         ─── ML 모델, 이탈 예측, 수요 예측                    │
│       ▲                                                                     │
│  Level 3: 원인 분석    ─── Why 분석, 상관관계, 세그먼트 비교                │
│       ▲                    [목표: Phase 4 달성]                             │
│  Level 2: 트렌드/비교  ─── 기간 비교, 추이 분석, 기본 집계                  │
│       ▲                    [현재 대부분 페이지]                              │
│  Level 1: 단순 조회    ─── Raw 데이터 표시, 단발성 집계                     │
│                            [현재: Reviews, Coupon 도구]                     │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 페이지별 현재 활용 레벨

| 페이지 | 현재 레벨 | 목표 레벨 | 주요 한계 | 데이터 소스 |
|--------|:--------:|:--------:|----------|------------|
| **Dashboard** | L2 | L3 | 트렌드만 표시, 원인 분석 불가 | order, logistics |
| **Analytics** | L2 | L3 | RFM 있으나 행동 원인 미분석 | order, users, logistics |
| **Control Tower** | L2.5 | L3 | 실시간 우수, 예측 부재 | logistics |
| **Artist Analytics** | L2 | L3 | 리뷰 연동 없음, 원인 분석 한계 | artists, logistics |
| **Business Brain** | L3 | L4 | 인사이트 제공, 예측 모델 미흡 | order, users, logistics, artists |
| **Reviews** | **L1** | L3 | ⚠️ **단순 갤러리, 분석 전무** | review |
| **Coupon 도구** | **L0** | L2 | ⚠️ **생성만, 효과 분석 없음** | coupon (미연동) |
| **Cost Analysis** | L2 | L3 | 집계 우수, 드릴다운 한계 | settlement_records |
| **Settlement** | L2 | L2.5 | 정상 운영 | settlement_records |

### 3.3 데이터 시트별 활용 현황

| 데이터 시트 | 전체 컬럼 | 활용 컬럼 | 활용률 | 핵심 미활용 영역 |
|------------|:--------:|:--------:|:------:|-----------------|
| **order** | 102 | 42 | 41% | 파생 컬럼 (요일, 분기), 쿠폰비 |
| **logistics** | 35 | 28 | 80% | 일부 상태 컬럼 |
| **users** | 10 | 6 | 60% | 가입 경로, 국가 상세 |
| **artists** | 25 | 18 | 72% | 상세 프로필 |
| **review** | 20 | 5 | **25%** | **NPS, 키워드, 작가별 분석** |
| **coupon** | 22 | 0 | **0%** | **전체 미활용 (673건)** |
| **user_locale** | 5 | 1 | 20% | 타임존, 언어 선호 |
| **settlement_records** | 30 | 22 | 73% | 일부 상세 항목 |

### 3.4 구조적 문제점 상세

#### 문제 1: 코드 일관성 부재

| 유형 | 현황 | 영향 |
|------|------|------|
| **유틸리티 중복** | `formatCurrency` 3곳, `formatChange` 2곳 중복 | 유지보수 비용 증가 |
| **환율 분산** | Backend 4곳, Frontend 1곳 (`USD_TO_KRW = 1350`) | 불일치 위험 |
| **비즈니스 규칙 하드코딩** | 고객 활동 기준 (90일/180일), 물류 위험일 | 정책 변경 시 코드 수정 |

#### 문제 2: 데이터 처리 비효율

| 유형 | 현황 | 영향 |
|------|------|------|
| **매번 재계산** | 동일 집계를 페이지별로 독립 수행 | 응답 지연, 리소스 낭비 |
| **가공 데이터 미저장** | 계산 결과 휘발 | 히스토리 비교 불가 |
| **Raw 직접 사용** | 복잡한 파생 지표 계산 불가 | 분석 깊이 한계 |

#### 문제 3: 데이터 사일로

| 유형 | 현황 | 영향 |
|------|------|------|
| **페이지 간 격리** | 동일 고객 정보 각각 조회 | 통합 뷰 부재 |
| **분석 분산** | 성과/고객/작가 분석 별도 메뉴 | 교차 분석 어려움 |
| **인사이트 단절** | Business Brain ↔ Reviews 미연동 | 종합 판단 불가 |

---

## 4. 데이터 스케일업 전략 (To-Be)

### 4.1 데이터 가공 레이어 아키텍처

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                       데이터 가공 레이어 아키텍처                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌───────────┐   ┌───────────┐   ┌───────────┐   ┌───────────┐            │
│  │  Layer 0  │   │  Layer 1  │   │  Layer 2  │   │  Layer 3+ │            │
│  │  Raw Data │──▶│  1차 가공 │──▶│  2차 가공 │──▶│  n차 가공 │            │
│  └───────────┘   └───────────┘   └───────────┘   └───────────┘            │
│       │               │               │               │                    │
│       ▼               ▼               ▼               ▼                    │
│                                                                             │
│   원천 데이터      정제/표준화       분석용 지표      예측/자동화           │
│   ───────────     ───────────       ───────────     ───────────            │
│   • Google        • NULL 처리       • 파생 지표      • 예측 모델           │
│     Sheets        • 타입 변환       • 기간 비교      • 이탈 확률           │
│   • 실시간        • 환율 변환       • 세그먼트 집계  • 추천 결과           │
│     동기화        • 일별 집계       • 누적/추이      • 자동 트리거         │
│                                                                             │
│   저장: Sheets    저장: DB          저장: DB         저장: DB              │
│   갱신: 실시간    갱신: 일 1회      갱신: 일 1회     갱신: 필요시          │
│                   + 온디맨드        + 온디맨드                              │
│                                                                             │
│   ─────────────────────────────────────────────────────────────────────    │
│   데이터 재사용 흐름:                                                       │
│                                                                             │
│   Dashboard ◀─────────────┬─────────────┬─────────────────────────────────  │
│   Analytics ◀─────────────┤  2차 가공   │                                   │
│   Business Brain ◀────────┤  데이터     ├───▶ 공유 레이어                   │
│   신규 페이지 ◀───────────┴─────────────┘                                   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 4.2 각 레이어 상세 정의

#### Layer 0: Raw Data (원천 데이터)

| 항목 | 내용 |
|------|------|
| **저장 위치** | Google Sheets |
| **갱신 주기** | 실시간 (외부 시스템 연동) |
| **역할** | 원본 데이터 보존, 데이터 수집 지점 |
| **대상 시트** | order(102), logistics(35), users(10), artists(25), review(20), coupon(22), settlement_records(30) |

#### Layer 1: 1차 가공 데이터 (정제/표준화)

| 항목 | 내용 |
|------|------|
| **저장 위치** | DB (`daily_metrics`, `daily_review_metrics`, `daily_coupon_metrics`) |
| **갱신 주기** | 일 1회 배치 (12:00 KST, Raw Data 갱신 후) + 온디맨드 |
| **역할** | 데이터 정제, 표준화, 기본 집계 |

**1차 가공 산출물**:

| 산출물 | 설명 | 활용처 |
|--------|------|--------|
| `DailyBasicMetrics` | 일별 GMV, 주문 수, 고객 수 | Dashboard, Analytics |
| `DailyReviewMetrics` | 일별 평균 평점, 분포 | Reviews, Business Brain |
| `DailyCouponMetrics` | 일별 발급/사용 수, 할인 총액 | Coupon Analytics |

#### Layer 2: 2차 가공 데이터 (분석용)

| 항목 | 내용 |
|------|------|
| **저장 위치** | DB (`analytics_coupon`, `analytics_customer`, `analytics_order_patterns`) |
| **갱신 주기** | 일 1회 배치 + 온디맨드 |
| **역할** | 파생 지표 생성, 기간 비교, 세그먼트 집계 |

**2차 가공 산출물**:

| 산출물 | 파생 지표 | 활용 목적 |
|--------|----------|----------|
| `CouponAnalytics` | 전환율, ROI, 세그먼트별 성과 | 마케팅 효과 측정 |
| `CustomerAnalytics` | NPS, RFM 요약, 코호트 리텐션 | 고객 만족도, 세그먼트 분석 |
| `OrderPatterns` | 요일별/분기별 패턴, 시즈널리티 | 마케팅 타이밍 최적화 |

#### Layer 3+: n차 가공 데이터 (예측/자동화)

| 항목 | 내용 |
|------|------|
| **저장 위치** | DB (`predictions`, `recommendations`) |
| **갱신 주기** | 모델 학습/추론 시 |
| **역할** | 예측 모델 출력, 자동화 트리거 |
| **현재 상태** | Phase 5에서 구조만 준비, 실제 구현은 향후 |

**n차 가공 예정 산출물**:

| 산출물 | 설명 | 비즈니스 가치 |
|--------|------|-------------|
| `ChurnPrediction` | 고객별 이탈 확률 | 선제적 리텐션 액션 |
| `GmvForecast` | 다음 달 GMV 예측 | 목표 설정, 재고 계획 |
| `CouponRecommendation` | 최적 쿠폰 타입/할인율 | 캠페인 자동 최적화 |

### 4.3 데이터 저장·아카이빙 전략

| 데이터 레이어 | 저장 방식 | 아카이빙 | 재사용 가능 |
|-------------|----------|:--------:|:----------:|
| **L0: Raw** | Google Sheets (원본 유지) | N/A | - |
| **L1: 1차 가공** | DB 영구 저장 | ✅ 일별 스냅샷 | ✅ |
| **L2: 2차 가공** | DB 영구 저장 | ✅ 기간별 스냅샷 | ✅ |
| **L3+: n차** | DB 저장 | ✅ 모델 버전별 | ✅ |

**아카이빙이 필요한 이유**:
- **시계열 비교**: "지난 분기 대비 NPS 변화" 분석 가능
- **ML 학습 데이터**: 예측 모델 학습에 히스토리 데이터 필수
- **감사 추적**: 특정 시점의 지표 재현 가능

### 4.4 2차 가공 데이터의 활용 목적

#### 단순 현황 파악을 넘어서

| 질문 유형 | 기존 (L1~2) | To-Be (L2+) | 예시 |
|----------|:-----------:|:-----------:|------|
| **What** (무엇이) | ✅ 가능 | ✅ 가능 | "이번 달 GMV는 1.2억" |
| **When** (언제) | ✅ 가능 | ✅ 가능 | "3월에 피크" |
| **Who** (누가) | ⚠️ 제한적 | ✅ 가능 | "Champions 세그먼트가 GMV의 45%" |
| **Why** (왜) | ❌ 불가 | ✅ 가능 | "CRM 쿠폰 캠페인으로 재구매율 15%↑" |
| **How** (어떻게) | ❌ 불가 | ✅ 가능 | "FIXED 쿠폰이 RATE 대비 전환율 2.3배" |
| **What-if** | ❌ 불가 | ⚠️ 준비중 | "할인율 5%↑ 시 전환율 예상치" |

---

## 5. IA/메뉴 구조 재설계

### 5.1 현재 메뉴 구조의 한계

```
현재 구조:
├── 📊 분석
│   ├── 성과 분석
│   ├── 고객 분석
│   ├── 작가 분석
│   └── 비용 & 손익
│
├── 💬 고객 인사이트
│   └── 고객 리뷰
│
└── 🛠️ 도구
    ├── 쿠폰 생성/발급
    └── ...
```

| 한계 | 설명 |
|------|------|
| **분석 분산** | 성과/고객/작가가 독립 메뉴 → 교차 분석 어려움 |
| **도구-분석 분리** | 쿠폰 생성은 도구, 쿠폰 분석 기능 없음 |
| **인사이트 단절** | 리뷰 데이터가 다른 분석과 연결 안됨 |

### 5.2 제안 메뉴 구조: 목적 기반 허브

```
제안 구조:
├── 📊 분석
│   │
│   ├── 📈 성과 분석 허브              ← 성과 관련 분석 집약
│   │   ├── 성과 분석 (기존)
│   │   ├── 🆕 주문 패턴 분석
│   │   └── 🆕 쿠폰 효과 분석
│   │
│   ├── 👥 고객 분석 허브              ← 고객 관련 분석 집약
│   │   ├── 고객 분석 (기존)
│   │   ├── 🆕 고객 360° 뷰
│   │   └── 🆕 리뷰 분석
│   │
│   ├── 🎨 작가 분석
│   └── 💵 비용 & 손익
│
├── 🧠 경영 인사이트
│   └── Business Brain                 ← 2차 가공 데이터 통합 활용
│
└── 🛠️ 도구
    ├── 쿠폰 생성/발급                 ← 운영 도구 (생성)
    └── ...
```

### 5.3 구조 선택의 논리적 근거

| 관점 | 설명 |
|------|------|
| **목적 기반 그룹핑** | "성과를 보고 싶다" → 성과 허브, "고객을 이해하고 싶다" → 고객 허브 |
| **2차 가공 데이터 공유** | 허브 내 페이지가 동일 데이터 레이어 활용 → 일관성 확보 |
| **확장성** | 각 허브에 신규 분석 추가 용이 (예: 성과 허브 → A/B 테스트 추가) |

### 5.4 사용자별 이용 흐름

| 사용자 | 주요 시나리오 | 이용 흐름 |
|--------|-------------|----------|
| **운영팀** | 일일 성과 점검 | 대시보드 → 성과 허브 → 주문 패턴 |
| **마케팅팀** | 캠페인 효과 분석 | 성과 허브 → 쿠폰 효과 분석 |
| **기획팀** | 고객 인사이트 도출 | 고객 허브 → 360° 뷰 → 리뷰 분석 |
| **경영진** | 전략적 의사결정 | Business Brain (종합 인사이트) |
| **CS팀** | 개별 고객 대응 | 고객 허브 → 360° 뷰 (검색) |

### 5.5 향후 확장 시 구조적 이점

| 확장 기능 | 배치 위치 | 이유 |
|----------|----------|------|
| A/B 테스트 결과 | 성과 분석 허브 | 성과 측정과 연계 |
| LTV 예측 | 고객 분석 허브 | 고객 가치 분석과 연계 |
| 이탈 예측 | 고객 분석 허브 | 고객 행동 분석과 연계 |
| 작가 품질 점수 | 작가 분석 | 작가 관리와 연계 |
| 채널별 ROI | 성과 분석 허브 | 마케팅 성과와 연계 |

---

## 6. Phase별 구현 로드맵 개요

### 6.1 Phase 구조 재정의

기존 Phase 0~5를 **데이터 라이프사이클 관점**에서 재정의합니다.

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        Phase별 데이터 역할 연결                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   Phase 1        Phase 2        Phase 3        Phase 4        Phase 5      │
│   ─────────      ─────────      ─────────      ─────────      ─────────    │
│   기반 표준화    1차 가공       2차 가공       복합 분석      예측/자동화   │
│                                                                             │
│   ┌───────┐     ┌───────┐     ┌───────┐     ┌───────┐     ┌───────┐       │
│   │ 공통  │     │ 일별  │     │ 파생  │     │ 분석  │     │ ML    │       │
│   │ 유틸  │────▶│ 집계  │────▶│ 지표  │────▶│ 허브  │────▶│ 모델  │       │
│   │ 상수  │     │ 저장  │     │ 생성  │     │ 구축  │     │ 자동화│       │
│   └───────┘     └───────┘     └───────┘     └───────┘     └───────┘       │
│       │             │             │             │             │            │
│       ▼             ▼             ▼             ▼             ▼            │
│    Raw 접근      Layer 1       Layer 2       Layer 2+      Layer 3+       │
│    일관성        데이터         데이터        활용          데이터         │
│                                                                             │
│   1~2주          2~3주          3~4주          4~6주         향후          │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 6.2 Phase별 핵심 산출물 요약

| Phase | 핵심 산출물 | 데이터 역할 | 선행 조건 |
|:-----:|-----------|-----------|----------|
| **1** | 공통 유틸리티, 상수 파일, 하드코딩 제거 | Raw 접근 일관성 | - |
| **2** | 일별 집계 테이블, 배치 Job, 기본 API | L1 데이터 구축 | Phase 1 |
| **3** | 쿠폰 분석, 리뷰 분석, NPS 대시보드 | L2 데이터 활용 | Phase 2 |
| **4** | 분석 허브, 고객 360°, Business Brain 확장 | L2+ 복합 활용 | Phase 3 |
| **5** | 예측 모델 인터페이스, 자동화 트리거 | L3+ 확장 준비 | Phase 4 |

### 6.3 전체 타임라인

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           구현 타임라인                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   Week 1-2       Week 3-5       Week 6-9       Week 10-15     Future       │
│   ────────       ────────       ────────       ──────────     ──────       │
│                                                                             │
│   ┌────────┐    ┌────────┐    ┌────────┐    ┌────────┐    ┌────────┐      │
│   │Phase 1 │───▶│Phase 2 │───▶│Phase 3 │───▶│Phase 4 │───▶│Phase 5 │      │
│   │기반    │    │1차가공 │    │2차가공 │    │복합분석│    │예측    │      │
│   └────────┘    └────────┘    └────────┘    └────────┘    └────────┘      │
│                                                                             │
│   • 유틸통합     • DB스키마     • 쿠폰분석     • 분석허브     • 구조준비    │
│   • 상수정의     • 배치Job      • 리뷰분석     • 고객360°     • ML예약     │
│   • 코드정리     • 1차API       • NPS          • BB확장       • 자동화     │
│                                                                             │
│   ──────────────────────────────────────────────────────────────────────    │
│   ▲ 현재                                                                    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 7. Phase 1: 데이터 기반 표준화

### 7.1 Phase 1 목표

> **Raw Data 접근의 일관성 확보** - 모든 페이지가 동일한 방식으로 데이터를 처리

| 목표 | 측정 지표 | 목표치 |
|------|----------|:------:|
| 유틸리티 통합 | 중복 함수 수 | 0개 |
| 상수 중앙화 | 하드코딩 환율/규칙 수 | 0개 |
| 코드 일관성 | 동일 포맷 함수 사용률 | 100% |

### 7.2 Phase 1 산출물

#### 7.2.1 공통 유틸리티 모듈

```typescript
// lib/formatters.ts
export const formatCurrency = (value: number | string | null | undefined): string => {
  if (value === null || value === undefined) return '₩0'
  const num = typeof value === 'string' ? parseFloat(value.replace(/[,\s₩]/g, '')) : value
  if (isNaN(num) || !isFinite(num)) return '₩0'
  return `₩${Math.round(num).toLocaleString('ko-KR')}`
}

export const formatChange = (value: number | null | undefined): string => {
  if (value === null || value === undefined || isNaN(value)) return '0.0%'
  const sign = value >= 0 ? '+' : ''
  return `${sign}${value.toFixed(1)}%`
}

export const toKRW = (usdAmount: number | null | undefined): number => {
  if (usdAmount === null || usdAmount === undefined || isNaN(usdAmount)) return 0
  return Math.round(usdAmount * CURRENCY.USD_TO_KRW)
}
```

#### 7.2.2 상수 정의 파일

```typescript
// config/constants.ts
export const CURRENCY = {
  USD_TO_KRW: 1350,
  SYMBOL_KRW: '₩',
  SYMBOL_USD: '$',
} as const

export const TIMEZONE = {
  DEFAULT: 'Asia/Seoul',
  OFFSET: 9,
} as const

// config/businessRules.ts
export const CUSTOMER_ACTIVITY_THRESHOLDS = {
  ACTIVE_DAYS: 90,
  INACTIVE_DAYS: 180,
  CHURN_RISK_DAYS: 181,
} as const

export const LOGISTICS_CRITICAL_DAYS = {
  unreceived: 7,
  artistShipping: 5,
  awaitingInspection: 2,
  inspectionComplete: 3,
  internationalShipping: 14,
} as const
```

### 7.3 Phase 1 상세 태스크

| # | 태스크 | 대상 파일 | 예상 시간 |
|:-:|--------|----------|:---------:|
| 1 | `lib/formatters.ts` 생성 | 신규 | 1시간 |
| 2 | `lib/safeUtils.ts` 생성 | 신규 | 1시간 |
| 3 | `config/constants.ts` 생성 | 신규 | 30분 |
| 4 | `config/businessRules.ts` 생성 | 신규 | 30분 |
| 5 | Dashboard 중복 함수 제거 | `dashboard/page.tsx` | 1시간 |
| 6 | Analytics 중복 함수 제거 | `analytics/page.tsx` | 1시간 |
| 7 | Settlement 중복 함수 제거 | `settlement/page.tsx` | 30분 |
| 8 | Business Brain 환율 중앙화 | `business-brain/page.tsx` | 30분 |
| 9 | Control Tower 상수 분리 | `control-tower/page.tsx` | 30분 |
| 10 | Dashboard 하드코딩 제거 | `dashboard/page.tsx` | 2시간 |

**총 예상 시간**: 8~10시간

### 7.4 Phase 1 완료 기준

- [ ] 모든 페이지가 `lib/formatters.ts` import
- [ ] `USD_TO_KRW`, 비즈니스 규칙 상수 하드코딩 0건
- [ ] Dashboard의 "신규 고객", "배송 완료율" 실제 데이터 사용
- [ ] 테스트: 모든 페이지 금액 표시 형식 일치

### 7.5 이후 Phase를 위해 열어두는 부분

- 환율 실시간 조회 인터페이스 (현재는 상수, 향후 API로 전환 가능)
- 비즈니스 규칙의 DB 저장 구조 (현재는 코드, 향후 관리자 설정 가능)

---

## 8. Phase 2: 1차 가공 데이터 구축

### 8.1 Phase 2 목표

> **Layer 1 데이터 인프라 구축** - 일별 집계 데이터 저장 및 조회 체계

| 목표 | 측정 지표 | 목표치 |
|------|----------|:------:|
| 일별 집계 자동화 | 배치 Job 실행률 | 100% |
| 데이터 저장 | 일별 스냅샷 보유 기간 | 365일+ |
| 조회 효율 | 집계 API 응답 시간 | <500ms |

### 8.2 Phase 2 산출물

#### 8.2.1 DB 스키마

```sql
-- 1차 가공: 일별 기본 지표
CREATE TABLE daily_metrics (
  id SERIAL PRIMARY KEY,
  date DATE NOT NULL UNIQUE,
  
  -- 주문 지표
  order_count INT DEFAULT 0,
  total_gmv_krw DECIMAL(15,2) DEFAULT 0,
  total_gmv_usd DECIMAL(15,2) DEFAULT 0,
  avg_aov DECIMAL(15,2) DEFAULT 0,
  
  -- 고객 지표
  unique_customers INT DEFAULT 0,
  new_customers INT DEFAULT 0,
  returning_customers INT DEFAULT 0,
  
  -- 국가별 분리
  jp_order_count INT DEFAULT 0,
  jp_gmv DECIMAL(15,2) DEFAULT 0,
  en_order_count INT DEFAULT 0,
  en_gmv DECIMAL(15,2) DEFAULT 0,
  
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- 1차 가공: 리뷰 일별 지표
CREATE TABLE daily_review_metrics (
  id SERIAL PRIMARY KEY,
  date DATE NOT NULL UNIQUE,
  
  review_count INT DEFAULT 0,
  avg_rating DECIMAL(3,2) DEFAULT 0,
  rating_1 INT DEFAULT 0,
  rating_2 INT DEFAULT 0,
  rating_3 INT DEFAULT 0,
  rating_4 INT DEFAULT 0,
  rating_5 INT DEFAULT 0,
  
  created_at TIMESTAMP DEFAULT NOW()
);

-- 1차 가공: 쿠폰 일별 지표
CREATE TABLE daily_coupon_metrics (
  id SERIAL PRIMARY KEY,
  date DATE NOT NULL UNIQUE,
  
  issued_count INT DEFAULT 0,
  used_count INT DEFAULT 0,
  total_discount DECIMAL(15,2) DEFAULT 0,
  total_gmv DECIMAL(15,2) DEFAULT 0,
  
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 8.2.2 배치 Job

```typescript
// jobs/dailyAggregation.ts
import cron from 'node-cron'

// 매일 12:00 KST 실행 (Raw Data는 11:00에 수동 갱신됨)
cron.schedule('0 12 * * *', async () => {
  const yesterday = getYesterday()
  
  // 1. 기본 지표 집계
  await aggregateDailyMetrics(yesterday)
  
  // 2. 리뷰 지표 집계
  await aggregateDailyReviewMetrics(yesterday)
  
  // 3. 쿠폰 지표 집계
  await aggregateDailyCouponMetrics(yesterday)
  
  console.log(`[DailyAggregation] ${yesterday} completed`)
})
```

### 8.3 Phase 2 상세 태스크

| # | 태스크 | 데이터 레벨 | 예상 시간 |
|:-:|--------|:-----------:|:---------:|
| 1 | DB 스키마 생성 (daily_metrics) | L1 | 2시간 |
| 2 | 배치 Job 개발 (dailyAggregation) | L1 | 4시간 |
| 3 | 기본 집계 API 개발 | L1 | 4시간 |
| 4 | 리뷰 집계 테이블 및 Job | L1 | 3시간 |
| 5 | 쿠폰 집계 테이블 및 Job | L1 | 3시간 |
| 6 | 과거 데이터 백필 스크립트 | L1 | 4시간 |

**총 예상 시간**: 20시간 (2~3주)

### 8.4 Phase 2 완료 기준

- [ ] 일별 집계 배치 Job 정상 실행 (3일 이상 연속)
- [ ] 과거 데이터 백필 완료 (최소 90일)
- [ ] Dashboard가 집계 API 사용으로 전환

### 8.5 이후 Phase를 위해 열어두는 부분

- 시간대별 집계 (현재: 일별만, 향후: 시간대별)
- 작가별/상품별 일별 집계 (현재: 미구현)

---

## 9. Phase 3: 2차 가공 분석 체계

### 9.1 Phase 3 목표

> **Layer 2 분석 데이터 활용** - 파생 지표 생성 및 분석 페이지 구축

| 목표 | 측정 지표 | 목표치 |
|------|----------|:------:|
| 쿠폰 분석 활성화 | 활용 컬럼 수 | 22개 중 15개+ |
| 리뷰 분석 활성화 | NPS, 트렌드, 작가별 | 100% |
| 파생 지표 생성 | 전환율, ROI, NPS | 자동 계산 |

### 9.2 Phase 3 산출물

#### 9.2.1 쿠폰 효과 분석 페이지 (`/coupon-analytics`)

| 기능 | 설명 | 데이터 소스 |
|------|------|-----------|
| **전환율 대시보드** | 전체/월별 쿠폰 전환율 (used/issued) | L2: `analytics_coupon` |
| **ROI 분석** | 할인 금액 대비 GMV (gmv/discount) | L2: `analytics_coupon` |
| **국가별 성과** | JP vs EN 쿠폰 효과 비교 | L2: `analytics_coupon` |
| **유형별 성과** | RATE vs FIXED 비교 | L2: `analytics_coupon` |
| **TOP 10 쿠폰** | 전환율/ROI 기준 상위 | L2: `analytics_coupon` |
| **실패 쿠폰** | 사용률 0% 목록 및 원인 | L2: `analytics_coupon` |

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ 🎯 쿠폰 효과 분석                                          📅 기간 선택    │
├─────────────────────────────────────────────────────────────────────────────┤
│ ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐     │
│ │ 총 쿠폰   │ │ 전환율    │ │ 총 GMV    │ │ 총 할인   │ │ ROI       │     │
│ │   673     │ │  2.8%     │ │ ¥2.5M     │ │ ¥180K     │ │ 13.9x     │     │
│ └───────────┘ └───────────┘ └───────────┘ └───────────┘ └───────────┘     │
├────────────────────────────────┬────────────────────────────────────────────┤
│   월별 전환율 트렌드            │   국가별/유형별 비교                       │
│   ┌────────────────────────┐   │   ┌────────────────────────────────────┐  │
│   │  📈 전환율 추이        │   │   │  JP: 3.2%  FIXED: 4.1%            │  │
│   │     ─────────────      │   │   │  EN: 1.8%  RATE: 1.8%             │  │
│   └────────────────────────┘   │   └────────────────────────────────────┘  │
├────────────────────────────────┴────────────────────────────────────────────┤
│   💡 인사이트: FIXED 쿠폰이 RATE 대비 전환율 2.3배 높음                     │
│   📌 제안: CRM 재구매 유도에 FIXED ¥1000 쿠폰 확대 권장                     │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 9.2.2 리뷰 분석 대시보드 (`/review-analytics`)

| 기능 | 설명 | 데이터 소스 |
|------|------|-----------|
| **NPS 대시보드** | 실시간 NPS 게이지, 분포 | L2: `analytics_customer` |
| **평점 트렌드** | 월별 평균 평점 추이 | L2: `analytics_customer` |
| **작가별 분석** | 작가 평점 랭킹, 이슈 | L1+L2 |
| **상품별 분석** | 상품 평점 랭킹, 문제 상품 | L1+L2 |
| **국가별 분석** | JP vs EN NPS, 평점 비교 | L2: `analytics_customer` |

### 9.3 Phase 3 상세 태스크

| # | 태스크 | 데이터 레벨 | 예상 시간 |
|:-:|--------|:-----------:|:---------:|
| 1 | `analytics_coupon` 테이블 설계 | L2 | 2시간 |
| 2 | 쿠폰 분석 API 개발 (`/api/coupon-analytics/*`) | L2 | 8시간 |
| 3 | 쿠폰 분석 프론트엔드 개발 | L2 활용 | 12시간 |
| 4 | `analytics_customer` 테이블 설계 | L2 | 2시간 |
| 5 | 리뷰 분석 API 개발 (`/api/review-analytics/*`) | L2 | 6시간 |
| 6 | 리뷰 분석 프론트엔드 개발 | L2 활용 | 10시간 |
| 7 | NPS 계산 로직 및 배치 Job | L1→L2 | 4시간 |

**총 예상 시간**: 44시간 (3~4주)

### 9.4 Phase 3 완료 기준

- [ ] `/coupon-analytics` 페이지 정상 운영
- [ ] `/review-analytics` 페이지 정상 운영
- [ ] NPS 지표 일별 자동 갱신
- [ ] 쿠폰 전환율, ROI 일별 자동 갱신

### 9.5 이후 Phase를 위해 열어두는 부분

- 키워드 분석 (일본어 NLP) - 구조만 준비
- A/B 테스트 결과 저장 - 테이블 구조만 준비

---

## 10. Phase 4: 복합 분석 및 인사이트

### 10.1 Phase 4 목표

> **Layer 2+ 복합 활용** - 분석 허브 구축 및 통합 뷰 제공

| 목표 | 측정 지표 | 목표치 |
|------|----------|:------:|
| 분석 허브 구축 | 허브 페이지 수 | 2개 (성과/고객) |
| 통합 뷰 구현 | 고객 360° 완성도 | 80%+ |
| Business Brain 확장 | 쿠폰/리뷰 연동 | 100% |

### 10.2 Phase 4 산출물

#### 10.2.1 분석 허브 랜딩 페이지

**성과 분석 허브** (`/analytics/performance-hub`)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ 📈 성과 분석 허브                                          📅 2024.12      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ┌─────────────────────────┐  ┌─────────────────────────┐                 │
│   │ 📊 성과 분석            │  │ 📆 주문 패턴 분석       │                 │
│   │ ─────────────────────── │  │ ─────────────────────── │                 │
│   │ 이번 달 GMV: ₩1.2억     │  │ 피크 요일: 금요일       │                 │
│   │ 전월 대비: +12.5%       │  │ 피크 시즌: Q4           │                 │
│   │ AOV: ₩45,000            │  │ 시즈널리티 지수: 1.35   │                 │
│   │                         │  │                         │                 │
│   │ [상세 보기 →]           │  │ [상세 보기 →]           │                 │
│   └─────────────────────────┘  └─────────────────────────┘                 │
│                                                                             │
│   ┌─────────────────────────┐                                              │
│   │ 🎫 쿠폰 효과 분석       │                                              │
│   │ ─────────────────────── │                                              │
│   │ 전체 전환율: 2.8%       │                                              │
│   │ 전체 ROI: 13.9x         │                                              │
│   │ 최고 성과: FIXED ¥1000  │                                              │
│   │                         │                                              │
│   │ [상세 보기 →]           │                                              │
│   └─────────────────────────┘                                              │
│                                                                             │
│   💡 허브 인사이트:                                                         │
│   • FIXED 쿠폰 전환율(4.1%)이 RATE(1.8%)보다 2.3배 높음                    │
│   • 금요일 프로모션 효과 23% 높음 → 금요일 집중 캠페인 권장                 │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 10.2.2 통합 고객 360° 뷰 (`/customer-360`)

| 섹션 | 데이터 소스 | 표시 정보 |
|------|-----------|----------|
| **기본 정보** | users | ID, 가입일, 국가, 세그먼트 |
| **구매 이력** | order | 주문 타임라인, 총 구매액, AOV |
| **RFM 점수** | L2: `analytics_customer` | R/F/M 점수, 세그먼트 |
| **쿠폰 이력** | coupon + order | 사용 쿠폰, 할인 금액 |
| **리뷰 이력** | review | 작성 리뷰, 평균 평점 |
| **예상 LTV** | L2: `analytics_customer` | 생애 가치 추정 |

#### 10.2.3 Business Brain 확장

| 추가 탭 | 데이터 소스 | 인사이트 |
|--------|-----------|---------|
| **쿠폰 인사이트** | L2: `analytics_coupon` | 쿠폰 전략 제안, ROI 분석 |
| **리뷰 인사이트** | L2: `analytics_customer` | NPS 트렌드, 이슈 알림 |

### 10.3 Phase 4 상세 태스크

| # | 태스크 | 데이터 레벨 | 예상 시간 |
|:-:|--------|:-----------:|:---------:|
| 1 | 성과 분석 허브 랜딩 페이지 | L2 활용 | 8시간 |
| 2 | 고객 분석 허브 랜딩 페이지 | L2 활용 | 8시간 |
| 3 | 고객 360° 뷰 백엔드 API | L1+L2 | 12시간 |
| 4 | 고객 360° 뷰 프론트엔드 | L2 활용 | 16시간 |
| 5 | Business Brain 쿠폰 탭 | L2 활용 | 8시간 |
| 6 | Business Brain 리뷰 탭 | L2 활용 | 8시간 |
| 7 | 주문 패턴 분석 페이지 | L2 활용 | 12시간 |

**총 예상 시간**: 72시간 (4~6주)

### 10.4 Phase 4 완료 기준

- [ ] 성과/고객 분석 허브 랜딩 페이지 운영
- [ ] 고객 360° 뷰 페이지 운영
- [ ] Business Brain에 쿠폰/리뷰 탭 추가
- [ ] 주문 패턴 분석 페이지 운영

### 10.5 이후 Phase를 위해 열어두는 부분

- 허브 간 교차 분석 링크
- 대시보드 위젯 커스터마이징

---

## 11. Phase 5: 예측·자동화 확장

### 11.1 Phase 5 목표

> **Layer 3+ 구조 준비** - 예측 모델 인터페이스 및 자동화 트리거 설계

| 목표 | 측정 지표 | 목표치 |
|------|----------|:------:|
| 예측 인터페이스 | 테이블/API 구조 | 100% |
| 자동화 트리거 | 규칙 엔진 설계 | 완료 |
| ML 파이프라인 | 데이터 준비 상태 | Ready |

### 11.2 Phase 5 범위 명확화

#### ⭕ 이번 Phase에서 구현

| 항목 | 설명 |
|------|------|
| **예측 데이터 테이블 구조** | `predictions`, `recommendations` 테이블 스키마 |
| **예측 API 인터페이스** | `/api/predictions/*` 엔드포인트 구조 |
| **자동화 규칙 테이블** | `automation_rules` 테이블 스키마 |
| **학습 데이터 준비** | L1, L2 데이터의 ML 학습용 포맷 |

#### ⛔ 이번 Phase에서 구현하지 않음 (향후)

| 항목 | 설명 | 향후 확장 시점 |
|------|------|-------------|
| 실제 ML 모델 학습 | 이탈 예측, GMV 예측 모델 | 데이터 6개월+ 축적 후 |
| 자동화 액션 실행 | 알림, 쿠폰 자동 발급 | 규칙 검증 후 |
| A/B 테스트 자동화 | 실험 자동 할당 | 트래픽 확보 후 |

### 11.3 Phase 5 산출물

#### 11.3.1 예측 데이터 구조

```sql
-- 예측 결과 저장 (구조만 생성)
CREATE TABLE predictions (
  id SERIAL PRIMARY KEY,
  prediction_type VARCHAR(50) NOT NULL,  -- 'churn', 'gmv', 'ltv'
  entity_type VARCHAR(50) NOT NULL,      -- 'customer', 'artist', 'overall'
  entity_id VARCHAR(100),                -- 고객 ID, 작가 ID 등
  
  predicted_value DECIMAL(15,4),
  confidence DECIMAL(5,4),
  
  model_version VARCHAR(50),
  training_period_start DATE,
  training_period_end DATE,
  
  created_at TIMESTAMP DEFAULT NOW(),
  expires_at TIMESTAMP                   -- 예측 유효 기간
);

-- 추천 결과 저장 (구조만 생성)
CREATE TABLE recommendations (
  id SERIAL PRIMARY KEY,
  recommendation_type VARCHAR(50),       -- 'coupon', 'action', 'target'
  target_entity_type VARCHAR(50),
  target_entity_id VARCHAR(100),
  
  recommendation_content JSONB,          -- 추천 상세 내용
  priority INT,
  
  model_version VARCHAR(50),
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 11.3.2 자동화 규칙 구조

```sql
-- 자동화 규칙 테이블 (구조만 생성)
CREATE TABLE automation_rules (
  id SERIAL PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  description TEXT,
  
  trigger_type VARCHAR(50),              -- 'threshold', 'schedule', 'event'
  trigger_condition JSONB,               -- {"metric": "coupon.conversionRate", "operator": "<", "value": 0.01}
  
  action_type VARCHAR(50),               -- 'alert', 'email', 'slack', 'auto_pause'
  action_config JSONB,
  
  enabled BOOLEAN DEFAULT false,         -- 초기에는 비활성화
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 11.4 Phase 5 상세 태스크

| # | 태스크 | 목적 | 예상 시간 |
|:-:|--------|------|:---------:|
| 1 | `predictions` 테이블 생성 | 예측 결과 저장 구조 | 2시간 |
| 2 | `recommendations` 테이블 생성 | 추천 결과 저장 구조 | 2시간 |
| 3 | `automation_rules` 테이블 생성 | 자동화 규칙 저장 | 2시간 |
| 4 | 예측 API 인터페이스 정의 | 엔드포인트 구조 | 4시간 |
| 5 | ML 학습 데이터 포맷 정의 | 데이터 준비 | 4시간 |
| 6 | 예측 결과 표시 UI 구조 | 프론트엔드 준비 | 4시간 |

**총 예상 시간**: 18시간

### 11.5 Phase 5 완료 기준

- [ ] 예측 관련 테이블 구조 생성
- [ ] 예측 API 인터페이스 문서화
- [ ] 자동화 규칙 테이블 구조 생성
- [ ] ML 학습 데이터 포맷 정의 문서화

### 11.6 향후 확장 로드맵

| 확장 영역 | 선행 조건 | 예상 시점 |
|----------|----------|----------|
| **이탈 예측 모델** | 고객 행동 데이터 6개월+ | Phase 5 완료 후 3개월 |
| **GMV 예측 모델** | 일별 집계 데이터 1년+ | Phase 5 완료 후 6개월 |
| **쿠폰 추천 모델** | 쿠폰 효과 데이터 1년+ | Phase 5 완료 후 6개월 |
| **자동화 액션** | 규칙 검증 완료 | Phase 5 완료 후 3개월 |

---

## 12. 부록: 데이터 흐름 및 기대 효과

### 12.1 전체 데이터 흐름도

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                           Global Business Hub 데이터 아키텍처                            │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                         │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│   │                              DATA SOURCES (Layer 0)                              │  │
│   │  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ │  │
│   │  │ order  │ │logistic│ │ users  │ │artists │ │ review │ │ coupon │ │settlem.│ │  │
│   │  │ (102)  │ │  (35)  │ │  (10)  │ │  (25)  │ │  (20)  │ │  (22)  │ │  (30)  │ │  │
│   │  └───┬────┘ └───┬────┘ └───┬────┘ └───┬────┘ └───┬────┘ └───┬────┘ └───┬────┘ │  │
│   └──────┼──────────┼──────────┼──────────┼──────────┼──────────┼──────────┼───────┘  │
│          │          │          │          │          │          │          │          │
│          └──────────┴──────────┴────┬─────┴──────────┴──────────┴──────────┘          │
│                                     │                                                  │
│                                     ▼  Phase 2: 배치 Job                               │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│   │                              1차 가공 (Layer 1)                                  │  │
│   │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                  │  │
│   │  │ daily_metrics   │  │daily_review_    │  │daily_coupon_    │                  │  │
│   │  │ (일별 기본)      │  │metrics (리뷰)   │  │metrics (쿠폰)   │                  │  │
│   │  └────────┬────────┘  └────────┬────────┘  └────────┬────────┘                  │  │
│   └───────────┼─────────────────────┼─────────────────────┼─────────────────────────┘  │
│               │                     │                     │                            │
│               └─────────────────────┼─────────────────────┘                            │
│                                     │                                                  │
│                                     ▼  Phase 3: 분석 Job                               │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│   │                              2차 가공 (Layer 2)                                  │  │
│   │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                  │  │
│   │  │analytics_coupon │  │analytics_       │  │analytics_order_ │                  │  │
│   │  │(전환율,ROI,세그)│  │customer(NPS,RFM)│  │patterns(패턴)   │                  │  │
│   │  └────────┬────────┘  └────────┬────────┘  └────────┬────────┘                  │  │
│   └───────────┼─────────────────────┼─────────────────────┼─────────────────────────┘  │
│               │                     │                     │                            │
│               └─────────────────────┼─────────────────────┘                            │
│                                     │                                                  │
│                                     ▼  Phase 4: 복합 활용                              │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│   │                            APPLICATION LAYER                                     │  │
│   │                                                                                  │  │
│   │   ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                 │  │
│   │   │ 성과 분석 허브  │  │ 고객 분석 허브  │  │ Business Brain  │                 │  │
│   │   │ ─────────────── │  │ ─────────────── │  │ ─────────────── │                 │  │
│   │   │ • 성과 분석     │  │ • 고객 분석     │  │ • 종합 인사이트 │                 │  │
│   │   │ • 주문 패턴     │  │ • 고객 360°     │  │ • 쿠폰 인사이트 │                 │  │
│   │   │ • 쿠폰 효과     │  │ • 리뷰 분석     │  │ • 리뷰 인사이트 │                 │  │
│   │   └─────────────────┘  └─────────────────┘  └─────────────────┘                 │  │
│   │                                                                                  │  │
│   └──────────────────────────────────────────────────────────────────────────────────┘  │
│                                     │                                                  │
│                                     ▼  Phase 5: 구조 준비 (향후 확장)                  │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐  │
│   │                           n차 가공 (Layer 3+) [구조만 준비]                      │  │
│   │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                  │  │
│   │  │  predictions    │  │ recommendations │  │automation_rules │                  │  │
│   │  │  (예측 결과)    │  │  (추천 결과)    │  │  (자동화 규칙)  │                  │  │
│   │  └─────────────────┘  └─────────────────┘  └─────────────────┘                  │  │
│   └──────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                         │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

### 12.2 기대 효과 요약

| 항목 | 현재 (As-Is) | 목표 (To-Be) | 개선 효과 |
|------|:-----------:|:-----------:|:---------:|
| **데이터 활용 레벨** | L2 (트렌드) | L3~4 (원인·예측) | **+2 레벨** |
| **데이터 활용률** | 55% | 90% | **+64%** |
| **분석 재사용성** | 0% (독립 처리) | 80% (레이어 공유) | **신규** |
| **인사이트 깊이** | "What" | "What + Why + How" | **질적 향상** |
| **코드 일관성** | 60% | 95% | **+58%** |
| **신규 기능 개발 비용** | 높음 | 낮음 (모듈화) | **-50%** |

### 12.3 Phase별 기대 효과

| Phase | 기대 효과 | 비즈니스 가치 |
|:-----:|----------|-------------|
| **1** | 코드 품질 향상, 유지보수 비용 감소 | 개발 속도 30%↑ |
| **2** | 집계 속도 향상, 데이터 아카이빙 | 히스토리 분석 가능 |
| **3** | 쿠폰·리뷰 분석 활성화 | 마케팅 ROI 측정, 고객 만족도 측정 |
| **4** | 통합 뷰 제공, 교차 분석 | 의사결정 속도 향상 |
| **5** | 예측 기반 선제 대응 구조 | 미래 가치 (준비) |

### 12.4 주요 신규 활용 데이터

| 데이터 | 현재 활용률 | 목표 활용률 | 핵심 가치 |
|--------|:----------:|:----------:|----------|
| **coupon** | 0% | 80% | 마케팅 ROI, 캠페인 최적화 |
| **review (분석)** | 25% | 80% | NPS, 고객 만족도, 품질 개선 |
| **order (파생)** | 40% | 70% | 패턴 분석, 시즈널리티 |
| **user_locale** | 20% | 60% | 지역화, 타이밍 최적화 |

---

## 📋 문서 변경 이력

| 버전 | 날짜 | 변경 내용 |
|:----:|------|----------|
| 1.0 | 2024-12-17 | 최초 작성 |
| 2.0 | 2024-12-17 | Coupon 분석 추가, Business Brain 진단 |
| **3.0** | **2024-12-17** | **전면 리뉴얼: 데이터 레이어 구조, Phase 재정의, IA 재설계** |

---

> **문서 관리자**: AI 자동화팀  
> **최종 업데이트**: 2024-12-17  
> **다음 리뷰 예정일**: Phase 1 완료 후  
> **관련 문서**: `데이터_규칙_가이드.md`, `Phase5_고도화_IA설계_및_데이터전략.md`
