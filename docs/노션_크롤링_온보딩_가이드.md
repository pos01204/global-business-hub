# ê³µê°œ ë…¸ì…˜ í˜ì´ì§€ í¬ë¡¤ë§ ê¸°ë°˜ ì˜¨ë³´ë”© ê°€ì´ë“œ êµ¬ì¶•

## ğŸ“‹ ê°œìš”

**API ì—°ë™ ì—†ì´** ê³µê°œ/ê²Œì‹œëœ ë…¸ì…˜ í˜ì´ì§€ë¥¼ í¬ë¡¤ë§í•˜ì—¬ ê¸€ë¡œë²Œ ë¹„ì¦ˆë‹ˆìŠ¤íŒ€ ì‹ ê·œ ì…ì‚¬ì ì˜¨ë³´ë”© í˜ì´ì§€ë¥¼ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

### ì¥ì 
- âœ… Notion API í‚¤ ì„¤ì • ë¶ˆí•„ìš”
- âœ… í†µí•© ê³µìœ  ì„¤ì • ë¶ˆí•„ìš”
- âœ… ê³µê°œëœ í˜ì´ì§€ë§Œ ìˆìœ¼ë©´ ë°”ë¡œ ì‹œì‘ ê°€ëŠ¥
- âœ… êµ¬í˜„ì´ ë” ê°„ë‹¨í•¨

### ëŒ€ìƒ ë…¸ì…˜ í˜ì´ì§€ ì˜ˆì‹œ
- **ì‘ê°€ ê³µì§€ (23.04.11)**: https://idus.notion.site/23-04-11-79538fb8130c45fa818a28148335a362

---

## ğŸ—ï¸ êµ¬í˜„ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    í¬ë¡¤ë§ ê¸°ë°˜ ì›Œí¬í”Œë¡œìš°                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚   [1ë‹¨ê³„: í˜ì´ì§€ í¬ë¡¤ë§]                                                â”‚
â”‚        â”‚                                                               â”‚
â”‚        â–¼                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚ Puppeteer/  â”‚â”€â”€â”€â”€â–¶â”‚ HTML íŒŒì‹±   â”‚â”€â”€â”€â”€â–¶â”‚ ì½˜í…ì¸  ì¶”ì¶œ â”‚             â”‚
â”‚   â”‚ Playwright  â”‚     â”‚ (Cheerio)   â”‚     â”‚ (JSON/MD)   â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                        â”‚
â”‚   [2ë‹¨ê³„: ì½˜í…ì¸  êµ¬ì¡°í™”]                                                â”‚
â”‚        â”‚                                                               â”‚
â”‚        â–¼                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚ í† ê¸€ êµ¬ì¡°   â”‚â”€â”€â”€â”€â–¶â”‚ ê³„ì¸µ ë¶„ì„   â”‚â”€â”€â”€â”€â–¶â”‚ ì¹´í…Œê³ ë¦¬    â”‚             â”‚
â”‚   â”‚ íŒŒì‹±       â”‚     â”‚             â”‚     â”‚ ë¶„ë¥˜        â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                        â”‚
â”‚   [3ë‹¨ê³„: AI ë¶„ì„ ë° ì •ë¦¬]                                              â”‚
â”‚        â”‚                                                               â”‚
â”‚        â–¼                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚ LLM ìš”ì•½   â”‚â”€â”€â”€â”€â–¶â”‚ ì˜¨ë³´ë”©      â”‚â”€â”€â”€â”€â–¶â”‚ êµ¬ì¡°í™”ëœ    â”‚             â”‚
â”‚   â”‚            â”‚     â”‚ êµ¬ì¡° ìƒì„±   â”‚     â”‚ ê°€ì´ë“œ      â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                        â”‚
â”‚   [4ë‹¨ê³„: í˜ì´ì§€ ìƒì„±]                                                  â”‚
â”‚        â”‚                                                               â”‚
â”‚        â–¼                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚ í”„ë¡ íŠ¸ì—”ë“œ â”‚â”€â”€â”€â”€â–¶â”‚ ì¸í„°ë™í‹°ë¸Œ â”‚â”€â”€â”€â”€â–¶â”‚ ë°°í¬        â”‚             â”‚
â”‚   â”‚ êµ¬í˜„       â”‚     â”‚ UI         â”‚     â”‚             â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Œ êµ¬í˜„ ë‹¨ê³„ë³„ ìƒì„¸ ê°€ì´ë“œ

### 1ë‹¨ê³„: ë…¸ì…˜ í˜ì´ì§€ í¬ë¡¤ë§ êµ¬í˜„

#### 1.1 í•„ìš” íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
cd backend
npm install puppeteer cheerio
```

#### 1.2 ë…¸ì…˜ í¬ë¡¤ëŸ¬ ì„œë¹„ìŠ¤ êµ¬í˜„

```typescript
// backend/src/services/notionCrawler.ts
import puppeteer, { Browser, Page } from 'puppeteer';
import * as cheerio from 'cheerio';

interface NotionBlock {
  type: 'toggle' | 'text' | 'heading' | 'bullet' | 'numbered' | 'callout' | 'table';
  content: string;
  children?: NotionBlock[];
  level?: number;
}

interface CrawledPage {
  url: string;
  title: string;
  blocks: NotionBlock[];
  rawText: string;
  crawledAt: string;
}

export class NotionCrawler {
  private browser: Browser | null = null;
  
  // ë¸Œë¼ìš°ì € ì´ˆê¸°í™”
  async init(): Promise<void> {
    this.browser = await puppeteer.launch({
      headless: true,
      args: ['--no-sandbox', '--disable-setuid-sandbox']
    });
  }
  
  // ë¸Œë¼ìš°ì € ì¢…ë£Œ
  async close(): Promise<void> {
    if (this.browser) {
      await this.browser.close();
      this.browser = null;
    }
  }
  
  // ë‹¨ì¼ í˜ì´ì§€ í¬ë¡¤ë§
  async crawlPage(url: string): Promise<CrawledPage> {
    if (!this.browser) {
      await this.init();
    }
    
    const page = await this.browser!.newPage();
    
    try {
      // í˜ì´ì§€ ë¡œë“œ
      await page.goto(url, { waitUntil: 'networkidle2', timeout: 30000 });
      
      // ë…¸ì…˜ í˜ì´ì§€ê°€ ì™„ì „íˆ ë¡œë“œë  ë•Œê¹Œì§€ ëŒ€ê¸°
      await page.waitForSelector('[class*="notion-page-content"]', { timeout: 10000 });
      
      // ëª¨ë“  í† ê¸€ í¼ì¹˜ê¸°
      await this.expandAllToggles(page);
      
      // HTML ì¶”ì¶œ
      const html = await page.content();
      const title = await page.title();
      
      // ì½˜í…ì¸  íŒŒì‹±
      const blocks = this.parseNotionHtml(html);
      const rawText = this.extractRawText(blocks);
      
      return {
        url,
        title,
        blocks,
        rawText,
        crawledAt: new Date().toISOString()
      };
    } finally {
      await page.close();
    }
  }
  
  // ëª¨ë“  í† ê¸€ í¼ì¹˜ê¸°
  private async expandAllToggles(page: Page): Promise<void> {
    let expandedCount = 0;
    let maxIterations = 10; // ë¬´í•œ ë£¨í”„ ë°©ì§€
    
    while (maxIterations > 0) {
      // ë‹«íŒ í† ê¸€ ì°¾ê¸°
      const closedToggles = await page.$$('[class*="notion-toggle"]:not([class*="open"]) > div:first-child');
      
      if (closedToggles.length === 0) break;
      
      // ê° í† ê¸€ í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°
      for (const toggle of closedToggles) {
        try {
          await toggle.click();
          await page.waitForTimeout(300); // ì• ë‹ˆë©”ì´ì…˜ ëŒ€ê¸°
          expandedCount++;
        } catch (e) {
          // í´ë¦­ ì‹¤íŒ¨ ì‹œ ë¬´ì‹œ
        }
      }
      
      maxIterations--;
    }
    
    console.log(`[NotionCrawler] Expanded ${expandedCount} toggles`);
  }
  
  // HTML íŒŒì‹±í•˜ì—¬ ë¸”ë¡ êµ¬ì¡° ì¶”ì¶œ
  private parseNotionHtml(html: string): NotionBlock[] {
    const $ = cheerio.load(html);
    const blocks: NotionBlock[] = [];
    
    // ë…¸ì…˜ ì½˜í…ì¸  ì˜ì—­ ì„ íƒ
    const contentArea = $('[class*="notion-page-content"]');
    
    // ê° ë¸”ë¡ ìš”ì†Œ íŒŒì‹±
    contentArea.find('[class*="notion-"]').each((_, element) => {
      const $el = $(element);
      const className = $el.attr('class') || '';
      
      // í† ê¸€ ë¸”ë¡
      if (className.includes('notion-toggle')) {
        const toggleTitle = $el.find('> div:first-child').text().trim();
        const children = this.parseToggleChildren($, $el);
        
        blocks.push({
          type: 'toggle',
          content: toggleTitle,
          children
        });
      }
      // ì œëª© ë¸”ë¡
      else if (className.includes('notion-header') || className.includes('notion-sub_header')) {
        const level = className.includes('sub_sub') ? 3 : className.includes('sub') ? 2 : 1;
        blocks.push({
          type: 'heading',
          content: $el.text().trim(),
          level
        });
      }
      // í…ìŠ¤íŠ¸ ë¸”ë¡
      else if (className.includes('notion-text')) {
        const text = $el.text().trim();
        if (text) {
          blocks.push({
            type: 'text',
            content: text
          });
        }
      }
      // ë¶ˆë¦¿ ë¦¬ìŠ¤íŠ¸
      else if (className.includes('notion-bulleted_list')) {
        blocks.push({
          type: 'bullet',
          content: $el.text().trim()
        });
      }
      // ì½œì•„ì›ƒ
      else if (className.includes('notion-callout')) {
        blocks.push({
          type: 'callout',
          content: $el.text().trim()
        });
      }
    });
    
    return blocks;
  }
  
  // í† ê¸€ í•˜ìœ„ ì½˜í…ì¸  íŒŒì‹±
  private parseToggleChildren($: cheerio.CheerioAPI, $toggle: cheerio.Cheerio<any>): NotionBlock[] {
    const children: NotionBlock[] = [];
    
    $toggle.find('> div:last-child').children().each((_, child) => {
      const $child = $(child);
      const text = $child.text().trim();
      
      if (text) {
        // í•˜ìœ„ í† ê¸€ì¸ ê²½ìš°
        if ($child.attr('class')?.includes('notion-toggle')) {
          children.push({
            type: 'toggle',
            content: $child.find('> div:first-child').text().trim(),
            children: this.parseToggleChildren($, $child)
          });
        } else {
          children.push({
            type: 'text',
            content: text
          });
        }
      }
    });
    
    return children;
  }
  
  // ë¸”ë¡ì—ì„œ ìˆœìˆ˜ í…ìŠ¤íŠ¸ ì¶”ì¶œ
  private extractRawText(blocks: NotionBlock[], indent: number = 0): string {
    let text = '';
    const prefix = '  '.repeat(indent);
    
    for (const block of blocks) {
      if (block.type === 'toggle') {
        text += `${prefix}ğŸ“ ${block.content}\n`;
        if (block.children) {
          text += this.extractRawText(block.children, indent + 1);
        }
      } else if (block.type === 'heading') {
        const headingPrefix = '#'.repeat(block.level || 1);
        text += `\n${headingPrefix} ${block.content}\n\n`;
      } else {
        text += `${prefix}${block.content}\n`;
      }
    }
    
    return text;
  }
  
  // ì—¬ëŸ¬ í˜ì´ì§€ ì¼ê´„ í¬ë¡¤ë§
  async crawlMultiplePages(urls: string[]): Promise<CrawledPage[]> {
    const results: CrawledPage[] = [];
    
    for (const url of urls) {
      try {
        console.log(`[NotionCrawler] Crawling: ${url}`);
        const page = await this.crawlPage(url);
        results.push(page);
        
        // Rate limiting - í˜ì´ì§€ ê°„ 1ì´ˆ ëŒ€ê¸°
        await new Promise(resolve => setTimeout(resolve, 1000));
      } catch (error) {
        console.error(`[NotionCrawler] Failed to crawl ${url}:`, error);
      }
    }
    
    return results;
  }
}
```

#### 1.3 í¬ë¡¤ë§ API ì—”ë“œí¬ì¸íŠ¸

```typescript
// backend/src/routes/crawl.ts
import { Router } from 'express';
import { NotionCrawler } from '../services/notionCrawler';

const router = Router();

// ë‹¨ì¼ í˜ì´ì§€ í¬ë¡¤ë§
router.post('/notion/page', async (req, res) => {
  const { url } = req.body;
  
  if (!url || !url.includes('notion.site')) {
    return res.status(400).json({ error: 'Invalid Notion URL' });
  }
  
  const crawler = new NotionCrawler();
  
  try {
    await crawler.init();
    const result = await crawler.crawlPage(url);
    res.json(result);
  } catch (error) {
    res.status(500).json({ error: 'Failed to crawl page' });
  } finally {
    await crawler.close();
  }
});

// ì—¬ëŸ¬ í˜ì´ì§€ ì¼ê´„ í¬ë¡¤ë§
router.post('/notion/pages', async (req, res) => {
  const { urls } = req.body;
  
  if (!Array.isArray(urls) || urls.length === 0) {
    return res.status(400).json({ error: 'URLs array required' });
  }
  
  const crawler = new NotionCrawler();
  
  try {
    await crawler.init();
    const results = await crawler.crawlMultiplePages(urls);
    res.json({ 
      success: true, 
      count: results.length, 
      pages: results 
    });
  } catch (error) {
    res.status(500).json({ error: 'Failed to crawl pages' });
  } finally {
    await crawler.close();
  }
});

export default router;
```

---

### 2ë‹¨ê³„: í¬ë¡¤ë§ëœ ì½˜í…ì¸  êµ¬ì¡°í™”

#### 2.1 ì½˜í…ì¸  êµ¬ì¡° ë¶„ì„

í˜„ì¬ í™•ì¸ëœ **ì‘ê°€ ê³µì§€ (23.04.11)** í˜ì´ì§€ êµ¬ì¡°:

```
ì‘ê°€ ê³µì§€ (23.04.11)
â”œâ”€â”€ ğŸ“ íŒë§¤ ì‹œì‘
â”‚   â”œâ”€â”€ ê¸€ë¡œë²Œ íŒë§¤ë¥¼ ìœ„í•œ ê³„ì • ì„¤ì •
â”‚   â”œâ”€â”€ ê¸€ë¡œë²Œ ì‘í’ˆ ë“±ë¡
â”‚   â”œâ”€â”€ íŒë§¤ êµ­ê°€ (ì´ 45ê°œêµ­)
â”‚   â”œâ”€â”€ íŒë§¤ ì¹´í…Œê³ ë¦¬
â”‚   â””â”€â”€ íŒë§¤ ë¶ˆê°€ ìƒí’ˆ
â”œâ”€â”€ ğŸ“ ê°€ê²© / ìˆ˜ìˆ˜ë£Œ / ì •ì‚°
â”‚   â””â”€â”€ (í•˜ìœ„ í•­ëª©ë“¤)
â”œâ”€â”€ ğŸ“ ë§ˆì¼€íŒ…
â”‚   â””â”€â”€ (í•˜ìœ„ í•­ëª©ë“¤)
â””â”€â”€ ğŸ“ ì£¼ë¬¸ ì²˜ë¦¬/ë°°ì†¡/ì·¨ì†ŒÂ·í™˜ë¶ˆ
    â””â”€â”€ (í•˜ìœ„ í•­ëª©ë“¤)
```

#### 2.2 ì˜¨ë³´ë”©ìš© ì¹´í…Œê³ ë¦¬ ë§¤í•‘

```typescript
// backend/src/services/contentOrganizer.ts
interface OnboardingCategory {
  id: string;
  title: string;
  icon: string;
  description: string;
  order: number;
  targetWeek: 'day1' | 'week1' | 'week2' | 'month1';
  priority: 'essential' | 'important' | 'optional';
}

export const ONBOARDING_CATEGORIES: OnboardingCategory[] = [
  {
    id: 'sales-start',
    title: 'íŒë§¤ ì‹œì‘',
    icon: 'ğŸš€',
    description: 'ê¸€ë¡œë²Œ íŒë§¤ë¥¼ ì‹œì‘í•˜ê¸° ìœ„í•œ ê¸°ë³¸ ì„¤ì • ë°©ë²•',
    order: 1,
    targetWeek: 'day1',
    priority: 'essential'
  },
  {
    id: 'pricing',
    title: 'ê°€ê²© / ìˆ˜ìˆ˜ë£Œ / ì •ì‚°',
    icon: 'ğŸ’°',
    description: 'ê°€ê²© ì •ì±…, ìˆ˜ìˆ˜ë£Œ ì²´ê³„, ì •ì‚° í”„ë¡œì„¸ìŠ¤ ì•ˆë‚´',
    order: 2,
    targetWeek: 'week1',
    priority: 'essential'
  },
  {
    id: 'marketing',
    title: 'ë§ˆì¼€íŒ…',
    icon: 'ğŸ“¢',
    description: 'ê¸€ë¡œë²Œ ë§ˆì¼€íŒ… ì „ëµ ë° í”„ë¡œëª¨ì…˜ ì°¸ì—¬ ë°©ë²•',
    order: 3,
    targetWeek: 'week2',
    priority: 'important'
  },
  {
    id: 'order-shipping',
    title: 'ì£¼ë¬¸ ì²˜ë¦¬/ë°°ì†¡/ì·¨ì†ŒÂ·í™˜ë¶ˆ',
    icon: 'ğŸšš',
    description: 'ì£¼ë¬¸ ì²˜ë¦¬ë¶€í„° ë°°ì†¡, CS ëŒ€ì‘ê¹Œì§€ ì „ì²´ í”„ë¡œì„¸ìŠ¤',
    order: 4,
    targetWeek: 'week1',
    priority: 'essential'
  }
];

export class ContentOrganizer {
  
  // í¬ë¡¤ë§ëœ ì½˜í…ì¸ ë¥¼ ì˜¨ë³´ë”© êµ¬ì¡°ë¡œ ë³€í™˜
  organizeForOnboarding(crawledPages: CrawledPage[]): OrganizedContent {
    const organized: OrganizedContent = {
      title: 'ê¸€ë¡œë²Œ ë¹„ì¦ˆë‹ˆìŠ¤íŒ€ ì˜¨ë³´ë”© ê°€ì´ë“œ',
      sections: [],
      metadata: {
        sourcePages: crawledPages.map(p => p.url),
        generatedAt: new Date().toISOString()
      }
    };
    
    // ê° í˜ì´ì§€ì˜ ë¸”ë¡ì„ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ë¶„ë¥˜
    for (const page of crawledPages) {
      for (const block of page.blocks) {
        if (block.type === 'toggle') {
          const category = this.matchCategory(block.content);
          
          if (category) {
            organized.sections.push({
              category,
              title: block.content,
              content: block.children || [],
              sourceUrl: page.url
            });
          }
        }
      }
    }
    
    // ìˆœì„œëŒ€ë¡œ ì •ë ¬
    organized.sections.sort((a, b) => a.category.order - b.category.order);
    
    return organized;
  }
  
  // í† ê¸€ ì œëª©ê³¼ ì¹´í…Œê³ ë¦¬ ë§¤ì¹­
  private matchCategory(title: string): OnboardingCategory | null {
    const titleLower = title.toLowerCase();
    
    for (const category of ONBOARDING_CATEGORIES) {
      const keywords = category.title.split(/[\/\s]/).filter(k => k.length > 1);
      
      if (keywords.some(k => titleLower.includes(k.toLowerCase()))) {
        return category;
      }
    }
    
    return null;
  }
}
```

---

### 3ë‹¨ê³„: AI ê¸°ë°˜ ì½˜í…ì¸  ìš”ì•½ ë° ì •ë¦¬

#### 3.1 LLM ìš”ì•½ ì„œë¹„ìŠ¤

```typescript
// backend/src/services/contentSummarizer.ts
import OpenAI from 'openai';

export class ContentSummarizer {
  private openai: OpenAI;
  
  constructor() {
    this.openai = new OpenAI({
      apiKey: process.env.OPENAI_API_KEY
    });
  }
  
  // ì„¹ì…˜ë³„ ìš”ì•½ ìƒì„±
  async summarizeSection(content: string, category: string): Promise<SectionSummary> {
    const prompt = `
ë‹¹ì‹ ì€ ê¸€ë¡œë²Œ ë¹„ì¦ˆë‹ˆìŠ¤íŒ€ì˜ ì‹ ê·œ ì…ì‚¬ì ì˜¨ë³´ë”© ê°€ì´ë“œë¥¼ ì‘ì„±í•˜ëŠ” ì „ë¬¸ê°€ì…ë‹ˆë‹¤.

ë‹¤ìŒ "${category}" ê´€ë ¨ ë‚´ìš©ì„ ì‹ ê·œ ì…ì‚¬ìê°€ ì´í•´í•˜ê¸° ì‰½ê²Œ ì •ë¦¬í•´ì£¼ì„¸ìš”.

ì›ë³¸ ë‚´ìš©:
${content}

ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”:
1. í•œ ì¤„ ìš”ì•½ (50ì ì´ë‚´)
2. í•µì‹¬ í¬ì¸íŠ¸ (3-5ê°œ ë¶ˆë¦¿)
3. ì‹ ê·œ ì…ì‚¬ì ì²´í¬ë¦¬ìŠ¤íŠ¸ (í•„ìˆ˜ í™•ì¸ ì‚¬í•­)
4. ê´€ë ¨ FAQ (ì˜ˆìƒ ì§ˆë¬¸ 2-3ê°œ)

JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µ:
{
  "summary": "í•œ ì¤„ ìš”ì•½",
  "keyPoints": ["í¬ì¸íŠ¸1", "í¬ì¸íŠ¸2", ...],
  "checklist": ["ì²´í¬1", "ì²´í¬2", ...],
  "faq": [
    {"question": "ì§ˆë¬¸", "answer": "ë‹µë³€"},
    ...
  ]
}
`;

    const response = await this.openai.chat.completions.create({
      model: 'gpt-4-turbo-preview',
      messages: [{ role: 'user', content: prompt }],
      response_format: { type: 'json_object' }
    });
    
    return JSON.parse(response.choices[0].message.content || '{}');
  }
  
  // ì „ì²´ ì˜¨ë³´ë”© ê°€ì´ë“œ ìƒì„±
  async generateOnboardingGuide(organizedContent: OrganizedContent): Promise<OnboardingGuide> {
    const sections: OnboardingSection[] = [];
    
    for (const section of organizedContent.sections) {
      const contentText = this.blocksToText(section.content);
      const summary = await this.summarizeSection(contentText, section.category.title);
      
      sections.push({
        id: section.category.id,
        title: section.title,
        icon: section.category.icon,
        description: section.category.description,
        targetWeek: section.category.targetWeek,
        priority: section.category.priority,
        summary: summary.summary,
        keyPoints: summary.keyPoints,
        checklist: summary.checklist,
        faq: summary.faq,
        sourceUrl: section.sourceUrl,
        originalContent: contentText
      });
    }
    
    return {
      title: organizedContent.title,
      sections,
      timeline: this.generateTimeline(sections),
      generatedAt: new Date().toISOString()
    };
  }
  
  // íƒ€ì„ë¼ì¸ ìƒì„±
  private generateTimeline(sections: OnboardingSection[]): TimelineItem[] {
    const timeline: TimelineItem[] = [
      { period: 'day1', label: 'ì²«ì§¸ ë‚ ', sections: [] },
      { period: 'week1', label: 'ì²«ì§¸ ì£¼', sections: [] },
      { period: 'week2', label: 'ë‘˜ì§¸ ì£¼', sections: [] },
      { period: 'month1', label: 'ì²« ë‹¬', sections: [] }
    ];
    
    for (const section of sections) {
      const timelineItem = timeline.find(t => t.period === section.targetWeek);
      if (timelineItem) {
        timelineItem.sections.push(section.id);
      }
    }
    
    return timeline;
  }
  
  private blocksToText(blocks: NotionBlock[]): string {
    return blocks.map(b => b.content).join('\n');
  }
}
```

---

### 4ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ ì˜¨ë³´ë”© í˜ì´ì§€ êµ¬í˜„

#### 4.1 ì˜¨ë³´ë”© í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸

```tsx
// frontend/app/onboarding/page.tsx
'use client';

import { useState, useEffect } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Progress } from '@/components/ui/progress';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';
import { CheckCircle2, Circle, ExternalLink, Clock, BookOpen } from 'lucide-react';

interface OnboardingSection {
  id: string;
  title: string;
  icon: string;
  description: string;
  targetWeek: string;
  priority: 'essential' | 'important' | 'optional';
  summary: string;
  keyPoints: string[];
  checklist: string[];
  faq: { question: string; answer: string }[];
  sourceUrl: string;
}

interface OnboardingGuide {
  title: string;
  sections: OnboardingSection[];
  timeline: { period: string; label: string; sections: string[] }[];
}

export default function OnboardingPage() {
  const [guide, setGuide] = useState<OnboardingGuide | null>(null);
  const [completedItems, setCompletedItems] = useState<Set<string>>(new Set());
  const [loading, setLoading] = useState(true);
  
  useEffect(() => {
    fetchOnboardingGuide();
    loadProgress();
  }, []);
  
  const fetchOnboardingGuide = async () => {
    try {
      const response = await fetch('/api/onboarding/guide');
      const data = await response.json();
      setGuide(data);
    } catch (error) {
      console.error('Failed to fetch guide:', error);
    } finally {
      setLoading(false);
    }
  };
  
  const loadProgress = () => {
    const saved = localStorage.getItem('onboarding_progress');
    if (saved) {
      setCompletedItems(new Set(JSON.parse(saved)));
    }
  };
  
  const toggleComplete = (itemId: string) => {
    const newCompleted = new Set(completedItems);
    if (newCompleted.has(itemId)) {
      newCompleted.delete(itemId);
    } else {
      newCompleted.add(itemId);
    }
    setCompletedItems(newCompleted);
    localStorage.setItem('onboarding_progress', JSON.stringify([...newCompleted]));
  };
  
  const calculateProgress = () => {
    if (!guide) return 0;
    const totalItems = guide.sections.reduce((acc, s) => acc + s.checklist.length, 0);
    return Math.round((completedItems.size / totalItems) * 100);
  };
  
  const priorityColors = {
    essential: 'bg-red-500/20 text-red-400 border-red-500/30',
    important: 'bg-yellow-500/20 text-yellow-400 border-yellow-500/30',
    optional: 'bg-blue-500/20 text-blue-400 border-blue-500/30'
  };
  
  const priorityLabels = {
    essential: 'í•„ìˆ˜',
    important: 'ì¤‘ìš”',
    optional: 'ì„ íƒ'
  };
  
  if (loading) {
    return (
      <div className="min-h-screen bg-slate-900 flex items-center justify-center">
        <div className="text-white">ë¡œë”© ì¤‘...</div>
      </div>
    );
  }
  
  if (!guide) {
    return (
      <div className="min-h-screen bg-slate-900 flex items-center justify-center">
        <div className="text-white">ê°€ì´ë“œë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>
      </div>
    );
  }
  
  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950">
      <div className="container mx-auto px-4 py-8 max-w-6xl">
        {/* í—¤ë” */}
        <header className="mb-10">
          <h1 className="text-4xl font-bold text-white mb-3 flex items-center gap-3">
            <span className="text-5xl">ğŸŒ</span>
            {guide.title}
          </h1>
          <p className="text-slate-400 text-lg mb-6">
            ê¸€ë¡œë²Œ ë¹„ì¦ˆë‹ˆìŠ¤íŒ€ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤! ì•„ë˜ ê°€ì´ë“œë¥¼ ë”°ë¼ ì—…ë¬´ë¥¼ ìµí˜€ë³´ì„¸ìš”.
          </p>
          
          {/* ì§„í–‰ë¥  ì¹´ë“œ */}
          <Card className="bg-slate-800/50 border-slate-700">
            <CardContent className="p-6">
              <div className="flex justify-between items-center mb-3">
                <div className="flex items-center gap-2">
                  <BookOpen className="w-5 h-5 text-emerald-400" />
                  <span className="text-slate-300 font-medium">ì˜¨ë³´ë”© ì§„í–‰ë¥ </span>
                </div>
                <span className="text-2xl font-bold text-emerald-400">{calculateProgress()}%</span>
              </div>
              <Progress value={calculateProgress()} className="h-3 bg-slate-700" />
              <p className="text-slate-500 text-sm mt-2">
                {completedItems.size}ê°œ í•­ëª© ì™„ë£Œ / ì´ {guide.sections.reduce((acc, s) => acc + s.checklist.length, 0)}ê°œ
              </p>
            </CardContent>
          </Card>
        </header>
        
        {/* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */}
        <Tabs defaultValue="timeline" className="space-y-6">
          <TabsList className="bg-slate-800/50 border border-slate-700 p-1">
            <TabsTrigger value="timeline" className="data-[state=active]:bg-emerald-500/20">
              ğŸ“… íƒ€ì„ë¼ì¸
            </TabsTrigger>
            <TabsTrigger value="categories" className="data-[state=active]:bg-emerald-500/20">
              ğŸ“ ì¹´í…Œê³ ë¦¬
            </TabsTrigger>
            <TabsTrigger value="checklist" className="data-[state=active]:bg-emerald-500/20">
              âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸
            </TabsTrigger>
          </TabsList>
          
          {/* íƒ€ì„ë¼ì¸ ë·° */}
          <TabsContent value="timeline" className="space-y-6">
            {guide.timeline.map((period) => (
              <div key={period.period} className="relative">
                <div className="flex items-center gap-3 mb-4">
                  <div className="w-10 h-10 rounded-full bg-emerald-500/20 flex items-center justify-center">
                    <Clock className="w-5 h-5 text-emerald-400" />
                  </div>
                  <h2 className="text-xl font-bold text-white">{period.label}</h2>
                </div>
                
                <div className="ml-5 pl-8 border-l-2 border-slate-700 space-y-4">
                  {guide.sections
                    .filter(s => s.targetWeek === period.period)
                    .map(section => (
                      <SectionCard 
                        key={section.id}
                        section={section}
                        completedItems={completedItems}
                        onToggle={toggleComplete}
                        priorityColors={priorityColors}
                        priorityLabels={priorityLabels}
                      />
                    ))}
                </div>
              </div>
            ))}
          </TabsContent>
          
          {/* ì¹´í…Œê³ ë¦¬ ë·° */}
          <TabsContent value="categories" className="space-y-4">
            {guide.sections.map(section => (
              <SectionCard 
                key={section.id}
                section={section}
                completedItems={completedItems}
                onToggle={toggleComplete}
                priorityColors={priorityColors}
                priorityLabels={priorityLabels}
                expanded
              />
            ))}
          </TabsContent>
          
          {/* ì²´í¬ë¦¬ìŠ¤íŠ¸ ë·° */}
          <TabsContent value="checklist">
            <Card className="bg-slate-800/50 border-slate-700">
              <CardHeader>
                <CardTitle className="text-white">ì „ì²´ ì²´í¬ë¦¬ìŠ¤íŠ¸</CardTitle>
              </CardHeader>
              <CardContent className="space-y-6">
                {guide.sections.map(section => (
                  <div key={section.id}>
                    <h3 className="text-lg font-semibold text-white mb-3 flex items-center gap-2">
                      <span>{section.icon}</span>
                      {section.title}
                    </h3>
                    <div className="space-y-2 ml-6">
                      {section.checklist.map((item, idx) => {
                        const itemId = `${section.id}-${idx}`;
                        const isCompleted = completedItems.has(itemId);
                        
                        return (
                          <button
                            key={idx}
                            onClick={() => toggleComplete(itemId)}
                            className={`w-full flex items-center gap-3 p-3 rounded-lg transition-all ${
                              isCompleted 
                                ? 'bg-emerald-500/10 text-emerald-400' 
                                : 'bg-slate-700/50 text-slate-300 hover:bg-slate-700'
                            }`}
                          >
                            {isCompleted ? (
                              <CheckCircle2 className="w-5 h-5 text-emerald-400" />
                            ) : (
                              <Circle className="w-5 h-5 text-slate-500" />
                            )}
                            <span className={isCompleted ? 'line-through' : ''}>{item}</span>
                          </button>
                        );
                      })}
                    </div>
                  </div>
                ))}
              </CardContent>
            </Card>
          </TabsContent>
        </Tabs>
      </div>
    </div>
  );
}

// ì„¹ì…˜ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
function SectionCard({ 
  section, 
  completedItems, 
  onToggle, 
  priorityColors, 
  priorityLabels,
  expanded = false 
}: {
  section: OnboardingSection;
  completedItems: Set<string>;
  onToggle: (id: string) => void;
  priorityColors: Record<string, string>;
  priorityLabels: Record<string, string>;
  expanded?: boolean;
}) {
  const sectionProgress = section.checklist.filter((_, idx) => 
    completedItems.has(`${section.id}-${idx}`)
  ).length;
  
  return (
    <Card className="bg-slate-800/50 border-slate-700 hover:border-slate-600 transition-all">
      <CardHeader>
        <div className="flex justify-between items-start">
          <div className="flex items-center gap-3">
            <span className="text-3xl">{section.icon}</span>
            <div>
              <CardTitle className="text-white text-xl">{section.title}</CardTitle>
              <p className="text-slate-400 text-sm mt-1">{section.description}</p>
            </div>
          </div>
          <Badge className={priorityColors[section.priority]}>
            {priorityLabels[section.priority]}
          </Badge>
        </div>
      </CardHeader>
      
      <CardContent className="space-y-4">
        {/* ìš”ì•½ */}
        <div className="bg-slate-700/30 p-4 rounded-lg">
          <p className="text-slate-300">{section.summary}</p>
        </div>
        
        {/* í•µì‹¬ í¬ì¸íŠ¸ */}
        <div>
          <h4 className="text-sm font-semibold text-slate-400 mb-2">í•µì‹¬ í¬ì¸íŠ¸</h4>
          <ul className="space-y-1">
            {section.keyPoints.map((point, idx) => (
              <li key={idx} className="text-slate-300 flex items-start gap-2">
                <span className="text-emerald-400 mt-1">â€¢</span>
                {point}
              </li>
            ))}
          </ul>
        </div>
        
        {/* ì§„í–‰ë¥  */}
        <div className="flex items-center gap-3">
          <Progress 
            value={(sectionProgress / section.checklist.length) * 100} 
            className="h-2 flex-1 bg-slate-700"
          />
          <span className="text-sm text-slate-400">
            {sectionProgress}/{section.checklist.length}
          </span>
        </div>
        
        {/* FAQ ì•„ì½”ë””ì–¸ */}
        {section.faq.length > 0 && (
          <Accordion type="single" collapsible className="w-full">
            <AccordionItem value="faq" className="border-slate-700">
              <AccordionTrigger className="text-slate-300 hover:text-white">
                ğŸ’¬ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ ({section.faq.length})
              </AccordionTrigger>
              <AccordionContent className="space-y-3">
                {section.faq.map((item, idx) => (
                  <div key={idx} className="bg-slate-700/30 p-3 rounded-lg">
                    <p className="text-white font-medium mb-1">Q. {item.question}</p>
                    <p className="text-slate-400 text-sm">A. {item.answer}</p>
                  </div>
                ))}
              </AccordionContent>
            </AccordionItem>
          </Accordion>
        )}
        
        {/* ì›ë³¸ ë§í¬ */}
        <a 
          href={section.sourceUrl}
          target="_blank"
          rel="noopener noreferrer"
          className="inline-flex items-center gap-2 text-emerald-400 hover:text-emerald-300 text-sm"
        >
          <ExternalLink className="w-4 h-4" />
          ë…¸ì…˜ì—ì„œ ì›ë³¸ ë³´ê¸°
        </a>
      </CardContent>
    </Card>
  );
}
```

---

## ğŸ”§ ì‹¤í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: í™˜ê²½ ì„¤ì • (30ë¶„)

- [ ] Puppeteer, Cheerio íŒ¨í‚¤ì§€ ì„¤ì¹˜
- [ ] í¬ë¡¤ë§ ì„œë¹„ìŠ¤ íŒŒì¼ ìƒì„±
- [ ] í¬ë¡¤ë§ API ë¼ìš°íŠ¸ ì¶”ê°€

### Phase 2: í¬ë¡¤ë§ í…ŒìŠ¤íŠ¸ (1ì‹œê°„)

- [ ] ë‹¨ì¼ í˜ì´ì§€ í¬ë¡¤ë§ í…ŒìŠ¤íŠ¸
- [ ] í† ê¸€ í¼ì¹˜ê¸° ê¸°ëŠ¥ í™•ì¸
- [ ] ì½˜í…ì¸  ì¶”ì¶œ ê²€ì¦

### Phase 3: ì½˜í…ì¸  êµ¬ì¡°í™” (2ì‹œê°„)

- [ ] ì¹´í…Œê³ ë¦¬ ë§¤í•‘ ë¡œì§ êµ¬í˜„
- [ ] AI ìš”ì•½ ì„œë¹„ìŠ¤ êµ¬í˜„ (ì„ íƒ)
- [ ] ì˜¨ë³´ë”© ê°€ì´ë“œ JSON ìƒì„±

### Phase 4: í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ (3ì‹œê°„)

- [ ] ì˜¨ë³´ë”© í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
- [ ] ì§„í–‰ë¥  ì¶”ì  ê¸°ëŠ¥ êµ¬í˜„
- [ ] ë°˜ì‘í˜• ë””ìì¸ ì ìš©

### Phase 5: í†µí•© í…ŒìŠ¤íŠ¸ (1ì‹œê°„)

- [ ] ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
- [ ] ì—ëŸ¬ ì²˜ë¦¬ í™•ì¸
- [ ] ë°°í¬

---

## ğŸ“ í¬ë¡¤ë§ ëŒ€ìƒ ë…¸ì…˜ í˜ì´ì§€ ëª©ë¡

í˜„ì¬ í™•ì¸ëœ í˜ì´ì§€:

| í˜ì´ì§€ëª… | URL | ìƒíƒœ |
|---------|-----|------|
| ì‘ê°€ ê³µì§€ (23.04.11) | https://idus.notion.site/23-04-11-79538fb8130c45fa818a28148335a362 | âœ… í™•ì¸ë¨ |

**ì¶”ê°€ë¡œ í¬ë¡¤ë§í•  í˜ì´ì§€ URLì„ ì•Œë ¤ì£¼ì‹œë©´ ëª©ë¡ì— ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤.**

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **Rate Limiting**: ë…¸ì…˜ ì„œë²„ì— ê³¼ë„í•œ ìš”ì²­ì„ ë³´ë‚´ì§€ ì•Šë„ë¡ í˜ì´ì§€ ê°„ 1ì´ˆ ëŒ€ê¸°
2. **ë™ì  ì½˜í…ì¸ **: í† ê¸€ì´ ë§ì€ í˜ì´ì§€ëŠ” ëª¨ë‘ í¼ì¹˜ëŠ” ë° ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŒ
3. **êµ¬ì¡° ë³€ê²½**: ë…¸ì…˜ í˜ì´ì§€ êµ¬ì¡°ê°€ ë³€ê²½ë˜ë©´ íŒŒì‹± ë¡œì§ ìˆ˜ì • í•„ìš”
4. **ê³µê°œ í˜ì´ì§€ë§Œ**: ë¹„ê³µê°œ í˜ì´ì§€ëŠ” í¬ë¡¤ë§ ë¶ˆê°€ (API í•„ìš”)

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

ì´ ê°€ì´ë“œë¥¼ ë°”íƒ•ìœ¼ë¡œ ë°”ë¡œ êµ¬í˜„ì„ ì‹œì‘í•˜ì‹œë ¤ë©´:

1. **ì¶”ê°€ ë…¸ì…˜ í˜ì´ì§€ URL ì œê³µ**: ì˜¨ë³´ë”©ì— í¬í•¨í•  ë‹¤ë¥¸ í˜ì´ì§€ë“¤
2. **ì¹´í…Œê³ ë¦¬ ì»¤ìŠ¤í„°ë§ˆì´ì§•**: ì›í•˜ëŠ” ë¶„ë¥˜ ì²´ê³„ê°€ ìˆë‹¤ë©´ ì•Œë ¤ì£¼ì„¸ìš”
3. **ë””ìì¸ ì°¸ê³ **: íŠ¹ì • UI ìŠ¤íƒ€ì¼ ì„ í˜¸ê°€ ìˆë‹¤ë©´ ì°¸ê³ ìë£Œ ê³µìœ 

ë°”ë¡œ êµ¬í˜„ì„ ì‹œì‘í•´ë“œë¦´ê¹Œìš”? ğŸ¯

