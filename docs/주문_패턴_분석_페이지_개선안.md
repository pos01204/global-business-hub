# ğŸ“Š ì£¼ë¬¸ íŒ¨í„´ ë¶„ì„ í˜ì´ì§€ ê°œì„ ì•ˆ

> **ë¬¸ì„œ ë²„ì „**: 1.0  
> **ì‘ì„±ì¼**: 2024-12-18  
> **ëª©ì **: ì£¼ë¬¸ íŒ¨í„´ ë¶„ì„ í˜ì´ì§€ì˜ ì™„ì„±ë„ë¥¼ íƒ€ ë¶„ì„ í˜ì´ì§€(ì¿ í° ë¶„ì„, ë¦¬ë·° ë¶„ì„) ìˆ˜ì¤€ìœ¼ë¡œ í–¥ìƒ
> **ì°¸ì¡° ë¬¸ì„œ**: `ë°ì´í„°_ê·œì¹™_ê°€ì´ë“œ.md`, `êµ¬í˜„_ì‘ì—…_ëª…ì„¸ì„œ.md`

---

## ğŸ“‹ ëª©ì°¨

1. [í˜„ì¬ ìƒíƒœ ì§„ë‹¨ (As-Is)](#1-í˜„ì¬-ìƒíƒœ-ì§„ë‹¨-as-is)
2. [ê°œì„  ëª©í‘œ (To-Be)](#2-ê°œì„ -ëª©í‘œ-to-be)
3. [í˜ì´ì§€ êµ¬ì¡° ì¬ì„¤ê³„](#3-í˜ì´ì§€-êµ¬ì¡°-ì¬ì„¤ê³„)
4. [KPI ë° ì§€í‘œ í™•ì¥](#4-kpi-ë°-ì§€í‘œ-í™•ì¥)
5. [ë¶„ì„ ì°¨ì› ë‹¤ê°í™”](#5-ë¶„ì„-ì°¨ì›-ë‹¤ê°í™”)
6. [ì‹œê°í™” ê³ ë„í™”](#6-ì‹œê°í™”-ê³ ë„í™”)
7. [ì¸ì‚¬ì´íŠ¸ ìë™í™”](#7-ì¸ì‚¬ì´íŠ¸-ìë™í™”)
8. [ë°ì´í„° ì†ŒìŠ¤ ë° ê°€ê³µ ë¡œì§](#8-ë°ì´í„°-ì†ŒìŠ¤-ë°-ê°€ê³µ-ë¡œì§)
9. [API ì„¤ê³„](#9-api-ì„¤ê³„)
10. [êµ¬í˜„ ìš°ì„ ìˆœìœ„](#10-êµ¬í˜„-ìš°ì„ ìˆœìœ„)

---

## 1. í˜„ì¬ ìƒíƒœ ì§„ë‹¨ (As-Is)

### 1.1 í˜„ì¬ í˜ì´ì§€ êµ¬ì„±

| êµ¬ì„± ìš”ì†Œ | í˜„ì¬ ìƒíƒœ | ë¬¸ì œì  |
|----------|---------|--------|
| **í—¤ë”** | ë‹¨ìˆœ ì•„ì´ì½˜ + ì œëª© | ì»¨í…ìŠ¤íŠ¸ ë¶€ì¡±, ì£¼ìš” ì§€í‘œ ë¯¸ë…¸ì¶œ |
| **ê¸°ê°„ ì„ íƒ** | 30ì¼/90ì¼/180ì¼/1ë…„ ë²„íŠ¼ | ì»¤ìŠ¤í…€ ë‚ ì§œ ì„ íƒ ë¶ˆê°€ |
| **KPI ì¹´ë“œ** | 4ê°œ (ì´ ì£¼ë¬¸, GMV, í”¼í¬ ìš”ì¼, í‰ê·  ì£¼ë¬¸ì•¡) | ë³€í™”ìœ¨ ë¯¸í‘œì‹œ, ì§€í‘œ ë‹¤ì–‘ì„± ë¶€ì¡± |
| **ìš”ì¼ë³„ íŒ¨í„´** | ë‹¨ì¼ ë°” ì°¨íŠ¸ (ì£¼ë¬¸ ìˆ˜ë§Œ) | GMV ë™ì‹œ ë¹„êµ ë¶ˆê°€ |
| **êµ­ê°€ë³„ ë¹„êµ** | ìš”ì¼ë³„ JP/EN ë¹„êµ | ë‹¨ìˆœ ë¹„êµë§Œ, ì‹¬ì¸µ ë¶„ì„ ë¶€ì¬ |
| **ì›”ë³„ íŠ¸ë Œë“œ** | ë¼ì¸ ì°¨íŠ¸ (GMVë§Œ) | â‚©0 í‘œì‹œ ì˜¤ë¥˜, ì£¼ë¬¸ ìˆ˜ ë¯¸í‘œì‹œ |
| **ì¸ì‚¬ì´íŠ¸** | 3ì¤„ í…ìŠ¤íŠ¸ | ê¸°ì´ˆì , ì•¡ì…˜ ì—°ê²° ë¶€ì¬ |

### 1.2 íƒ€ ë¶„ì„ í˜ì´ì§€ ëŒ€ë¹„ ë¶€ì¡± ìš”ì†Œ

```
ì¿ í° ë¶„ì„ í˜ì´ì§€ âœ…        ë¦¬ë·° ë¶„ì„ í˜ì´ì§€ âœ…        ì£¼ë¬¸ íŒ¨í„´ í˜ì´ì§€ âŒ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ 4ê°œ íƒ­ ë„¤ë¹„ê²Œì´ì…˜       âœ“ 4ê°œ íƒ­ ë„¤ë¹„ê²Œì´ì…˜       âœ— íƒ­ ì—†ìŒ
âœ“ ì „ê¸°ê°„ ëŒ€ë¹„ ë³€í™”ìœ¨      âœ“ ì „ê¸°ê°„ ëŒ€ë¹„ NPS ë³€í™”    âœ— ë³€í™”ìœ¨ ë¯¸í‘œì‹œ
âœ“ TOP ì„±ê³¼ ì¿ í°          âœ“ TOP ì‘ê°€ í…Œì´ë¸”         âœ— ë­í‚¹/í•˜ì´ë¼ì´íŠ¸ ì—†ìŒ
âœ“ ì‹¤íŒ¨ ê²½ê³  ì•Œë¦¼         âœ“ NPS ê²Œì´ì§€             âœ— ìœ„í—˜ ì‹ í˜¸ ì—†ìŒ
âœ“ ìœ í˜•ë³„ ë¹„êµ (ë„ë„›)      âœ“ í‰ì  ë¶„í¬ ì°¨íŠ¸         âœ— ë‹¤ì–‘í•œ ë¶„ë¥˜ ë¶€ì¬
âœ“ ìƒì„¸ ì¸ì‚¬ì´íŠ¸ ì¹´ë“œ      âœ“ ì¸ì‚¬ì´íŠ¸ ì¹´ë“œ           âœ— ë‹¨ìˆœ í…ìŠ¤íŠ¸ ì¸ì‚¬ì´íŠ¸
```

---

## 2. ê°œì„  ëª©í‘œ (To-Be)

### 2.1 í•µì‹¬ ê°œì„  ë°©í–¥

1. **ë¶„ì„ ë‹¤ì–‘ì„± í™•ëŒ€**: ë‹¨ìˆœ í˜„í™© â†’ ë‹¤ì°¨ì› íŒ¨í„´ ë¶„ì„
2. **ë¹„êµ ë¶„ì„ ê°•í™”**: ì „ê¸°ê°„ ëŒ€ë¹„, ì „ë…„ ë™ê¸° ëŒ€ë¹„, ì„¸ê·¸ë¨¼íŠ¸ë³„ ë¹„êµ
3. **ì¸ì‚¬ì´íŠ¸ ìë™í™”**: ë°ì´í„° ê¸°ë°˜ ì•¡ì…˜ ê¶Œì¥ ì‚¬í•­ ë„ì¶œ
4. **ì˜ˆì¸¡ ê¸°ëŠ¥ ë„ì…**: í–¥í›„ íŠ¸ë Œë“œ ì˜ˆì¸¡ (Phase 5 ì—°ê³„)
5. **ì‹œê°í™” ê³ ë„í™”**: íˆíŠ¸ë§µ, ë³µí•© ì°¨íŠ¸, ê²Œì´ì§€ ë“± ë‹¤ì–‘í•œ ì‹œê°í™”

### 2.2 ì™„ì„± í›„ ì˜ˆìƒ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š ì£¼ë¬¸ íŒ¨í„´ ë¶„ì„                                                 â”‚
â”‚    ìš”ì¼ë³„, ì›”ë³„, êµ­ê°€ë³„, ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ë³„ ë‹¤ì°¨ì› ì£¼ë¬¸ íŒ¨í„´ ë¶„ì„        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ê°œìš”] [íŠ¸ë Œë“œ] [ë¹„êµ ë¶„ì„] [ê³ ê° ì„¸ê·¸ë¨¼íŠ¸] [ì¸ì‚¬ì´íŠ¸]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ì´ ì£¼ë¬¸ â”‚ â”‚ì´ GMV  â”‚ â”‚ AOV   â”‚ â”‚ì¬êµ¬ë§¤ìœ¨â”‚ â”‚ì„±ì¥ë¥   â”‚          â”‚
â”‚  â”‚ 232ê±´  â”‚ â”‚â‚©31.3M â”‚ â”‚â‚©135K â”‚ â”‚ 42.3% â”‚ â”‚+12.5% â”‚          â”‚
â”‚  â”‚ +8.2%  â”‚ â”‚ +15.3% â”‚ â”‚ +6.5% â”‚ â”‚ -2.1% â”‚ â”‚ vs ì „ì›”â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ“… ìš”ì¼ë³„ íŒ¨í„´ (íˆíŠ¸ë§µ)    â”‚ â”‚ ğŸ“ˆ ì›”ë³„ GMV & ì£¼ë¬¸ íŠ¸ë Œë“œ  â”‚     â”‚
â”‚  â”‚ [ì›”][í™”][ìˆ˜][ëª©][ê¸ˆ][í† ][ì¼]â”‚ â”‚                           â”‚     â”‚
â”‚  â”‚ [ìƒ‰ìƒ ë†ë„ë¡œ ì£¼ë¬¸ëŸ‰ í‘œí˜„]   â”‚ â”‚ [ë³µí•© ë¼ì¸+ë°” ì°¨íŠ¸]        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸŒ êµ­ê°€ë³„ ìƒì„¸ ë¹„êµ        â”‚ â”‚ ğŸ’¡ í•µì‹¬ ì¸ì‚¬ì´íŠ¸           â”‚     â”‚
â”‚  â”‚ â€¢ JP: 65% | í‰ê·  â‚©142K    â”‚ â”‚ â€¢ í™”ìš”ì¼ í”¼í¬ â†’ ë§ˆì¼€íŒ… ì§‘ì¤‘ â”‚     â”‚
â”‚  â”‚ â€¢ EN: 35% | í‰ê·  â‚©128K    â”‚ â”‚ â€¢ 11ì›” ì„±ì¥ë¥  ê¸‰ìƒìŠ¹       â”‚     â”‚
â”‚  â”‚ [ìŠ¤íƒ ë°” ì°¨íŠ¸]             â”‚ â”‚ â€¢ ì¬êµ¬ë§¤ìœ¨ í•˜ë½ â†’ ë¦¬í…ì…˜ í•„ìš”â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. í˜ì´ì§€ êµ¬ì¡° ì¬ì„¤ê³„

### 3.1 íƒ­ ë„¤ë¹„ê²Œì´ì…˜ êµ¬ì¡°

```typescript
const tabs = [
  { id: 'overview', label: 'ê°œìš”', icon: LayoutDashboard },
  { id: 'trend', label: 'íŠ¸ë Œë“œ', icon: TrendingUp },
  { id: 'comparison', label: 'ë¹„êµ ë¶„ì„', icon: BarChart3 },
  { id: 'segment', label: 'ê³ ê° ì„¸ê·¸ë¨¼íŠ¸', icon: Users },
  { id: 'insights', label: 'ì¸ì‚¬ì´íŠ¸', icon: Lightbulb },
]
```

### 3.2 í—¤ë” ì˜ì—­ ê°œì„ 

**í˜„ì¬ (ë‹¨ìˆœ)**
```
ğŸ“Š ì£¼ë¬¸ íŒ¨í„´ ë¶„ì„
   ìš”ì¼ë³„, ì‹œê°„ëŒ€ë³„, êµ­ê°€ë³„ ì£¼ë¬¸ íŒ¨í„´
```

**ê°œì„  (ìƒì„¸ + KPI ë¯¸ë¦¬ë³´ê¸°)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ì•„ì´ì½˜] ì£¼ë¬¸ íŒ¨í„´ ë¶„ì„                              [ğŸ”„ ìƒˆë¡œê³ ì¹¨] â”‚
â”‚          ìš”ì¼ë³„, ì›”ë³„, êµ­ê°€ë³„, ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ë³„ ë‹¤ì°¨ì› ì£¼ë¬¸ íŒ¨í„´ ë¶„ì„ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ë¶„ì„ ê¸°ê°„: 2024.09.18 ~ 2024.12.17 (90ì¼)                         â”‚
â”‚ í•µì‹¬ ìš”ì•½: ì´ 232ê±´ | â‚©31.3M GMV | í”¼í¬ ìš”ì¼: í™”ìš”ì¼ | +12.5% ì„±ì¥ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 ê¸°ê°„ ì„ íƒ UI ê°œì„ 

```typescript
// ê¸°ì¡´: ê³ ì • ë²„íŠ¼ë§Œ
// ê°œì„ : ì»¤ìŠ¤í…€ ë‚ ì§œ ì„ íƒ + í”„ë¦¬ì…‹ + ë¹„êµ ê¸°ê°„ ì„ íƒ

interface DateRangeConfig {
  // í˜„ì¬ ë¶„ì„ ê¸°ê°„
  current: { from: Date; to: Date }
  // ë¹„êµ ê¸°ê°„ (ì „ê¸°ê°„, ì „ë…„ ë™ê¸° ë“±)
  compare?: { from: Date; to: Date; label: string }
  // í”„ë¦¬ì…‹ ì˜µì…˜
  presets: Array<{ label: string; days: number }>
}

const presets = [
  { label: '7ì¼', days: 7 },
  { label: '30ì¼', days: 30 },
  { label: '90ì¼', days: 90 },
  { label: '180ì¼', days: 180 },
  { label: '1ë…„', days: 365 },
  { label: 'YTD', days: 'ytd' },  // Year to Date
]

const compareOptions = [
  { label: 'ë¹„êµ ì•ˆí•¨', value: 'none' },
  { label: 'ì „ ê¸°ê°„', value: 'previous' },
  { label: 'ì „ë…„ ë™ê¸°', value: 'yoy' },
]
```

---

## 4. KPI ë° ì§€í‘œ í™•ì¥

### 4.1 KPI ì¹´ë“œ í™•ì¥ (4ê°œ â†’ 8ê°œ)

| ìˆœì„œ | KPI ëª… | í˜„ì¬ | ê°œì„  | ë°ì´í„° ì†ŒìŠ¤ | ê³µì‹ |
|:----:|--------|:----:|:----:|-------------|------|
| 1 | **ì´ ì£¼ë¬¸** | âœ… | ë³€í™”ìœ¨ ì¶”ê°€ | `order` | `COUNT(DISTINCT order_code)` |
| 2 | **ì´ GMV** | âœ… (ì˜¤ë¥˜) | ìˆ˜ì • + ë³€í™”ìœ¨ | `order.Total GMV` | `SUM(total_gmv) * 1350` |
| 3 | **í‰ê·  ì£¼ë¬¸ì•¡ (AOV)** | âœ… | ë³€í™”ìœ¨ ì¶”ê°€ | ê³„ì‚° | `ì´ GMV / ì´ ì£¼ë¬¸` |
| 4 | **í”¼í¬ ìš”ì¼** | âœ… | ìƒì„¸ ì •ë³´ ì¶”ê°€ | ê³„ì‚° | ì£¼ë¬¸ ìˆ˜ ìµœëŒ€ ìš”ì¼ |
| 5 | **ì¬êµ¬ë§¤ìœ¨** | âŒ ì‹ ê·œ | - | `order` + `users` | `ì¬êµ¬ë§¤ ê³ ê° ìˆ˜ / ì „ì²´ ê³ ê° ìˆ˜` |
| 6 | **ì‹ ê·œ ê³ ê° ë¹„ìœ¨** | âŒ ì‹ ê·œ | - | `order` + `users` | `ì‹ ê·œ ê³ ê° ì£¼ë¬¸ / ì „ì²´ ì£¼ë¬¸` |
| 7 | **ì£¼ë¬¸ ì„±ì¥ë¥ ** | âŒ ì‹ ê·œ | - | ê³„ì‚° | `(í˜„ì¬ - ì´ì „) / ì´ì „ * 100` |
| 8 | **í‰ê·  êµ¬ë§¤ ì£¼ê¸°** | âŒ ì‹ ê·œ | - | `order` | `AVG(ë‹¤ìŒ ì£¼ë¬¸ - ì´ì „ ì£¼ë¬¸)` |

### 4.2 KPI ì¹´ë“œ UI ê°œì„ 

```typescript
interface EnhancedKPICard {
  title: string
  value: string | number
  suffix?: string
  change?: {
    value: number
    label: string  // 'vs ì „ê¸°ê°„', 'vs ì „ë…„ ë™ê¸°'
  }
  trend?: 'up' | 'down' | 'stable'
  icon: LucideIcon
  color: string
  tooltip?: string
  sparkline?: number[]  // ìµœê·¼ 7ì¼ ë¯¸ë‹ˆ íŠ¸ë Œë“œ
}
```

**KPI ì¹´ë“œ ì˜ˆì‹œ:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ“¦]                        â”‚
â”‚                             â”‚
â”‚ ì´ ì£¼ë¬¸                     â”‚
â”‚ 232ê±´                       â”‚
â”‚ â–² +8.2% vs ì „ê¸°ê°„           â”‚
â”‚                             â”‚
â”‚ â–â–‚â–ƒâ–…â–‡â–ˆâ–‡ (7ì¼ íŠ¸ë Œë“œ)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 ì¬êµ¬ë§¤ìœ¨ ê³„ì‚° ë¡œì§

```typescript
// ë°ì´í„° ê·œì¹™ ê°€ì´ë“œ ì°¸ì¡°: CUSTOMER_ACTIVITY_THRESHOLDS
const calculateRepurchaseRate = (orders: Order[], period: DateRange) => {
  const customerOrders = new Map<string, number>()
  
  orders
    .filter(o => isWithinPeriod(o.order_created, period))
    .forEach(o => {
      const userId = o.user_id
      customerOrders.set(userId, (customerOrders.get(userId) || 0) + 1)
    })
  
  const totalCustomers = customerOrders.size
  const repeatCustomers = [...customerOrders.values()].filter(count => count >= 2).length
  
  return {
    rate: safeDivide(repeatCustomers, totalCustomers) * 100,
    totalCustomers,
    repeatCustomers,
    newCustomers: totalCustomers - repeatCustomers
  }
}
```

---

## 5. ë¶„ì„ ì°¨ì› ë‹¤ê°í™”

### 5.1 ë¶„ì„ ì°¨ì› ë§¤íŠ¸ë¦­ìŠ¤

| ì°¨ì› | í˜„ì¬ | ê°œì„  | ë¶„ì„ ê°€ì¹˜ | ìš°ì„ ìˆœìœ„ |
|------|:----:|:----:|----------|:--------:|
| **ìš”ì¼ë³„** | âœ… | íˆíŠ¸ë§µ + ìƒì„¸ | ë§ˆì¼€íŒ… íƒ€ì´ë° ìµœì í™” | â­â­â­ |
| **ì›”ë³„** | âœ… | ì „ë…„ ëŒ€ë¹„ ì¶”ê°€ | ì‹œì¦Œ íŠ¸ë Œë“œ íŒŒì•… | â­â­â­ |
| **êµ­ê°€ë³„** | âœ… | ìƒì„¸ ì§€í‘œ ì¶”ê°€ | ì‹œì¥ë³„ ì „ëµ ìˆ˜ë¦½ | â­â­â­ |
| **ë¶„ê¸°ë³„** | âŒ | ì‹ ê·œ ì¶”ê°€ | ì‹œì¦Œì„± ë¶„ì„ | â­â­ |
| **ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ë³„** | âŒ | ì‹ ê·œ ì¶”ê°€ (RFM ê¸°ë°˜) | íƒ€ê²Ÿ ë§ˆì¼€íŒ… | â­â­â­ |
| **í”Œë«í¼ë³„** | âŒ | ì‹ ê·œ ì¶”ê°€ (iOS/Android) | ì•± ì „ëµ ìˆ˜ë¦½ | â­â­ |
| **ì¿ í° ì‚¬ìš©ë³„** | âŒ | ì‹ ê·œ ì¶”ê°€ | í”„ë¡œëª¨ì…˜ íš¨ê³¼ ì¸¡ì • | â­â­ |
| **PGì‚¬ë³„** | âŒ | ì„ íƒì  ì¶”ê°€ | ê²°ì œ ìµœì í™” | â­ |

### 5.2 ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ë³„ ë¶„ì„ (ì‹ ê·œ)

```typescript
// RFM ê¸°ë°˜ ì„¸ê·¸ë¨¼íŠ¸ë³„ ì£¼ë¬¸ íŒ¨í„´ ë¶„ì„
interface SegmentPatternAnalysis {
  segment: 'Champions' | 'Loyal' | 'Potential' | 'New' | 'At Risk' | 'Hibernating'
  metrics: {
    orderCount: number
    gmv: number
    avgOrderValue: number
    peakDay: string
    avgDaysBetweenOrders: number
  }
  trend: {
    orderGrowth: number   // ì „ê¸°ê°„ ëŒ€ë¹„
    gmvGrowth: number
  }
}

// ì„¸ê·¸ë¨¼íŠ¸ ì •ì˜ (ë°ì´í„° ê·œì¹™ ê°€ì´ë“œ ì°¸ì¡°)
const CUSTOMER_SEGMENTS = {
  Champions: { recency: [0, 30], frequency: [5, Infinity], monetary: [500000, Infinity] },
  Loyal: { recency: [0, 60], frequency: [3, Infinity], monetary: [300000, Infinity] },
  Potential: { recency: [0, 90], frequency: [1, 3], monetary: [100000, 500000] },
  New: { recency: [0, 30], frequency: [1, 1], monetary: [0, Infinity] },
  AtRisk: { recency: [90, 180], frequency: [1, Infinity], monetary: [0, Infinity] },
  Hibernating: { recency: [180, Infinity], frequency: [0, Infinity], monetary: [0, Infinity] },
}
```

### 5.3 í”Œë«í¼ë³„ ë¶„ì„ (ì‹ ê·œ)

```typescript
// order.platform í•„ë“œ í™œìš©
interface PlatformAnalysis {
  platform: 'iOS' | 'Android' | 'Web' | 'Other'
  metrics: {
    orderCount: number
    orderShare: number  // ë¹„ìœ¨ %
    gmv: number
    avgOrderValue: number
  }
  dayPattern: Record<DayOfWeek, number>
}
```

### 5.4 ì¿ í° ì‚¬ìš© ì—¬ë¶€ë³„ ë¶„ì„ (ì‹ ê·œ)

```typescript
// order ì‹œíŠ¸ì˜ ì•„ì´ë””ì–´ìŠ¤ ì¿ í°ë¹„ (Item) í•„ë“œ í™œìš©
interface CouponUsagePattern {
  withCoupon: {
    orderCount: number
    gmv: number
    avgOrderValue: number
    avgDiscount: number
  }
  withoutCoupon: {
    orderCount: number
    gmv: number
    avgOrderValue: number
  }
  comparison: {
    aovDiff: number      // ì¿ í° ì‚¬ìš© ì‹œ AOV ì°¨ì´
    volumeLift: number   // ì¿ í°ìœ¼ë¡œ ì¸í•œ ì£¼ë¬¸ëŸ‰ ì¦ê°€ ì¶”ì •ì¹˜
  }
}
```

---

## 6. ì‹œê°í™” ê³ ë„í™”

### 6.1 íˆíŠ¸ë§µ (ìš”ì¼ x ì›”ë³„)

**ìš©ë„**: ìš”ì¼ê³¼ ì›”ì˜ ì¡°í•©ì—ì„œ ì£¼ë¬¸ íŒ¨í„´ì„ í•œëˆˆì— íŒŒì•…

```typescript
// Heatmap ë°ì´í„° êµ¬ì¡°
interface HeatmapData {
  rows: string[]        // ['1ì›”', '2ì›”', ..., '12ì›”']
  cols: string[]        // ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ']
  values: number[][]    // [row][col] = ì£¼ë¬¸ ìˆ˜
  colorScale: {
    min: string         // '#f0f9ff'
    max: string         // '#1e40af'
  }
}
```

**ì‹œê°í™” ì˜ˆì‹œ:**

```
         ì¼     ì›”     í™”     ìˆ˜     ëª©     ê¸ˆ     í† 
  1ì›”   â–‘â–‘â–‘   â–‘â–‘â–‘   â–“â–“â–“   â–‘â–‘â–‘   â–‘â–‘â–‘   â–’â–’â–’   â–‘â–‘â–‘
  2ì›”   â–‘â–‘â–‘   â–‘â–‘â–‘   â–“â–“â–“   â–‘â–‘â–‘   â–‘â–‘â–‘   â–’â–’â–’   â–‘â–‘â–‘
  3ì›”   â–‘â–‘â–‘   â–‘â–‘â–‘   â–“â–“â–“   â–’â–’â–’   â–‘â–‘â–‘   â–’â–’â–’   â–‘â–‘â–‘
  ...
 12ì›”   â–’â–’â–’   â–’â–’â–’   â–ˆâ–ˆâ–ˆâ–ˆ   â–“â–“â–“   â–’â–’â–’   â–“â–“â–“   â–’â–’â–’
         
  â–‘ ë‚®ìŒ  â–’ ë³´í†µ  â–“ ë†’ìŒ  â–ˆ ë§¤ìš° ë†’ìŒ
```

### 6.2 ë³µí•© ì°¨íŠ¸ (ë¼ì¸ + ë°”)

**ìš©ë„**: GMV(ë¼ì¸)ì™€ ì£¼ë¬¸ ìˆ˜(ë°”)ë¥¼ ë™ì‹œì— ë¹„êµ

```typescript
// Recharts ComposedChart í™œìš©
const MonthlyTrendChart = ({ data }: { data: MonthlyData[] }) => (
  <ComposedChart data={data}>
    <XAxis dataKey="month" />
    <YAxis yAxisId="left" orientation="left" stroke="#6366f1" />
    <YAxis yAxisId="right" orientation="right" stroke="#10b981" />
    <Bar yAxisId="left" dataKey="orders" fill="#6366f1" name="ì£¼ë¬¸ ìˆ˜" />
    <Line yAxisId="right" dataKey="gmv" stroke="#10b981" name="GMV" />
    <Tooltip />
    <Legend />
  </ComposedChart>
)
```

### 6.3 ì „ë…„ ë™ê¸° ëŒ€ë¹„ ì°¨íŠ¸

**ìš©ë„**: ì„±ì¥ì„± íŒŒì•…, ì‹œì¦Œ íš¨ê³¼ ë¶„ë¦¬

```typescript
interface YoYComparisonData {
  month: string
  currentYear: { orders: number; gmv: number }
  previousYear: { orders: number; gmv: number }
  growth: {
    ordersGrowth: number    // %
    gmvGrowth: number       // %
  }
}
```

**ì‹œê°í™” ì˜ˆì‹œ:**

```
  â‚©45M â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â”‚         â—â”€â”€â”€â—                    2024ë…„ (ì‹¤ì„ )
  â‚©30M â”€â”¤       â—     â—â”€â”€â”€â—               2023ë…„ (ì ì„ )
        â”‚     â—â”€â—         â—â”€â”€â”€â—
  â‚©15M â”€â”¤   â—‹â”€â—‹                 â—â”€â”€â”€â—
        â”‚ â—‹â”€â”€â—‹  2023ë…„            â—‹â”€â”€â—‹
   â‚©0  â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        9ì›”  10ì›”  11ì›”  12ì›”  1ì›”  2ì›”
```

### 6.4 íŒŒì´/ë„ë„› ì°¨íŠ¸ (ì„¸ê·¸ë¨¼íŠ¸ ë¹„ìœ¨)

**ìš©ë„**: êµ­ê°€ë³„, í”Œë«í¼ë³„, ì„¸ê·¸ë¨¼íŠ¸ë³„ êµ¬ì„± ë¹„ìœ¨ ì‹œê°í™”

```typescript
// êµ­ê°€ë³„ ì£¼ë¬¸ êµ¬ì„±
const countryDistribution = [
  { name: 'ì¼ë³¸ (JP)', value: 65, color: '#ef4444' },
  { name: 'ì˜ì–´ê¶Œ (EN)', value: 35, color: '#3b82f6' },
]

// ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ë³„ GMV êµ¬ì„±
const segmentDistribution = [
  { name: 'Champions', value: 45, color: '#10b981' },
  { name: 'Loyal', value: 25, color: '#3b82f6' },
  { name: 'Potential', value: 15, color: '#f59e0b' },
  { name: 'At Risk', value: 10, color: '#ef4444' },
  { name: 'Others', value: 5, color: '#6b7280' },
]
```

### 6.5 ìŠ¤íŒŒí´ë¼ì¸ (ë¯¸ë‹ˆ íŠ¸ë Œë“œ)

**ìš©ë„**: KPI ì¹´ë“œ ë‚´ ìµœê·¼ 7ì¼ íŠ¸ë Œë“œ ë¯¸ë‹ˆ ì‹œê°í™”

```typescript
// TinyChart ì»´í¬ë„ŒíŠ¸
const Sparkline = ({ data, color }: { data: number[]; color: string }) => (
  <div className="h-8 w-24">
    <ResponsiveContainer>
      <AreaChart data={data.map((v, i) => ({ i, v }))}>
        <Area dataKey="v" stroke={color} fill={color} fillOpacity={0.2} />
      </AreaChart>
    </ResponsiveContainer>
  </div>
)
```

---

## 7. ì¸ì‚¬ì´íŠ¸ ìë™í™”

### 7.1 ì¸ì‚¬ì´íŠ¸ ìœ í˜• ì •ì˜

```typescript
type InsightType = 
  | 'peak_pattern'      // í”¼í¬ íŒ¨í„´ ê°ì§€
  | 'trend_change'      // íŠ¸ë Œë“œ ë³€í™” ê°ì§€
  | 'anomaly'           // ì´ìƒì¹˜ ê°ì§€
  | 'comparison'        // ë¹„êµ ì¸ì‚¬ì´íŠ¸
  | 'recommendation'    // ì•¡ì…˜ ê¶Œì¥
  | 'prediction'        // ì˜ˆì¸¡ ê¸°ë°˜ ì¸ì‚¬ì´íŠ¸

interface OrderPatternInsight {
  type: InsightType
  priority: 'critical' | 'high' | 'medium' | 'low'
  category: string      // 'ë§¤ì¶œ', 'ê³ ê°', 'ì‹œì¦Œ' ë“±
  title: string
  description: string
  evidence: string[]    // ê·¼ê±° ë°ì´í„°
  action?: string       // ê¶Œì¥ ì•¡ì…˜
  impact?: {
    metric: string
    expected: string
  }
}
```

### 7.2 ìë™ ìƒì„± ì¸ì‚¬ì´íŠ¸ ë¡œì§

```typescript
// ì¸ì‚¬ì´íŠ¸ ìƒì„±ê¸°
const generateOrderInsights = (
  currentData: OrderPatternData,
  previousData: OrderPatternData,
  config: InsightConfig
): OrderPatternInsight[] => {
  const insights: OrderPatternInsight[] = []
  
  // 1. í”¼í¬ íŒ¨í„´ ì¸ì‚¬ì´íŠ¸
  const peakDay = findPeakDay(currentData.byDay)
  insights.push({
    type: 'peak_pattern',
    priority: 'high',
    category: 'ë§ˆì¼€íŒ…',
    title: `${peakDay.dayName}ìš”ì¼ ì£¼ë¬¸ ì§‘ì¤‘`,
    description: `ì „ì²´ ì£¼ë¬¸ì˜ ${peakDay.percentage}%ê°€ ${peakDay.dayName}ìš”ì¼ì— ë°œìƒí•©ë‹ˆë‹¤.`,
    evidence: [
      `${peakDay.dayName}ìš”ì¼ ì£¼ë¬¸: ${peakDay.orders}ê±´`,
      `í‰ì¼ í‰ê·  ëŒ€ë¹„ ${peakDay.vsAverage}% ë†’ìŒ`,
    ],
    action: `${peakDay.dayName}ìš”ì¼ì— í”„ë¡œëª¨ì…˜ ë° ë§ˆì¼€íŒ… ìº í˜ì¸ ì§‘ì¤‘ ê¶Œì¥`,
    impact: {
      metric: 'ì „í™˜ìœ¨',
      expected: '+5~10% í–¥ìƒ ì˜ˆìƒ',
    }
  })
  
  // 2. ì„±ì¥ë¥  ì¸ì‚¬ì´íŠ¸
  const growthRate = calculateGrowthRate(currentData, previousData)
  if (Math.abs(growthRate.gmv) > 10) {
    insights.push({
      type: 'trend_change',
      priority: growthRate.gmv > 0 ? 'medium' : 'critical',
      category: 'ì„±ê³¼',
      title: `GMV ${growthRate.gmv > 0 ? 'ì„±ì¥' : 'í•˜ë½'} ê°ì§€`,
      description: `ì „ê¸°ê°„ ëŒ€ë¹„ GMVê°€ ${Math.abs(growthRate.gmv).toFixed(1)}% ${growthRate.gmv > 0 ? 'ìƒìŠ¹' : 'í•˜ë½'}í–ˆìŠµë‹ˆë‹¤.`,
      evidence: [
        `í˜„ì¬ ê¸°ê°„ GMV: ${formatCurrency(currentData.summary.totalGmv)}`,
        `ì´ì „ ê¸°ê°„ GMV: ${formatCurrency(previousData.summary.totalGmv)}`,
      ],
      action: growthRate.gmv > 0 
        ? 'ì„±ì¥ ëª¨ë©˜í…€ ìœ ì§€ë¥¼ ìœ„í•œ ìº í˜ì¸ í™•ëŒ€ ê²€í† ' 
        : 'ë§¤ì¶œ í•˜ë½ ì›ì¸ ë¶„ì„ ë° ê¸´ê¸‰ í”„ë¡œëª¨ì…˜ ê²€í† ',
    })
  }
  
  // 3. ì¬êµ¬ë§¤ìœ¨ ì¸ì‚¬ì´íŠ¸
  const repurchaseRate = calculateRepurchaseRate(currentData.orders)
  if (repurchaseRate.change < -5) {
    insights.push({
      type: 'anomaly',
      priority: 'critical',
      category: 'ê³ ê°',
      title: 'ì¬êµ¬ë§¤ìœ¨ í•˜ë½ ê²½ê³ ',
      description: `ì¬êµ¬ë§¤ìœ¨ì´ ${Math.abs(repurchaseRate.change).toFixed(1)}% í•˜ë½í–ˆìŠµë‹ˆë‹¤. ê³ ê° ìœ ì§€ ì „ëµ ì ê²€ì´ í•„ìš”í•©ë‹ˆë‹¤.`,
      evidence: [
        `í˜„ì¬ ì¬êµ¬ë§¤ìœ¨: ${repurchaseRate.current.toFixed(1)}%`,
        `ì´ì „ ì¬êµ¬ë§¤ìœ¨: ${repurchaseRate.previous.toFixed(1)}%`,
      ],
      action: 'ì´íƒˆ ìœ„í—˜ ê³ ê° ëŒ€ìƒ ë¦¬í…ì…˜ ì¿ í° ë°œí–‰ ê¶Œì¥',
      impact: {
        metric: 'LTV',
        expected: 'ê³ ê°ë‹¹ í‰ê·  LTV 10% ê°ì†Œ ìœ„í—˜',
      }
    })
  }
  
  // 4. êµ­ê°€ë³„ ë¹„êµ ì¸ì‚¬ì´íŠ¸
  const countryComparison = compareCountries(currentData.byCountry)
  if (countryComparison.divergence > 20) {
    insights.push({
      type: 'comparison',
      priority: 'medium',
      category: 'ì‹œì¥',
      title: 'êµ­ê°€ë³„ ì„±ê³¼ ê²©ì°¨ í™•ëŒ€',
      description: `${countryComparison.leading} ì‹œì¥ì´ ${countryComparison.lagging} ì‹œì¥ ëŒ€ë¹„ ${countryComparison.divergence}% ë†’ì€ ì„±ì¥ë¥ ì„ ë³´ì…ë‹ˆë‹¤.`,
      evidence: [
        `${countryComparison.leading} ì„±ì¥ë¥ : +${countryComparison.leadingGrowth}%`,
        `${countryComparison.lagging} ì„±ì¥ë¥ : +${countryComparison.laggingGrowth}%`,
      ],
      action: `${countryComparison.lagging} ì‹œì¥ íŠ¹í™” í”„ë¡œëª¨ì…˜ ê²€í† `,
    })
  }
  
  // 5. ì‹œì¦Œì„± ì¸ì‚¬ì´íŠ¸
  const seasonality = analyzeSeasonality(currentData.monthly)
  if (seasonality.upcomingPeak) {
    insights.push({
      type: 'prediction',
      priority: 'medium',
      category: 'ì‹œì¦Œ',
      title: `${seasonality.upcomingPeak.month} í”¼í¬ ì‹œì¦Œ ì ‘ê·¼`,
      description: `ê³¼ê±° ë°ì´í„° ê¸°ì¤€ ${seasonality.upcomingPeak.month}ì€ ì—°ê°„ ì£¼ë¬¸ëŸ‰ì˜ ${seasonality.upcomingPeak.share}%ë¥¼ ì°¨ì§€í•˜ëŠ” í”¼í¬ ì‹œì¦Œì…ë‹ˆë‹¤.`,
      evidence: [
        `ì‘ë…„ ${seasonality.upcomingPeak.month} GMV: ${formatCurrency(seasonality.upcomingPeak.lastYearGmv)}`,
        `ì˜ˆìƒ ì„±ì¥ë¥ : +${seasonality.upcomingPeak.expectedGrowth}%`,
      ],
      action: 'ì¬ê³  í™•ë³´ ë° ë§ˆì¼€íŒ… ì˜ˆì‚° ì¡°ê¸° ë°°ì • ê¶Œì¥',
      impact: {
        metric: 'GMV',
        expected: `${formatCurrency(seasonality.upcomingPeak.expectedGmv)} ë‹¬ì„± ëª©í‘œ`,
      }
    })
  }
  
  return insights.sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority])
}
```

### 7.3 ì¸ì‚¬ì´íŠ¸ ì¹´ë“œ UI

```typescript
function InsightCard({ insight }: { insight: OrderPatternInsight }) {
  const typeConfig = {
    peak_pattern: { icon: Target, color: 'violet' },
    trend_change: { icon: TrendingUp, color: 'blue' },
    anomaly: { icon: AlertTriangle, color: 'red' },
    comparison: { icon: Scale, color: 'amber' },
    recommendation: { icon: Lightbulb, color: 'emerald' },
    prediction: { icon: Activity, color: 'indigo' },
  }
  
  const priorityColors = {
    critical: 'bg-red-50 border-red-200',
    high: 'bg-orange-50 border-orange-200',
    medium: 'bg-amber-50 border-amber-200',
    low: 'bg-slate-50 border-slate-200',
  }
  
  return (
    <div className={`rounded-xl border p-5 ${priorityColors[insight.priority]}`}>
      <div className="flex items-start gap-3">
        <Icon icon={typeConfig[insight.type].icon} className={`text-${typeConfig[insight.type].color}-500`} />
        <div className="flex-1">
          <div className="flex items-center gap-2 mb-1">
            <span className="text-xs px-2 py-0.5 rounded bg-slate-100">{insight.category}</span>
            <span className={`text-xs px-2 py-0.5 rounded ${priorityColors[insight.priority]}`}>
              {insight.priority === 'critical' ? 'ê¸´ê¸‰' : 
               insight.priority === 'high' ? 'ë†’ìŒ' : 
               insight.priority === 'medium' ? 'ë³´í†µ' : 'ë‚®ìŒ'}
            </span>
          </div>
          <h4 className="font-semibold text-slate-800 mb-2">{insight.title}</h4>
          <p className="text-sm text-slate-600 mb-3">{insight.description}</p>
          
          {/* ê·¼ê±° ë°ì´í„° */}
          <div className="bg-white/50 rounded-lg p-3 mb-3">
            <p className="text-xs font-medium text-slate-500 mb-1">ğŸ“Š ê·¼ê±°</p>
            <ul className="text-xs text-slate-600 space-y-1">
              {insight.evidence.map((e, i) => (
                <li key={i}>â€¢ {e}</li>
              ))}
            </ul>
          </div>
          
          {/* ê¶Œì¥ ì•¡ì…˜ */}
          {insight.action && (
            <div className="flex items-center gap-2 text-sm text-emerald-700 bg-emerald-50 rounded-lg px-3 py-2">
              <Icon icon={Zap} size="sm" />
              <span>{insight.action}</span>
            </div>
          )}
          
          {/* ì˜ˆìƒ ì˜í–¥ */}
          {insight.impact && (
            <div className="mt-2 text-xs text-slate-500">
              ğŸ’¡ {insight.impact.metric}: {insight.impact.expected}
            </div>
          )}
        </div>
      </div>
    </div>
  )
}
```

---

## 8. ë°ì´í„° ì†ŒìŠ¤ ë° ê°€ê³µ ë¡œì§

### 8.1 í™œìš© ë°ì´í„° ì‹œíŠ¸

| ì‹œíŠ¸ëª… | í™œìš© í•„ë“œ | ìš©ë„ |
|--------|----------|------|
| **order** | order_created, order_code, user_id, country, Total GMV, platform, ì•„ì´ë””ì–´ìŠ¤ ì¿ í°ë¹„ | ì£¼ë¬¸ íŒ¨í„´ ë¶„ì„ |
| **users** | ID, COUNTRY, CREATED_AT | ì‹ ê·œ/ê¸°ì¡´ ê³ ê° êµ¬ë¶„, ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ |
| **coupon** | coupon_id, used_count | ì¿ í° ì‚¬ìš© ì£¼ë¬¸ ë¶„ì„ |
| **logistics** | order_code, Total GMV | ì•„ì´í…œ ë‹¨ìœ„ ë¶„ì„ (ì„ íƒì ) |

### 8.2 í•µì‹¬ ê°€ê³µ ë¡œì§

```typescript
// ë°ì´í„° ê·œì¹™ ê°€ì´ë“œ ì¤€ìˆ˜
import { CURRENCY, TIMEZONE } from '@/config/constants'
import { safeNumber, safeDivide, safeSum } from '@/lib/safeUtils'
import { formatCurrency, toKRW } from '@/lib/formatters'

// 1. GMV ê³„ì‚° (USD â†’ KRW)
const calculateGmvKrw = (orders: Order[]): number => {
  return safeSum(orders.map(o => toKRW(safeNumber(o.total_gmv))))
}

// 2. ìš”ì¼ë³„ ì§‘ê³„
const aggregateByDay = (orders: Order[]): DayPattern[] => {
  const dayStats = new Map<number, { orders: Set<string>; gmv: number }>()
  
  for (let i = 0; i < 7; i++) {
    dayStats.set(i, { orders: new Set(), gmv: 0 })
  }
  
  orders.forEach(order => {
    const date = new Date(order.order_created)
    const dayOfWeek = date.getDay()
    const stats = dayStats.get(dayOfWeek)!
    
    stats.orders.add(order.order_code)
    stats.gmv += toKRW(safeNumber(order.total_gmv))
  })
  
  return Array.from(dayStats.entries()).map(([day, stats]) => ({
    day,
    dayName: DAY_NAMES[day],
    orders: stats.orders.size,
    gmv: Math.round(stats.gmv),
    avgOrderValue: safeDivide(stats.gmv, stats.orders.size),
  }))
}

// 3. ì „ê¸°ê°„ ëŒ€ë¹„ ë³€í™”ìœ¨ ê³„ì‚°
const calculatePeriodComparison = (
  currentOrders: Order[],
  previousOrders: Order[]
): PeriodComparison => {
  const current = {
    orders: new Set(currentOrders.map(o => o.order_code)).size,
    gmv: calculateGmvKrw(currentOrders),
  }
  
  const previous = {
    orders: new Set(previousOrders.map(o => o.order_code)).size,
    gmv: calculateGmvKrw(previousOrders),
  }
  
  return {
    ordersChange: safeDivide(current.orders - previous.orders, previous.orders) * 100,
    gmvChange: safeDivide(current.gmv - previous.gmv, previous.gmv) * 100,
    aovChange: safeDivide(
      safeDivide(current.gmv, current.orders) - safeDivide(previous.gmv, previous.orders),
      safeDivide(previous.gmv, previous.orders)
    ) * 100,
  }
}

// 4. ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ë³„ ì§‘ê³„
const aggregateByCustomerSegment = (
  orders: Order[],
  customers: Map<string, CustomerSegment>
): SegmentPattern[] => {
  const segmentStats = new Map<string, { orders: number; gmv: number; customers: Set<string> }>()
  
  SEGMENT_NAMES.forEach(seg => {
    segmentStats.set(seg, { orders: 0, gmv: 0, customers: new Set() })
  })
  
  orders.forEach(order => {
    const segment = customers.get(order.user_id)?.segment || 'Unknown'
    const stats = segmentStats.get(segment)
    
    if (stats) {
      stats.orders++
      stats.gmv += toKRW(safeNumber(order.total_gmv))
      stats.customers.add(order.user_id)
    }
  })
  
  return Array.from(segmentStats.entries()).map(([segment, stats]) => ({
    segment,
    orders: stats.orders,
    gmv: Math.round(stats.gmv),
    customers: stats.customers.size,
    avgOrderValue: safeDivide(stats.gmv, stats.orders),
    avgOrdersPerCustomer: safeDivide(stats.orders, stats.customers.size),
  }))
}
```

---

## 9. API ì„¤ê³„

### 9.1 ê¸°ì¡´ API ë³´ì™„

| ì—”ë“œí¬ì¸íŠ¸ | í˜„ì¬ ìƒíƒœ | ê°œì„  ë‚´ìš© |
|-----------|----------|----------|
| `/api/order-patterns/summary` | âœ… | ë³€í™”ìœ¨ ì¶”ê°€, GMV ì˜¤ë¥˜ ìˆ˜ì • |
| `/api/order-patterns/by-day` | âœ… | GMV í¬í•¨, ì „ê¸°ê°„ ë¹„êµ ì¶”ê°€ |
| `/api/order-patterns/by-country` | âœ… | ìƒì„¸ ì§€í‘œ ì¶”ê°€ |
| `/api/order-patterns/monthly-trend` | âœ… | ì „ë…„ ë™ê¸° ë¹„êµ ì¶”ê°€ |

### 9.2 ì‹ ê·œ API

```typescript
// 1. ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ë³„ íŒ¨í„´
GET /api/order-patterns/by-segment
Query: startDate, endDate
Response: {
  success: true,
  data: {
    period: { startDate, endDate },
    bySegment: SegmentPattern[],
    comparison: {
      previous: SegmentPattern[],
      changes: SegmentChange[]
    }
  }
}

// 2. í”Œë«í¼ë³„ íŒ¨í„´
GET /api/order-patterns/by-platform
Query: startDate, endDate
Response: {
  success: true,
  data: {
    period: { startDate, endDate },
    byPlatform: PlatformPattern[],
    dominant: { platform: string; share: number }
  }
}

// 3. ì¿ í° ì‚¬ìš© íŒ¨í„´
GET /api/order-patterns/coupon-impact
Query: startDate, endDate
Response: {
  success: true,
  data: {
    period: { startDate, endDate },
    withCoupon: CouponUsageStats,
    withoutCoupon: CouponUsageStats,
    impact: {
      aovLift: number,
      volumeLift: number
    }
  }
}

// 4. ì „ë…„ ë™ê¸° ë¹„êµ
GET /api/order-patterns/yoy-comparison
Query: startDate, endDate
Response: {
  success: true,
  data: {
    currentPeriod: PeriodSummary,
    previousYearPeriod: PeriodSummary,
    growth: {
      ordersGrowth: number,
      gmvGrowth: number,
      aovGrowth: number
    },
    monthlyComparison: YoYMonthlyData[]
  }
}

// 5. ìë™ ì¸ì‚¬ì´íŠ¸
GET /api/order-patterns/insights
Query: startDate, endDate
Response: {
  success: true,
  data: {
    period: { startDate, endDate },
    insights: OrderPatternInsight[],
    generatedAt: string
  }
}

// 6. íˆíŠ¸ë§µ ë°ì´í„°
GET /api/order-patterns/heatmap
Query: startDate, endDate, metric (orders | gmv | aov)
Response: {
  success: true,
  data: {
    period: { startDate, endDate },
    metric: string,
    rows: string[],      // ì›” ë˜ëŠ” ì£¼
    cols: string[],      // ìš”ì¼
    values: number[][],
    max: number,
    min: number
  }
}
```

---

## 10. êµ¬í˜„ ìš°ì„ ìˆœìœ„

### 10.1 Phase 1: í•µì‹¬ ê°œì„  (ìš°ì„  êµ¬í˜„)

| ì‘ì—… | ì„¤ëª… | ì˜ˆìƒ ì‹œê°„ |
|------|------|:--------:|
| 1.1 | GMV â‚©0 ë²„ê·¸ ìˆ˜ì • | 1h |
| 1.2 | íƒ­ ë„¤ë¹„ê²Œì´ì…˜ ì¶”ê°€ | 2h |
| 1.3 | KPI ì¹´ë“œ ë³€í™”ìœ¨ ì¶”ê°€ | 2h |
| 1.4 | í—¤ë” ì˜ì—­ ê°œì„  | 1h |
| 1.5 | ë³µí•© ì°¨íŠ¸ (GMV + ì£¼ë¬¸ ìˆ˜) êµ¬í˜„ | 2h |

**ì˜ˆìƒ ì†Œìš”**: 8ì‹œê°„

### 10.2 Phase 2: ë¶„ì„ í™•ì¥

| ì‘ì—… | ì„¤ëª… | ì˜ˆìƒ ì‹œê°„ |
|------|------|:--------:|
| 2.1 | ì „ê¸°ê°„ ëŒ€ë¹„ ë³€í™”ìœ¨ API êµ¬í˜„ | 2h |
| 2.2 | íˆíŠ¸ë§µ ì°¨íŠ¸ êµ¬í˜„ | 3h |
| 2.3 | ì¬êµ¬ë§¤ìœ¨ ê³„ì‚° ë° í‘œì‹œ | 2h |
| 2.4 | êµ­ê°€ë³„ ìƒì„¸ ë¹„êµ íƒ­ êµ¬í˜„ | 3h |

**ì˜ˆìƒ ì†Œìš”**: 10ì‹œê°„

### 10.3 Phase 3: ê³ ê¸‰ ë¶„ì„

| ì‘ì—… | ì„¤ëª… | ì˜ˆìƒ ì‹œê°„ |
|------|------|:--------:|
| 3.1 | ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ë³„ ë¶„ì„ API ë° UI | 4h |
| 3.2 | í”Œë«í¼ë³„ ë¶„ì„ ì¶”ê°€ | 2h |
| 3.3 | ì¿ í° ì‚¬ìš© ì˜í–¥ ë¶„ì„ | 3h |
| 3.4 | ì „ë…„ ë™ê¸° ëŒ€ë¹„ ì°¨íŠ¸ | 3h |

**ì˜ˆìƒ ì†Œìš”**: 12ì‹œê°„

### 10.4 Phase 4: ì¸ì‚¬ì´íŠ¸ ìë™í™”

| ì‘ì—… | ì„¤ëª… | ì˜ˆìƒ ì‹œê°„ |
|------|------|:--------:|
| 4.1 | ì¸ì‚¬ì´íŠ¸ ìƒì„± ë¡œì§ êµ¬í˜„ | 4h |
| 4.2 | ì¸ì‚¬ì´íŠ¸ ì¹´ë“œ UI êµ¬í˜„ | 2h |
| 4.3 | ì¸ì‚¬ì´íŠ¸ íƒ­ ì™„ì„± | 2h |

**ì˜ˆìƒ ì†Œìš”**: 8ì‹œê°„

---

## ğŸ“Š ê¸°ëŒ€ íš¨ê³¼

### ì •ëŸ‰ì  íš¨ê³¼

| ì§€í‘œ | í˜„ì¬ | ê°œì„  í›„ | í–¥ìƒë¥  |
|------|:----:|:------:|:-----:|
| ë¶„ì„ ì°¨ì› ìˆ˜ | 3ê°œ | 8ê°œ | +167% |
| KPI ì§€í‘œ ìˆ˜ | 4ê°œ | 8ê°œ | +100% |
| ìë™ ì¸ì‚¬ì´íŠ¸ | 3ê°œ | 8~12ê°œ | +300% |
| ì°¨íŠ¸ ìœ í˜• | 2ê°œ | 6ê°œ | +200% |

### ì •ì„±ì  íš¨ê³¼

1. **ì˜ì‚¬ê²°ì • ì†ë„ í–¥ìƒ**: ë‹¤ì°¨ì› ë¶„ì„ìœ¼ë¡œ íŒ¨í„´ íŒŒì•… ì‹œê°„ ë‹¨ì¶•
2. **ë§ˆì¼€íŒ… íš¨ìœ¨í™”**: í”¼í¬ íƒ€ì´ë°, ì„¸ê·¸ë¨¼íŠ¸ë³„ ì¸ì‚¬ì´íŠ¸ë¡œ íƒ€ê²ŸíŒ… ì •í™•ë„ í–¥ìƒ
3. **ì´ìƒ ì§•í›„ ì¡°ê¸° ê°ì§€**: ìë™ ì¸ì‚¬ì´íŠ¸ë¡œ ë¬¸ì œ ì¡°ê¸° ë°œê²¬
4. **ë°ì´í„° ê¸°ë°˜ ì „ëµ ìˆ˜ë¦½**: ì „ë…„ ëŒ€ë¹„, ì„¸ê·¸ë¨¼íŠ¸ë³„ ë¹„êµë¡œ ì „ëµì  ì˜ì‚¬ê²°ì • ì§€ì›

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°ì´í„° ê·œì¹™ ì¤€ìˆ˜ í™•ì¸

- [ ] í™˜ìœ¨ ë³€í™˜: `CURRENCY.USD_TO_KRW` (1350) ì‚¬ìš©
- [ ] í†µí™” í¬ë§·: `formatCurrency()` í•¨ìˆ˜ ì‚¬ìš©
- [ ] Null ì²˜ë¦¬: `safeNumber()`, `safeDivide()` ì‚¬ìš©
- [ ] ë‚ ì§œ í¬ë§·: APIëŠ” `YYYY-MM-DD`, UIëŠ” í•œê¸€ í¬ë§·
- [ ] íƒ€ì„ì¡´: `Asia/Seoul` (KST) ê¸°ì¤€

### UI/UX ì¼ê´€ì„± í™•ì¸

- [ ] ì¿ í° ë¶„ì„ í˜ì´ì§€ì™€ ë™ì¼í•œ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤íƒ€ì¼
- [ ] ë¦¬ë·° ë¶„ì„ í˜ì´ì§€ì™€ ë™ì¼í•œ ì¸ì‚¬ì´íŠ¸ ì¹´ë“œ ìŠ¤íƒ€ì¼
- [ ] ìƒ‰ìƒ íŒ”ë ˆíŠ¸ í†µì¼ (indigo, violet, emerald, amber, red)
- [ ] ë¡œë”© ìƒíƒœ, ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬

---

> **ë¬¸ì„œ ê´€ë¦¬ì**: AI ìë™í™”íŒ€  
> **ìµœì¢… ì—…ë°ì´íŠ¸**: 2024-12-18  
> **ê´€ë ¨ ë¬¸ì„œ**: `ë°ì´í„°_ê·œì¹™_ê°€ì´ë“œ.md`, `êµ¬í˜„_ì‘ì—…_ëª…ì„¸ì„œ.md`, `í—ˆë¸Œ_ê°œì„ _ì œì•ˆì„œ.md`

