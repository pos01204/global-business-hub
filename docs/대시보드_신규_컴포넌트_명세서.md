# ğŸ§© ëŒ€ì‹œë³´ë“œ ì‹ ê·œ ì»´í¬ë„ŒíŠ¸ ëª…ì„¸ì„œ

> **ë¬¸ì„œ ë²„ì „**: 2.0  
> **ì‘ì„±ì¼**: 2024-12-19  
> **ìµœì¢… ìˆ˜ì •**: 2024-12-19  
> **ëª©ì **: ëŒ€ì‹œë³´ë“œ ì§€í‘œ í™•ì¥ì„ ìœ„í•œ ì‹ ê·œ ì»´í¬ë„ŒíŠ¸ ìƒì„¸ êµ¬í˜„ ëª…ì„¸

---

## ğŸ“Œ í•µì‹¬ ì„¤ê³„ ì›ì¹™

### ë°ì´í„° ê¸°ì¤€ ì‹œì 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â° ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì˜ ë°ì´í„° ê¸°ì¤€                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â€¢ ê¸°ì¤€ì¼: ì „ì¼ (D-1) - "ì–´ì œ"                                               â”‚
â”‚  â€¢ ì—…ë°ì´íŠ¸ ì‹œì : ë§¤ì¼ ì˜¤ì „ 11:00 (KST)                                      â”‚
â”‚  â€¢ í‘œí˜„ ë°©ì‹: "ì–´ì œ ê¸°ì¤€", "ì „ì¼ ëŒ€ë¹„", "ì§€ë‚œ 7ì¼" ë“±                         â”‚
â”‚                                                                             â”‚
â”‚  âš ï¸ "ì‹¤ì‹œê°„", "í˜„ì¬", "ì˜¤ëŠ˜" í‘œí˜„ ì‚¬ìš© ê¸ˆì§€                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì»´í¬ë„ŒíŠ¸ ê³µí†µ Props

```typescript
// ëª¨ë“  ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸ì— í¬í•¨ë˜ì–´ì•¼ í•˜ëŠ” ê³µí†µ Props
interface BaseDashboardProps {
  /** ë°ì´í„° ê¸°ì¤€ì¼ (ì–´ì œ) */
  referenceDate: string        // "2024-12-18"
  
  /** ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„ */
  lastUpdated?: string         // "2024-12-19 11:00"
  
  /** ë¡œë”© ìƒíƒœ */
  isLoading?: boolean
  
  /** ì¶”ê°€ í´ë˜ìŠ¤ */
  className?: string
}
```

---

## ğŸ“‹ ëª©ì°¨

1. [AnomalyAlert ì»´í¬ë„ŒíŠ¸](#1-anomalyalert-ì»´í¬ë„ŒíŠ¸)
2. [CountryContribution ì»´í¬ë„ŒíŠ¸](#2-countrycontribution-ì»´í¬ë„ŒíŠ¸)
3. [GrowthBadges ì»´í¬ë„ŒíŠ¸](#3-growthbadges-ì»´í¬ë„ŒíŠ¸)
4. [DailyChangeSummary ì»´í¬ë„ŒíŠ¸](#4-dailychangesummary-ì»´í¬ë„ŒíŠ¸)
5. [WeeklyTrendSummary ì»´í¬ë„ŒíŠ¸](#5-weeklytrendsummary-ì»´í¬ë„ŒíŠ¸)
6. [SeasonPatternOverlay ì»´í¬ë„ŒíŠ¸](#6-seasonpatternoverlay-ì»´í¬ë„ŒíŠ¸)
7. [MonthlyForecast ì»´í¬ë„ŒíŠ¸](#7-monthlyforecast-ì»´í¬ë„ŒíŠ¸)
8. [API ì—”ë“œí¬ì¸íŠ¸ ëª…ì„¸](#8-api-ì—”ë“œí¬ì¸íŠ¸-ëª…ì„¸)

---

## 1. AnomalyAlert ì»´í¬ë„ŒíŠ¸

### 1.1 ì»´í¬ë„ŒíŠ¸ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|-----|------|
| **íŒŒì¼ ê²½ë¡œ** | `frontend/components/ui/AnomalyAlert.tsx` |
| **ìš©ë„** | **ì „ì¼** GMV/ì£¼ë¬¸ ë“± í•µì‹¬ ì§€í‘œì˜ ì´ìƒ ê°ì§€ ì•Œë¦¼ í‘œì‹œ |
| **ì§€í‘œ ID** | AD01 (GMV ì´ìƒ íƒì§€), AD02 (ì£¼ë¬¸ëŸ‰ ì´ìƒ íƒì§€) |
| **ë°ì´í„° ê¸°ì¤€** | ì „ì¼ (D-1) ë§ˆê° ë°ì´í„° |

### 1.2 Props Interface

```typescript
export interface AnomalyAlertProps extends BaseDashboardProps {
  /** ì•Œë¦¼ ìœ í˜• */
  type: 'critical' | 'warning' | 'positive'  // positive: ì˜ˆìƒ ì´ˆê³¼ ë‹¬ì„±
  
  /** ì§€í‘œëª… */
  metric: string
  
  /** ì „ì¼ ì‹¤ì œ ê°’ */
  actualValue: number
  
  /** ì˜ˆì¸¡/ê¸°ëŒ€ ê°’ */
  expectedValue: number
  
  /** í¸ì°¨ (%) */
  deviation: number
  
  /** í‘œì¤€í¸ì°¨ ë°°ìˆ˜ (Ïƒ) */
  sigma: number
  
  /** ì˜ˆìƒ ì›ì¸ (ì„ íƒ) */
  possibleCauses?: string[]
  
  /** ìƒì„¸ ë¶„ì„ ë§í¬ */
  analysisLink?: string
  
  /** ë‹«ê¸° ê°€ëŠ¥ ì—¬ë¶€ */
  dismissible?: boolean
  
  /** ë‹«ê¸° ì½œë°± */
  onDismiss?: () => void
  
  /** í™•ì¸ ì½œë°± */
  onAcknowledge?: () => void
}
```

### 1.3 ì»´í¬ë„ŒíŠ¸ êµ¬í˜„

```typescript
'use client'

import React, { useState } from 'react'
import { motion, AnimatePresence } from 'framer-motion'
import { AlertTriangle, AlertCircle, TrendingUp, X, ChevronRight, Calendar } from 'lucide-react'
import { Icon } from './Icon'
import { cn } from '@/lib/utils'
import { formatCurrency, formatDate } from '@/lib/formatters'
import Link from 'next/link'

const typeStyles = {
  critical: {
    bg: 'bg-red-50 dark:bg-red-900/20',
    border: 'border-red-300 dark:border-red-700',
    iconBg: 'bg-red-500',
    icon: AlertTriangle,
    iconAnimation: 'animate-pulse',
    badge: 'bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-300',
    badgeText: 'ê¸´ê¸‰',
  },
  warning: {
    bg: 'bg-amber-50 dark:bg-amber-900/20',
    border: 'border-amber-300 dark:border-amber-700',
    iconBg: 'bg-amber-500',
    icon: AlertCircle,
    iconAnimation: '',
    badge: 'bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-300',
    badgeText: 'ì£¼ì˜',
  },
  positive: {
    bg: 'bg-emerald-50 dark:bg-emerald-900/20',
    border: 'border-emerald-300 dark:border-emerald-700',
    iconBg: 'bg-emerald-500',
    icon: TrendingUp,
    iconAnimation: '',
    badge: 'bg-emerald-100 text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-300',
    badgeText: 'í˜¸ì¡°',
  },
}

export function AnomalyAlert({
  type,
  metric,
  referenceDate,
  actualValue,
  expectedValue,
  deviation,
  sigma,
  possibleCauses,
  analysisLink,
  dismissible = true,
  onDismiss,
  onAcknowledge,
  className,
}: AnomalyAlertProps) {
  const [isDismissed, setIsDismissed] = useState(false)
  const style = typeStyles[type]
  const IconComponent = style.icon

  const handleDismiss = () => {
    setIsDismissed(true)
    onDismiss?.()
  }

  const getDeviationLabel = () => {
    if (deviation > 0) return `+${deviation.toFixed(1)}%`
    return `${deviation.toFixed(1)}%`
  }

  const getSigmaLabel = () => {
    return `Â±${Math.abs(sigma).toFixed(1)}Ïƒ ${Math.abs(sigma) > 3 ? 'ì´ˆê³¼' : ''}`
  }

  return (
    <AnimatePresence>
      {!isDismissed && (
        <motion.div
          initial={{ opacity: 0, y: -20, height: 0 }}
          animate={{ opacity: 1, y: 0, height: 'auto' }}
          exit={{ opacity: 0, y: -20, height: 0 }}
          transition={{ duration: 0.3, ease: 'easeOut' }}
          className={cn(
            'rounded-xl overflow-hidden border',
            style.bg,
            style.border,
            className
          )}
        >
          <div className="p-4 lg:p-5">
            {/* ìƒë‹¨: ì•„ì´ì½˜ + ì œëª© + ê¸°ì¤€ì¼ */}
            <div className="flex items-start justify-between gap-4 mb-3">
              <div className="flex items-center gap-3">
                <div className={cn(
                  'w-10 h-10 rounded-xl flex items-center justify-center',
                  style.iconBg,
                  style.iconAnimation
                )}>
                  <Icon icon={IconComponent} size="lg" className="text-white" />
                </div>
                <div>
                  <div className="flex items-center gap-2">
                    <h3 className="text-base font-bold text-slate-800 dark:text-slate-100">
                      ì´ìƒ ê°ì§€: {metric}
                    </h3>
                    <span className={cn(
                      'px-2 py-0.5 text-xs font-bold rounded-full',
                      style.badge
                    )}>
                      {style.badgeText}
                    </span>
                  </div>
                  <p className="text-sm text-slate-600 dark:text-slate-400 mt-0.5">
                    ì–´ì œ ì‹¤ì ì´ ì˜ˆì¸¡ ëŒ€ë¹„ {getDeviationLabel()} {deviation < 0 ? 'í•˜ë½' : 'ìƒìŠ¹'}í–ˆìŠµë‹ˆë‹¤
                  </p>
                </div>
              </div>
              
              <div className="flex items-center gap-2">
                <span className="flex items-center gap-1 text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg">
                  <Calendar className="w-3 h-3" />
                  {formatDate(referenceDate, 'M/d')} ê¸°ì¤€
                </span>
                {dismissible && (
                  <button
                    onClick={handleDismiss}
                    className="p-1.5 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors"
                    aria-label="ì•Œë¦¼ ë‹«ê¸°"
                  >
                    <X className="w-4 h-4 text-slate-500" />
                  </button>
                )}
              </div>
            </div>

            {/* ì¤‘ë‹¨: ìˆ˜ì¹˜ ì •ë³´ */}
            <div className="grid grid-cols-3 gap-3 mb-4">
              <div className="bg-white dark:bg-slate-800 rounded-lg p-3 text-center border border-slate-200 dark:border-slate-700">
                <div className="text-xs text-slate-500 dark:text-slate-400 mb-1">ì–´ì œ ì‹¤ì </div>
                <div className="text-lg font-bold text-slate-800 dark:text-slate-100">
                  {formatCurrency(actualValue)}
                </div>
              </div>
              <div className="bg-white dark:bg-slate-800 rounded-lg p-3 text-center border border-slate-200 dark:border-slate-700">
                <div className="text-xs text-slate-500 dark:text-slate-400 mb-1">ì˜ˆì¸¡ì¹˜</div>
                <div className="text-lg font-bold text-slate-800 dark:text-slate-100">
                  {formatCurrency(expectedValue)}
                </div>
              </div>
              <div className="bg-white dark:bg-slate-800 rounded-lg p-3 text-center border border-slate-200 dark:border-slate-700">
                <div className="text-xs text-slate-500 dark:text-slate-400 mb-1">í¸ì°¨</div>
                <div className={cn(
                  'text-lg font-bold',
                  deviation < 0 ? 'text-red-600 dark:text-red-400' : 'text-emerald-600 dark:text-emerald-400'
                )}>
                  {getDeviationLabel()}
                </div>
                <div className="text-xs text-slate-500 dark:text-slate-400 mt-0.5">
                  ({getSigmaLabel()})
                </div>
              </div>
            </div>

            {/* ì˜ˆìƒ ì›ì¸ (ìˆì„ ê²½ìš°) */}
            {possibleCauses && possibleCauses.length > 0 && (
              <div className="mb-4 p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700">
                <div className="text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2">
                  ì˜ˆìƒ ì›ì¸
                </div>
                <ul className="space-y-1">
                  {possibleCauses.map((cause, index) => (
                    <li key={index} className="text-sm text-slate-700 dark:text-slate-300 flex items-start gap-2">
                      <span className="text-slate-400 mt-0.5">â€¢</span>
                      {cause}
                    </li>
                  ))}
                </ul>
              </div>
            )}

            {/* í•˜ë‹¨: ì•¡ì…˜ ë²„íŠ¼ */}
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-2">
                {onAcknowledge && (
                  <button
                    onClick={onAcknowledge}
                    className="px-3 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 text-sm font-medium rounded-lg transition-colors"
                  >
                    í™•ì¸í•¨
                  </button>
                )}
              </div>
              
              {analysisLink && (
                <Link
                  href={analysisLink}
                  className="flex items-center gap-1 px-3 py-1.5 bg-slate-800 dark:bg-slate-100 text-white dark:text-slate-800 text-sm font-medium rounded-lg hover:bg-slate-700 dark:hover:bg-slate-200 transition-colors"
                >
                  ì›ì¸ ë¶„ì„
                  <ChevronRight className="w-4 h-4" />
                </Link>
              )}
            </div>
          </div>
        </motion.div>
      )}
    </AnimatePresence>
  )
}

export default AnomalyAlert
```

### 1.4 ì‚¬ìš© ì˜ˆì‹œ

```typescript
// ëŒ€ì‹œë³´ë“œì—ì„œ ì‚¬ìš©
<AnomalyAlert
  type="critical"
  metric="GMV"
  referenceDate="2024-12-18"
  actualValue={4520000000}
  expectedValue={5910000000}
  deviation={-23.5}
  sigma={3.2}
  possibleCauses={[
    "ì¼ë³¸ ê³µíœ´ì¼ ì˜í–¥ (ì²œí™© íƒ„ìƒì¼)",
    "ê²°ì œ ì‹œìŠ¤í…œ ì¼ì‹œì  ì§€ì—° (10:00~14:00)"
  ]}
  analysisLink="/analytics?tab=anomaly&date=2024-12-18"
  onAcknowledge={() => console.log('í™•ì¸ë¨')}
  onDismiss={() => console.log('ë‹«í˜')}
/>
```

---

## 2. CountryContribution ì»´í¬ë„ŒíŠ¸

### 2.1 ì»´í¬ë„ŒíŠ¸ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|-----|------|
| **íŒŒì¼ ê²½ë¡œ** | `frontend/components/charts/CountryContribution.tsx` |
| **ìš©ë„** | **ì „ì¼** êµ­ê°€ë³„ GMV ê¸°ì—¬ë„ ë° ì„±ì¥ ê¸°ì—¬ë„ ì‹œê°í™” |
| **ì§€í‘œ ID** | AT01 (GMV ê¸°ì—¬ë„ - êµ­ê°€ë³„) |
| **ë°ì´í„° ê¸°ì¤€** | ì „ì¼ (D-1) ë§ˆê° ë°ì´í„° |

### 2.2 Props Interface

```typescript
export interface CountryData {
  /** êµ­ê°€ ì½”ë“œ (ISO 3166-1 alpha-2) */
  countryCode: string
  
  /** êµ­ê°€ëª… */
  country: string
  
  /** êµ­ê¸° ì´ëª¨ì§€ */
  flag: string
  
  /** ì–´ì œ GMV (ì›) */
  gmv: number
  
  /** GMV ë¹„ì¤‘ (%) */
  share: number
  
  /** ì „ì¼ ëŒ€ë¹„ ì„±ì¥ë¥  (%) */
  growthDoD: number
  
  /** ì „ì£¼ ë™ì¼ ëŒ€ë¹„ ì„±ì¥ë¥  (%) */
  growthWoW: number
  
  /** ì„±ì¥ ê¸°ì—¬ë„ (%) */
  contribution: number
}

export interface CountryContributionProps extends BaseDashboardProps {
  /** êµ­ê°€ë³„ ë°ì´í„° */
  data: CountryData[]
  
  /** ì„±ì¥ ê¸°ì—¬ë„ TOP êµ­ê°€ */
  topContributors: {
    country: string
    flag: string
    contributionChange: number
    reason: string
  }[]
  
  /** ìƒì„¸ ë§í¬ */
  detailLink?: string
}
```

### 2.3 ì»´í¬ë„ŒíŠ¸ êµ¬í˜„

```typescript
'use client'

import React, { useMemo } from 'react'
import { motion } from 'framer-motion'
import { BarChart3, TrendingUp, TrendingDown, Globe, ChevronRight, Calendar } from 'lucide-react'
import { Icon } from '@/components/ui/Icon'
import { Tooltip } from '@/components/ui/Tooltip'
import { cn } from '@/lib/utils'
import { formatCurrency, formatDate } from '@/lib/formatters'
import Link from 'next/link'

const flagMap: Record<string, string> = {
  JP: 'ğŸ‡¯ğŸ‡µ',
  US: 'ğŸ‡ºğŸ‡¸',
  KR: 'ğŸ‡°ğŸ‡·',
  CN: 'ğŸ‡¨ğŸ‡³',
  TW: 'ğŸ‡¹ğŸ‡¼',
  HK: 'ğŸ‡­ğŸ‡°',
  SG: 'ğŸ‡¸ğŸ‡¬',
  OTHER: 'ğŸŒ',
}

export function CountryContribution({
  referenceDate,
  data,
  topContributors,
  detailLink,
  isLoading = false,
  className,
}: CountryContributionProps) {
  // ë°ì´í„° ì •ë ¬ (ë¹„ì¤‘ ë‚´ë¦¼ì°¨ìˆœ)
  const sortedData = useMemo(() => {
    return [...data].sort((a, b) => b.share - a.share)
  }, [data])

  // ìµœëŒ€ ë¹„ì¤‘ (í”„ë¡œê·¸ë ˆìŠ¤ ë°” ìŠ¤ì¼€ì¼ìš©)
  const maxShare = useMemo(() => {
    return Math.max(...data.map(d => d.share))
  }, [data])

  if (isLoading) {
    return (
      <div className={cn(
        'bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6',
        className
      )}>
        <div className="animate-pulse space-y-4">
          <div className="h-6 bg-slate-200 dark:bg-slate-700 rounded w-1/3"></div>
          <div className="space-y-3">
            {[1, 2, 3, 4].map(i => (
              <div key={i} className="h-12 bg-slate-200 dark:bg-slate-700 rounded"></div>
            ))}
          </div>
        </div>
      </div>
    )
  }

  return (
    <div className={cn(
      'bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 lg:p-6 shadow-sm',
      className
    )}>
      {/* í—¤ë” */}
      <div className="flex items-center justify-between mb-5">
        <div className="flex items-center gap-3">
          <div className="w-10 h-10 bg-indigo-500 rounded-xl flex items-center justify-center shadow-sm">
            <Icon icon={Globe} size="lg" className="text-white" />
          </div>
          <div>
            <h3 className="font-bold text-slate-800 dark:text-slate-100">êµ­ê°€ë³„ GMV ê¸°ì—¬ë„</h3>
            <p className="text-xs text-slate-500 dark:text-slate-400">ì–´ì œ ê¸°ì¤€ ì„±ì¥ ê¸°ì—¬ë„ ë¶„ì„</p>
          </div>
        </div>
        
        <div className="flex items-center gap-2">
          <span className="flex items-center gap-1 text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg">
            <Calendar className="w-3 h-3" />
            {formatDate(referenceDate, 'M/d')}
          </span>
          
          {detailLink && (
            <Link
              href={detailLink}
              className="text-xs text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300 font-medium"
            >
              ìƒì„¸ ë³´ê¸° â†’
            </Link>
          )}
        </div>
      </div>

      {/* êµ­ê°€ë³„ í”„ë¡œê·¸ë ˆìŠ¤ ë°” */}
      <div className="space-y-3 mb-6">
        {sortedData.map((item, index) => (
          <motion.div
            key={item.countryCode}
            initial={{ opacity: 0, x: -20 }}
            animate={{ opacity: 1, x: 0 }}
            transition={{ duration: 0.3, delay: index * 0.05 }}
            className="group"
          >
            <div className="flex items-center justify-between mb-1.5">
              <div className="flex items-center gap-2">
                <span className="text-lg">{item.flag || flagMap[item.countryCode] || 'ğŸŒ'}</span>
                <span className="text-sm font-medium text-slate-700 dark:text-slate-300">
                  {item.country}
                </span>
              </div>
              <div className="flex items-center gap-3">
                <Tooltip content={`ì–´ì œ GMV: ${formatCurrency(item.gmv)}`}>
                  <span className="text-sm font-bold text-slate-800 dark:text-slate-200 cursor-help">
                    {item.share.toFixed(1)}%
                  </span>
                </Tooltip>
                <span className={cn(
                  'text-xs font-medium flex items-center gap-0.5',
                  item.growthDoD >= 0 ? 'text-emerald-600 dark:text-emerald-400' : 'text-red-600 dark:text-red-400'
                )}>
                  {item.growthDoD >= 0 ? (
                    <TrendingUp className="w-3 h-3" />
                  ) : (
                    <TrendingDown className="w-3 h-3" />
                  )}
                  {item.growthDoD >= 0 ? '+' : ''}{item.growthDoD.toFixed(1)}%
                </span>
              </div>
            </div>
            
            {/* í”„ë¡œê·¸ë ˆìŠ¤ ë°” */}
            <div className="h-2.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden">
              <motion.div
                initial={{ width: 0 }}
                animate={{ width: `${(item.share / maxShare) * 100}%` }}
                transition={{ duration: 0.5, delay: index * 0.05 }}
                className="h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full"
              />
            </div>
          </motion.div>
        ))}
      </div>

      {/* ì–´ì œ ì„±ì¥ ê¸°ì—¬ë„ TOP */}
      <div className="pt-4 border-t border-slate-200 dark:border-slate-700">
        <div className="flex items-center gap-2 mb-3">
          <Icon icon={BarChart3} size="sm" className="text-slate-500 dark:text-slate-400" />
          <span className="text-sm font-semibold text-slate-700 dark:text-slate-300">
            ì–´ì œ ì„±ì¥ ê¸°ì—¬ë„ TOP
          </span>
        </div>
        
        <div className="space-y-2">
          {topContributors.map((item, index) => (
            <div
              key={index}
              className="flex items-center justify-between p-2.5 bg-slate-50 dark:bg-slate-700/50 rounded-lg"
            >
              <div className="flex items-center gap-2">
                <span className={cn(
                  'w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold',
                  index === 0 ? 'bg-amber-400 text-amber-900' :
                  index === 1 ? 'bg-slate-300 text-slate-700' :
                  'bg-orange-300 text-orange-800'
                )}>
                  {index + 1}
                </span>
                <span className="text-sm">{item.flag}</span>
                <span className="text-sm font-medium text-slate-700 dark:text-slate-300">
                  {item.country}
                </span>
              </div>
              <div className="flex items-center gap-2">
                <span className={cn(
                  'text-sm font-bold',
                  item.contributionChange >= 0 ? 'text-emerald-600 dark:text-emerald-400' : 'text-red-600 dark:text-red-400'
                )}>
                  {item.contributionChange >= 0 ? '+' : ''}{item.contributionChange.toFixed(1)}%p
                </span>
                <Tooltip content={item.reason}>
                  <span className="text-xs text-slate-500 dark:text-slate-400 cursor-help">
                    ê¸°ì—¬
                  </span>
                </Tooltip>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  )
}

export default CountryContribution
```

---

## 3. GrowthBadges ì»´í¬ë„ŒíŠ¸

### 3.1 ì»´í¬ë„ŒíŠ¸ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|-----|------|
| **íŒŒì¼ ê²½ë¡œ** | `frontend/components/ui/GrowthBadges.tsx` |
| **ìš©ë„** | KPI ì¹´ë“œ ë‚´ ë‹¤ì¤‘ ê¸°ê°„ ì„±ì¥ë¥  ë°°ì§€ í‘œì‹œ |
| **ì§€í‘œ ID** | T01+ (GMV ì„±ì¥ë¥  í™•ì¥) |
| **ë¹„êµ ê¸°ì¤€** | ëª¨ë‘ "ì–´ì œ" ê¸°ì¤€ìœ¼ë¡œ ë¹„êµ |

### 3.2 Props Interface

```typescript
export interface GrowthBadgesProps {
  /** ì „ì¼ ëŒ€ë¹„ ì„±ì¥ë¥  (DoD) - ì–´ì œ vs ê·¸ì €ê»˜ */
  dod?: number
  
  /** ì „ì£¼ ë™ì¼ ëŒ€ë¹„ ì„±ì¥ë¥  (WoW) - ì–´ì œ vs 7ì¼ ì „ */
  wow?: number
  
  /** ì „ì›” ë™ê¸° ëŒ€ë¹„ ì„±ì¥ë¥  (MoM) - ì–´ì œ vs 30ì¼ ì „ */
  mom?: number
  
  /** ì „ë…„ ë™ê¸° ëŒ€ë¹„ ì„±ì¥ë¥  (YoY) - ì–´ì œ vs 365ì¼ ì „ */
  yoy?: number
  
  /** í‘œì‹œí•  ë°°ì§€ ê°œìˆ˜ (ê¸°ë³¸: 2) */
  maxBadges?: number
  
  /** í¬ê¸° */
  size?: 'sm' | 'md'
  
  /** ì¶”ê°€ í´ë˜ìŠ¤ */
  className?: string
}
```

### 3.3 ì»´í¬ë„ŒíŠ¸ êµ¬í˜„

```typescript
'use client'

import React from 'react'
import { TrendingUp, TrendingDown, Minus } from 'lucide-react'
import { cn } from '@/lib/utils'
import { Tooltip } from './Tooltip'

const badgeStyles = {
  dod: {
    bg: 'bg-slate-100 dark:bg-slate-700',
    text: 'text-slate-700 dark:text-slate-300',
    label: 'ì „ì¼ë¹„',
    tooltip: 'ì–´ì œ vs ê·¸ì €ê»˜',
  },
  wow: {
    bg: 'bg-blue-100 dark:bg-blue-900/30',
    text: 'text-blue-700 dark:text-blue-300',
    label: 'ì „ì£¼ë¹„',
    tooltip: 'ì–´ì œ vs 7ì¼ ì „',
  },
  mom: {
    bg: 'bg-purple-100 dark:bg-purple-900/30',
    text: 'text-purple-700 dark:text-purple-300',
    label: 'ì „ì›”ë¹„',
    tooltip: 'ì–´ì œ vs 30ì¼ ì „',
  },
  yoy: {
    bg: 'bg-amber-100 dark:bg-amber-900/30',
    text: 'text-amber-700 dark:text-amber-300',
    label: 'ì „ë…„ë¹„',
    tooltip: 'ì–´ì œ vs 365ì¼ ì „',
  },
}

const sizeStyles = {
  sm: 'text-[10px] px-1.5 py-0.5 gap-0.5',
  md: 'text-xs px-2 py-1 gap-1',
}

export function GrowthBadges({
  dod,
  wow,
  mom,
  yoy,
  maxBadges = 2,
  size = 'sm',
  className,
}: GrowthBadgesProps) {
  const badges: { key: keyof typeof badgeStyles; value: number }[] = []
  
  // ìš°ì„ ìˆœìœ„: ì „ì¼ë¹„ â†’ ì „ì£¼ë¹„ â†’ ì „ì›”ë¹„ â†’ ì „ë…„ë¹„
  if (dod !== undefined) badges.push({ key: 'dod', value: dod })
  if (wow !== undefined) badges.push({ key: 'wow', value: wow })
  if (mom !== undefined) badges.push({ key: 'mom', value: mom })
  if (yoy !== undefined) badges.push({ key: 'yoy', value: yoy })

  const displayBadges = badges.slice(0, maxBadges)

  const formatValue = (value: number) => {
    const prefix = value > 0 ? '+' : ''
    return `${prefix}${value.toFixed(1)}%`
  }

  const getTrendIcon = (value: number) => {
    if (value > 0) return TrendingUp
    if (value < 0) return TrendingDown
    return Minus
  }

  const getTrendColor = (value: number) => {
    if (value > 0) return 'text-emerald-600 dark:text-emerald-400'
    if (value < 0) return 'text-red-600 dark:text-red-400'
    return 'text-slate-500 dark:text-slate-400'
  }

  if (displayBadges.length === 0) return null

  return (
    <div className={cn('flex flex-wrap items-center gap-1', className)}>
      {displayBadges.map(({ key, value }) => {
        const style = badgeStyles[key]
        const TrendIcon = getTrendIcon(value)
        
        return (
          <Tooltip key={key} content={`${style.tooltip}: ${formatValue(value)}`}>
            <div className={cn(
              'inline-flex items-center rounded-full font-medium cursor-help',
              style.bg,
              style.text,
              sizeStyles[size]
            )}>
              <span className="font-semibold">{style.label}</span>
              <TrendIcon className={cn(
                'flex-shrink-0',
                size === 'sm' ? 'w-2.5 h-2.5' : 'w-3 h-3',
                getTrendColor(value)
              )} />
              <span className={getTrendColor(value)}>
                {formatValue(value)}
              </span>
            </div>
          </Tooltip>
        )
      })}
    </div>
  )
}

export default GrowthBadges
```

### 3.4 EnhancedKPICardì— í†µí•©

```typescript
// EnhancedKPICard.tsx props í™•ì¥
import { GrowthBadges } from './GrowthBadges'

export interface EnhancedKPICardProps {
  // ... ê¸°ì¡´ props
  
  /** ê¸°ì¤€ì¼ (ì–´ì œ) */
  referenceDate?: string
  
  /** í™•ì¥ ì„±ì¥ë¥  ì§€í‘œ */
  growthMetrics?: {
    dod?: number   // ì „ì¼ ëŒ€ë¹„
    wow?: number   // ì „ì£¼ ë™ì¼ ëŒ€ë¹„
    mom?: number   // ì „ì›” ë™ê¸° ëŒ€ë¹„
    yoy?: number   // ì „ë…„ ë™ê¸° ëŒ€ë¹„
  }
}

// ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì‚¬ìš©
{referenceDate && (
  <div className="text-xs text-slate-500 dark:text-slate-400 mb-1">
    {formatDate(referenceDate, 'M/d')} ê¸°ì¤€
  </div>
)}

{growthMetrics && (
  <div className="mt-2">
    <GrowthBadges
      dod={growthMetrics.dod}
      wow={growthMetrics.wow}
      mom={growthMetrics.mom}
      yoy={growthMetrics.yoy}
      maxBadges={2}
      size="sm"
    />
  </div>
)}
```

---

## 4. DailyChangeSummary ì»´í¬ë„ŒíŠ¸

### 4.1 ì»´í¬ë„ŒíŠ¸ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|-----|------|
| **íŒŒì¼ ê²½ë¡œ** | `frontend/components/ui/DailyChangeSummary.tsx` |
| **ìš©ë„** | **ì–´ì œ** ë°œìƒí•œ ì£¼ìš” ë³€í™” ì‚¬í•­ ìš”ì•½ í‘œì‹œ |
| **ì§€í‘œ ID** | TR03 (ì „ì¼ ì£¼ìš” ë³€í™” ìš”ì•½) |
| **ë°ì´í„° ê¸°ì¤€** | ì „ì¼ (D-1) ë§ˆê° ë°ì´í„° |

### 4.2 Props Interface

```typescript
export interface DailyChange {
  /** ì‹¬ê°ë„ */
  severity: 'critical' | 'warning' | 'positive' | 'neutral'
  
  /** ì§€í‘œëª… */
  metric: string
  
  /** ì´ì „ ê°’ (ê·¸ì €ê»˜) */
  previousValue: number
  
  /** í˜„ì¬ ê°’ (ì–´ì œ) */
  currentValue: number
  
  /** ë³€í™”ìœ¨ (%) */
  changePercent: number
  
  /** ë³€í™”ëŸ‰ (ì ˆëŒ€ê°’) */
  changeAbsolute: number
  
  /** ì„¤ëª… */
  description: string
  
  /** í•„ìš” ì•¡ì…˜ */
  actionRequired?: string
  
  /** ìƒì„¸ ë§í¬ */
  link?: string
}

export interface DailyChangeSummaryProps extends BaseDashboardProps {
  /** ë³€í™” ëª©ë¡ */
  changes: DailyChange[]
  
  /** ìµœëŒ€ í‘œì‹œ í•­ëª© ìˆ˜ */
  maxItems?: number
  
  /** ìƒì„¸ ë¶„ì„ ë§í¬ */
  detailLink?: string
}
```

### 4.3 ì»´í¬ë„ŒíŠ¸ êµ¬í˜„

```typescript
'use client'

import React, { useMemo } from 'react'
import { motion } from 'framer-motion'
import { AlertTriangle, AlertCircle, TrendingUp, Minus, ChevronRight, Calendar, ClipboardList } from 'lucide-react'
import { Icon } from './Icon'
import { cn } from '@/lib/utils'
import { formatCurrency, formatDate, formatNumber } from '@/lib/formatters'
import Link from 'next/link'

const severityConfig = {
  critical: {
    icon: AlertTriangle,
    color: 'text-red-600 dark:text-red-400',
    bg: 'bg-red-50 dark:bg-red-900/20',
    border: 'border-l-red-500',
    label: 'ê¸´ê¸‰',
  },
  warning: {
    icon: AlertCircle,
    color: 'text-amber-600 dark:text-amber-400',
    bg: 'bg-amber-50 dark:bg-amber-900/20',
    border: 'border-l-amber-500',
    label: 'ì£¼ëª©',
  },
  positive: {
    icon: TrendingUp,
    color: 'text-emerald-600 dark:text-emerald-400',
    bg: 'bg-emerald-50 dark:bg-emerald-900/20',
    border: 'border-l-emerald-500',
    label: 'ê¸ì •',
  },
  neutral: {
    icon: Minus,
    color: 'text-slate-600 dark:text-slate-400',
    bg: 'bg-slate-50 dark:bg-slate-800',
    border: 'border-l-slate-400',
    label: 'ì°¸ê³ ',
  },
}

export function DailyChangeSummary({
  referenceDate,
  changes,
  maxItems = 5,
  detailLink,
  isLoading = false,
  className,
}: DailyChangeSummaryProps) {
  // ì‹¬ê°ë„ ìˆœìœ¼ë¡œ ì •ë ¬
  const sortedChanges = useMemo(() => {
    const severityOrder = { critical: 0, warning: 1, positive: 2, neutral: 3 }
    return [...changes]
      .sort((a, b) => severityOrder[a.severity] - severityOrder[b.severity])
      .slice(0, maxItems)
  }, [changes, maxItems])

  // ì‹¬ê°ë„ë³„ ê·¸ë£¹í™”
  const groupedChanges = useMemo(() => {
    return sortedChanges.reduce((acc, change) => {
      if (!acc[change.severity]) acc[change.severity] = []
      acc[change.severity].push(change)
      return acc
    }, {} as Record<string, DailyChange[]>)
  }, [sortedChanges])

  if (isLoading) {
    return (
      <div className={cn(
        'bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6',
        className
      )}>
        <div className="animate-pulse space-y-4">
          <div className="h-6 bg-slate-200 dark:bg-slate-700 rounded w-1/3"></div>
          <div className="space-y-3">
            {[1, 2, 3].map(i => (
              <div key={i} className="h-16 bg-slate-200 dark:bg-slate-700 rounded"></div>
            ))}
          </div>
        </div>
      </div>
    )
  }

  return (
    <div className={cn(
      'bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 lg:p-6 shadow-sm',
      className
    )}>
      {/* í—¤ë” */}
      <div className="flex items-center justify-between mb-5">
        <div className="flex items-center gap-3">
          <div className="w-10 h-10 bg-slate-600 rounded-xl flex items-center justify-center shadow-sm">
            <Icon icon={ClipboardList} size="lg" className="text-white" />
          </div>
          <div>
            <h3 className="font-bold text-slate-800 dark:text-slate-100">ì–´ì œ ì£¼ìš” ë³€í™”</h3>
            <p className="text-xs text-slate-500 dark:text-slate-400">
              ì „ì¼ ëŒ€ë¹„ ì£¼ìš” ì§€í‘œ ë³€ë™ ì‚¬í•­
            </p>
          </div>
        </div>
        
        <span className="flex items-center gap-1 text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg">
          <Calendar className="w-3 h-3" />
          {formatDate(referenceDate, 'M/d')}
        </span>
      </div>

      {/* ë³€í™” ëª©ë¡ */}
      <div className="space-y-4">
        {(['critical', 'warning', 'positive', 'neutral'] as const).map(severity => {
          const items = groupedChanges[severity]
          if (!items || items.length === 0) return null
          
          const config = severityConfig[severity]
          
          return (
            <div key={severity}>
              <div className="flex items-center gap-2 mb-2">
                <span className={cn('text-xs font-semibold', config.color)}>
                  {config.label}
                </span>
              </div>
              
              <div className="space-y-2">
                {items.map((change, index) => (
                  <motion.div
                    key={`${change.metric}-${index}`}
                    initial={{ opacity: 0, x: -10 }}
                    animate={{ opacity: 1, x: 0 }}
                    transition={{ duration: 0.2, delay: index * 0.05 }}
                    className={cn(
                      'p-3 rounded-lg border-l-4',
                      config.bg,
                      config.border
                    )}
                  >
                    <div className="flex items-start justify-between">
                      <div className="flex-1">
                        <div className="flex items-center gap-2 mb-1">
                          <span className="text-sm font-medium text-slate-800 dark:text-slate-200">
                            {change.metric}
                          </span>
                          <span className={cn(
                            'text-xs font-bold',
                            change.changePercent >= 0 
                              ? 'text-emerald-600 dark:text-emerald-400' 
                              : 'text-red-600 dark:text-red-400'
                          )}>
                            {change.changePercent >= 0 ? '+' : ''}{change.changePercent.toFixed(1)}%
                          </span>
                        </div>
                        <p className="text-xs text-slate-600 dark:text-slate-400">
                          {change.description}
                        </p>
                        {change.actionRequired && (
                          <p className="text-xs text-amber-600 dark:text-amber-400 mt-1 font-medium">
                            â†’ {change.actionRequired}
                          </p>
                        )}
                      </div>
                      
                      {change.link && (
                        <Link
                          href={change.link}
                          className="p-1.5 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors"
                        >
                          <ChevronRight className="w-4 h-4 text-slate-400" />
                        </Link>
                      )}
                    </div>
                  </motion.div>
                ))}
              </div>
            </div>
          )
        })}
      </div>

      {/* ìƒì„¸ ë³´ê¸° ë§í¬ */}
      {detailLink && (
        <div className="mt-4 pt-4 border-t border-slate-200 dark:border-slate-700">
          <Link
            href={detailLink}
            className="flex items-center justify-center gap-1 text-sm text-slate-600 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 font-medium"
          >
            ìƒì„¸ ë¶„ì„ ë³´ê¸°
            <ChevronRight className="w-4 h-4" />
          </Link>
        </div>
      )}
    </div>
  )
}

export default DailyChangeSummary
```

---

## 5. WeeklyTrendSummary ì»´í¬ë„ŒíŠ¸

### 5.1 ì»´í¬ë„ŒíŠ¸ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|-----|------|
| **íŒŒì¼ ê²½ë¡œ** | `frontend/components/ui/WeeklyTrendSummary.tsx` |
| **ìš©ë„** | **ìµœê·¼ 7ì¼** ì£¼ìš” ì§€í‘œ íŠ¸ë Œë“œ ìš”ì•½ |
| **ì§€í‘œ ID** | WK01 (ì£¼ê°„ íŠ¸ë Œë“œ ìš”ì•½) |
| **ë°ì´í„° ê¸°ì¤€** | ì–´ì œë¶€í„° 7ì¼ ì „ê¹Œì§€ |

### 5.2 Props Interface

```typescript
export interface WeeklyMetric {
  /** ì§€í‘œëª… */
  name: string
  
  /** 7ì¼ê°„ ê°’ (ìµœì‹ ìˆœ) */
  values: number[]
  
  /** íŠ¸ë Œë“œ ë°©í–¥ */
  trend: 'up' | 'down' | 'stable'
  
  /** ì£¼ê°„ ë³€í™”ìœ¨ (%) */
  changePercent: number
  
  /** ìŠ¤íŒŒí¬ë¼ì¸ìš© ì •ê·œí™” ê°’ (0~1) */
  sparkline: number[]
}

export interface WeeklyTrendSummaryProps extends BaseDashboardProps {
  /** ì£¼ê°„ ë²”ìœ„ */
  weekRange: {
    start: string  // "12/12"
    end: string    // "12/18"
  }
  
  /** ì§€í‘œë³„ ë°ì´í„° */
  metrics: WeeklyMetric[]
  
  /** ì£¼ê°„ í•˜ì´ë¼ì´íŠ¸ */
  highlights: string[]
}
```

### 5.3 ì»´í¬ë„ŒíŠ¸ êµ¬í˜„

```typescript
'use client'

import React from 'react'
import { motion } from 'framer-motion'
import { TrendingUp, TrendingDown, Minus, Calendar, Sparkles } from 'lucide-react'
import { Icon } from './Icon'
import { cn } from '@/lib/utils'

// ë¯¸ë‹ˆ ìŠ¤íŒŒí¬ë¼ì¸ ì»´í¬ë„ŒíŠ¸
function Sparkline({ data, trend }: { data: number[]; trend: 'up' | 'down' | 'stable' }) {
  const height = 24
  const width = 60
  const padding = 2
  
  const min = Math.min(...data)
  const max = Math.max(...data)
  const range = max - min || 1
  
  const points = data.map((value, index) => {
    const x = padding + (index / (data.length - 1)) * (width - 2 * padding)
    const y = height - padding - ((value - min) / range) * (height - 2 * padding)
    return `${x},${y}`
  }).join(' ')
  
  const strokeColor = trend === 'up' ? '#10b981' : trend === 'down' ? '#ef4444' : '#64748b'
  
  return (
    <svg width={width} height={height} className="overflow-visible">
      <polyline
        points={points}
        fill="none"
        stroke={strokeColor}
        strokeWidth="2"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
    </svg>
  )
}

export function WeeklyTrendSummary({
  referenceDate,
  weekRange,
  metrics,
  highlights,
  isLoading = false,
  className,
}: WeeklyTrendSummaryProps) {
  const getTrendIcon = (trend: 'up' | 'down' | 'stable') => {
    switch (trend) {
      case 'up': return TrendingUp
      case 'down': return TrendingDown
      default: return Minus
    }
  }
  
  const getTrendColor = (trend: 'up' | 'down' | 'stable') => {
    switch (trend) {
      case 'up': return 'text-emerald-600 dark:text-emerald-400'
      case 'down': return 'text-red-600 dark:text-red-400'
      default: return 'text-slate-500 dark:text-slate-400'
    }
  }
  
  const getTrendLabel = (trend: 'up' | 'down' | 'stable') => {
    switch (trend) {
      case 'up': return 'â†—'
      case 'down': return 'â†˜'
      default: return 'â†’'
    }
  }

  if (isLoading) {
    return (
      <div className={cn(
        'bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6',
        className
      )}>
        <div className="animate-pulse space-y-4">
          <div className="h-6 bg-slate-200 dark:bg-slate-700 rounded w-1/3"></div>
          <div className="grid grid-cols-4 gap-3">
            {[1, 2, 3, 4].map(i => (
              <div key={i} className="h-20 bg-slate-200 dark:bg-slate-700 rounded"></div>
            ))}
          </div>
        </div>
      </div>
    )
  }

  return (
    <div className={cn(
      'bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 lg:p-6 shadow-sm',
      className
    )}>
      {/* í—¤ë” */}
      <div className="flex items-center justify-between mb-5">
        <div className="flex items-center gap-3">
          <div className="w-10 h-10 bg-cyan-500 rounded-xl flex items-center justify-center shadow-sm">
            <Icon icon={TrendingUp} size="lg" className="text-white" />
          </div>
          <div>
            <h3 className="font-bold text-slate-800 dark:text-slate-100">ì£¼ê°„ íŠ¸ë Œë“œ</h3>
            <p className="text-xs text-slate-500 dark:text-slate-400">
              ìµœê·¼ 7ì¼ ì§€í‘œ íë¦„
            </p>
          </div>
        </div>
        
        <span className="flex items-center gap-1 text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg">
          <Calendar className="w-3 h-3" />
          {weekRange.start} ~ {weekRange.end}
        </span>
      </div>

      {/* ì§€í‘œ ì¹´ë“œ ê·¸ë¦¬ë“œ */}
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-3 mb-5">
        {metrics.map((metric, index) => {
          const TrendIcon = getTrendIcon(metric.trend)
          
          return (
            <motion.div
              key={metric.name}
              initial={{ opacity: 0, y: 10 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ duration: 0.2, delay: index * 0.05 }}
              className="p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl"
            >
              <div className="flex items-center justify-between mb-2">
                <span className="text-xs font-medium text-slate-600 dark:text-slate-400">
                  {metric.name}
                </span>
                <span className={cn(
                  'text-xs font-bold flex items-center gap-0.5',
                  getTrendColor(metric.trend)
                )}>
                  {getTrendLabel(metric.trend)}
                  {metric.changePercent >= 0 ? '+' : ''}{metric.changePercent.toFixed(1)}%
                </span>
              </div>
              
              <div className="flex items-center justify-center">
                <Sparkline data={metric.sparkline} trend={metric.trend} />
              </div>
            </motion.div>
          )
        })}
      </div>

      {/* ì£¼ê°„ í•˜ì´ë¼ì´íŠ¸ */}
      {highlights.length > 0 && (
        <div className="p-4 bg-cyan-50 dark:bg-cyan-900/20 rounded-xl border border-cyan-100 dark:border-cyan-800">
          <div className="flex items-center gap-2 mb-2">
            <Icon icon={Sparkles} size="sm" className="text-cyan-600 dark:text-cyan-400" />
            <span className="text-sm font-semibold text-cyan-700 dark:text-cyan-300">
              ì£¼ê°„ í•˜ì´ë¼ì´íŠ¸
            </span>
          </div>
          <ul className="space-y-1.5">
            {highlights.map((highlight, index) => (
              <li key={index} className="text-xs text-cyan-600 dark:text-cyan-400 flex items-start gap-2">
                <span className="text-cyan-400 mt-0.5">â€¢</span>
                {highlight}
              </li>
            ))}
          </ul>
        </div>
      )}
    </div>
  )
}

export default WeeklyTrendSummary
```

---

## 6. SeasonPatternOverlay ì»´í¬ë„ŒíŠ¸

### 6.1 ì»´í¬ë„ŒíŠ¸ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|-----|------|
| **íŒŒì¼ ê²½ë¡œ** | `frontend/components/charts/SeasonPatternOverlay.tsx` |
| **ìš©ë„** | GMV íŠ¸ë Œë“œ ì°¨íŠ¸ì— ì‹œì¦Œ íŒ¨í„´ ì˜¤ë²„ë ˆì´ í‘œì‹œ |
| **ì§€í‘œ ID** | PR02 (ì‹œì¦Œ íŒ¨í„´) |

### 6.2 GMVTrendChartì— í†µí•© ë°©ë²•

```typescript
// GMVTrendChart.tsx props í™•ì¥
export interface SeasonPattern {
  type: 'peak' | 'trough' | 'event'
  label: string
  emoji: string
  startDate: string
  endDate: string
  yoyComparison: number  // ì „ë…„ ë™ê¸° ëŒ€ë¹„ (%)
}

export interface GMVTrendChartProps {
  // ... ê¸°ì¡´ props
  
  /** ì‹œì¦Œ íŒ¨í„´ ë°ì´í„° */
  seasonPatterns?: SeasonPattern[]
  
  /** ì‹œì¦Œ íŒ¨í„´ í‘œì‹œ ì—¬ë¶€ */
  showSeasonPatterns?: boolean
  
  /** ì „ë…„ ë™ê¸° ë°ì´í„° */
  lastYearData?: { date: string; value: number }[]
  
  /** ì „ë…„ ë™ê¸° ë¼ì¸ í‘œì‹œ ì—¬ë¶€ */
  showYoYComparison?: boolean
}

// Recharts ReferenceAreaë¥¼ ì‚¬ìš©í•œ ì˜¤ë²„ë ˆì´
{showSeasonPatterns && seasonPatterns?.map((pattern, index) => (
  <ReferenceArea
    key={index}
    x1={pattern.startDate}
    x2={pattern.endDate}
    fill={
      pattern.type === 'peak' ? '#10b98110' :
      pattern.type === 'trough' ? '#f59e0b10' :
      '#3b82f610'
    }
    strokeOpacity={0}
    label={{
      value: `${pattern.emoji} ${pattern.label}`,
      position: 'top',
      fill: '#64748b',
      fontSize: 11,
    }}
  />
))}

// ì „ë…„ ë™ê¸° ë¹„êµ ë¼ì¸
{showYoYComparison && lastYearData && (
  <Line
    type="monotone"
    data={lastYearData}
    dataKey="value"
    stroke="#94a3b8"
    strokeWidth={1}
    strokeDasharray="5 5"
    dot={false}
    name="ì „ë…„ ë™ê¸°"
  />
)}
```

---

## 7. MonthlyForecast ì»´í¬ë„ŒíŠ¸

### 7.1 ì»´í¬ë„ŒíŠ¸ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|-----|------|
| **íŒŒì¼ ê²½ë¡œ** | `frontend/components/charts/MonthlyForecast.tsx` |
| **ìš©ë„** | **ê¸ˆì›”** GMV ì˜ˆì¸¡ê°’ ë° ëª©í‘œ ë‹¬ì„±ë¥  ì‹œê°í™” |
| **ì§€í‘œ ID** | F01 (GMV ì˜ˆì¸¡) |
| **ë°ì´í„° ê¸°ì¤€** | ì–´ì œê¹Œì§€ì˜ ì‹¤ì  + ë‚¨ì€ ê¸°ê°„ ì˜ˆì¸¡ |

### 7.2 Props Interface

```typescript
export interface MonthlyForecastProps extends BaseDashboardProps {
  /** í˜„ì¬ ì›” */
  currentMonth: string           // "2024-12"
  
  /** í˜„ì¬ê¹Œì§€ ì‹¤ì  */
  actualToDate: number
  
  /** ê²½ê³¼ ì¼ìˆ˜ */
  daysElapsed: number
  
  /** ì´ ì¼ìˆ˜ */
  totalDays: number
  
  /** ì˜ˆì¸¡ ì •ë³´ */
  forecast: {
    predicted: number            // ì˜ˆì¸¡ GMV
    lowerBound: number           // í•˜í•œ
    upperBound: number           // ìƒí•œ
    confidence: number           // ì‹ ë¢°ë„ (%)
  }
  
  /** ì›” ëª©í‘œ */
  target: number
  
  /** ì˜ˆì¸¡ ë‹¬ì„±ë¥  */
  achievementRate: number
  
  /** ì˜ˆì¸¡ ê·¼ê±° */
  factors: {
    avgDailyGMV: number          // ìµœê·¼ 7ì¼ ì¼í‰ê· 
    seasonWeight: number         // ì‹œì¦Œ ê°€ì¤‘ì¹˜ (%)
    yoyGrowth: number            // ì „ë…„ ë™ì›” ì„±ì¥ë¥  (%)
  }
  
  /** ê¶Œì¥ ì•¡ì…˜ */
  recommendation?: string
}
```

### 7.3 ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ (í•µì‹¬ ë¶€ë¶„)

```typescript
'use client'

import React from 'react'
import { motion } from 'framer-motion'
import { Target, TrendingUp, AlertTriangle, Calendar, Sparkles } from 'lucide-react'
import { Icon } from '@/components/ui/Icon'
import { cn } from '@/lib/utils'
import { formatCurrency, formatDate } from '@/lib/formatters'

export function MonthlyForecast({
  referenceDate,
  currentMonth,
  actualToDate,
  daysElapsed,
  totalDays,
  forecast,
  target,
  achievementRate,
  factors,
  recommendation,
  isLoading = false,
  className,
}: MonthlyForecastProps) {
  const progressPercent = (daysElapsed / totalDays) * 100
  const actualPercent = (actualToDate / target) * 100
  const forecastPercent = (forecast.predicted / target) * 100
  
  const isOnTrack = achievementRate >= 100
  const isAtRisk = achievementRate < 90

  if (isLoading) {
    return (
      <div className={cn(
        'bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6',
        className
      )}>
        <div className="animate-pulse space-y-4">
          <div className="h-6 bg-slate-200 dark:bg-slate-700 rounded w-1/3"></div>
          <div className="h-8 bg-slate-200 dark:bg-slate-700 rounded"></div>
          <div className="h-24 bg-slate-200 dark:bg-slate-700 rounded"></div>
        </div>
      </div>
    )
  }

  return (
    <div className={cn(
      'bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 lg:p-6 shadow-sm',
      className
    )}>
      {/* í—¤ë” */}
      <div className="flex items-center justify-between mb-5">
        <div className="flex items-center gap-3">
          <div className="w-10 h-10 bg-violet-500 rounded-xl flex items-center justify-center shadow-sm">
            <Icon icon={Target} size="lg" className="text-white" />
          </div>
          <div>
            <h3 className="font-bold text-slate-800 dark:text-slate-100">
              {currentMonth.split('-')[1]}ì›” GMV ì˜ˆì¸¡
            </h3>
            <p className="text-xs text-slate-500 dark:text-slate-400">
              ì–´ì œê¹Œì§€ ì‹¤ì  ê¸°ë°˜ ì˜ˆì¸¡
            </p>
          </div>
        </div>
        
        <span className="flex items-center gap-1 text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg">
          <Calendar className="w-3 h-3" />
          {formatDate(referenceDate, 'M/d')} ê¸°ì¤€
        </span>
      </div>

      {/* í”„ë¡œê·¸ë ˆìŠ¤ ë°” */}
      <div className="mb-5">
        <div className="flex items-center justify-between mb-2">
          <span className="text-xs text-slate-500 dark:text-slate-400">
            í˜„ì¬ê¹Œì§€ ì‹¤ì  ({daysElapsed}/{totalDays}ì¼)
          </span>
          <span className="text-xs font-medium text-slate-700 dark:text-slate-300">
            {actualPercent.toFixed(1)}%
          </span>
        </div>
        
        <div className="h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden relative">
          {/* í˜„ì¬ ì‹¤ì  */}
          <motion.div
            initial={{ width: 0 }}
            animate={{ width: `${Math.min(actualPercent, 100)}%` }}
            transition={{ duration: 0.5 }}
            className="h-full bg-gradient-to-r from-violet-500 to-purple-500 rounded-full"
          />
          
          {/* ì˜ˆì¸¡ ì˜ì—­ */}
          <motion.div
            initial={{ width: 0 }}
            animate={{ width: `${Math.min(forecastPercent - actualPercent, 100 - actualPercent)}%` }}
            transition={{ duration: 0.5, delay: 0.3 }}
            className="h-full bg-violet-300/50 dark:bg-violet-400/30 rounded-r-full absolute top-0"
            style={{ left: `${actualPercent}%` }}
          />
          
          {/* 100% ê¸°ì¤€ì„  */}
          <div className="absolute top-0 bottom-0 w-0.5 bg-slate-400 dark:bg-slate-500" style={{ left: '100%' }} />
        </div>
        
        <div className="flex items-center justify-between mt-2">
          <span className="text-sm font-bold text-slate-800 dark:text-slate-100">
            {formatCurrency(actualToDate)}
          </span>
          <span className="text-sm text-slate-500 dark:text-slate-400">
            ì˜ˆì¸¡: {formatCurrency(forecast.predicted)}
          </span>
          <span className="text-sm text-slate-500 dark:text-slate-400">
            ëª©í‘œ: {formatCurrency(target)}
          </span>
        </div>
      </div>

      {/* í•µì‹¬ ì§€í‘œ */}
      <div className="grid grid-cols-3 gap-3 mb-5">
        <div className="p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl text-center">
          <div className="text-xs text-slate-500 dark:text-slate-400 mb-1">ì›” ëª©í‘œ</div>
          <div className="text-sm font-bold text-slate-800 dark:text-slate-100">
            {formatCurrency(target)}
          </div>
        </div>
        <div className="p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl text-center">
          <div className="text-xs text-slate-500 dark:text-slate-400 mb-1">ì˜ˆì¸¡ ë‹¬ì„±ë¥ </div>
          <div className={cn(
            'text-sm font-bold',
            isOnTrack ? 'text-emerald-600 dark:text-emerald-400' :
            isAtRisk ? 'text-red-600 dark:text-red-400' :
            'text-amber-600 dark:text-amber-400'
          )}>
            {achievementRate.toFixed(1)}%
          </div>
        </div>
        <div className="p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl text-center">
          <div className="text-xs text-slate-500 dark:text-slate-400 mb-1">ì‹ ë¢°ë„</div>
          <div className="text-sm font-bold text-slate-800 dark:text-slate-100">
            {forecast.confidence}%
          </div>
        </div>
      </div>

      {/* ì˜ˆì¸¡ ê·¼ê±° */}
      <div className="p-4 bg-violet-50 dark:bg-violet-900/20 rounded-xl border border-violet-100 dark:border-violet-800 mb-4">
        <div className="flex items-center gap-2 mb-2">
          <Icon icon={Sparkles} size="sm" className="text-violet-600 dark:text-violet-400" />
          <span className="text-sm font-semibold text-violet-700 dark:text-violet-300">
            ì˜ˆì¸¡ ê·¼ê±°
          </span>
        </div>
        <ul className="space-y-1.5 text-xs text-violet-600 dark:text-violet-400">
          <li className="flex items-start gap-2">
            <span className="text-violet-400 mt-0.5">â€¢</span>
            ìµœê·¼ 7ì¼ ì¼í‰ê·  GMV: {formatCurrency(factors.avgDailyGMV)}
          </li>
          <li className="flex items-start gap-2">
            <span className="text-violet-400 mt-0.5">â€¢</span>
            ì‹œì¦Œ ê°€ì¤‘ì¹˜ ì ìš©: {factors.seasonWeight >= 0 ? '+' : ''}{factors.seasonWeight}%
          </li>
          <li className="flex items-start gap-2">
            <span className="text-violet-400 mt-0.5">â€¢</span>
            ì „ë…„ ë™ì›” ì„±ì¥ë¥  ë°˜ì˜: {factors.yoyGrowth >= 0 ? '+' : ''}{factors.yoyGrowth}%
          </li>
        </ul>
      </div>

      {/* ê¶Œì¥ ì•¡ì…˜ */}
      {recommendation && (
        <div className={cn(
          'p-3 rounded-xl flex items-start gap-2',
          isOnTrack 
            ? 'bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800' 
            : 'bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800'
        )}>
          <Icon 
            icon={isOnTrack ? TrendingUp : AlertTriangle} 
            size="sm" 
            className={isOnTrack 
              ? 'text-emerald-600 dark:text-emerald-400' 
              : 'text-amber-600 dark:text-amber-400'
            } 
          />
          <span className={cn(
            'text-xs font-medium',
            isOnTrack 
              ? 'text-emerald-700 dark:text-emerald-300' 
              : 'text-amber-700 dark:text-amber-300'
          )}>
            {recommendation}
          </span>
        </div>
      )}
    </div>
  )
}

export default MonthlyForecast
```

---

## 8. API ì—”ë“œí¬ì¸íŠ¸ ëª…ì„¸

### 8.1 ì´ìƒ íƒì§€ API

```typescript
// GET /api/dashboard/anomaly-detection
// Query: { date?: string }  // ê¸°ë³¸ê°’: ì–´ì œ

interface AnomalyDetectionResponse {
  referenceDate: string        // "2024-12-18"
  hasAnomaly: boolean
  anomalies: {
    metric: string
    type: 'critical' | 'warning' | 'positive'
    actualValue: number
    expectedValue: number
    deviation: number
    sigma: number
    possibleCauses: string[]
  }[]
}

// Backend ê³„ì‚° ë¡œì§
// 1. ìµœê·¼ 30ì¼ ë°ì´í„°ë¡œ í‰ê· /í‘œì¤€í¸ì°¨ ê³„ì‚°
// 2. ì–´ì œ ê°’ì´ Â±2Ïƒ ì´ˆê³¼ ì‹œ warning, Â±3Ïƒ ì´ˆê³¼ ì‹œ critical
// 3. +3Ïƒ ì´ˆê³¼ ì‹œ positive (ì˜ˆìƒ ì´ˆê³¼ ë‹¬ì„±)
```

### 8.2 êµ­ê°€ë³„ ê¸°ì—¬ë„ API

```typescript
// GET /api/dashboard/country-contribution
// Query: { date?: string }  // ê¸°ë³¸ê°’: ì–´ì œ

interface CountryContributionResponse {
  referenceDate: string
  data: {
    countryCode: string
    country: string
    flag: string
    gmv: number
    share: number
    growthDoD: number
    growthWoW: number
    contribution: number
  }[]
  topContributors: {
    country: string
    flag: string
    contributionChange: number
    reason: string
  }[]
  totalGMV: number
}
```

### 8.3 ì„±ì¥ë¥  í™•ì¥ API

```typescript
// GET /api/dashboard/growth-metrics
// Query: { date?: string }  // ê¸°ë³¸ê°’: ì–´ì œ

interface GrowthMetricsResponse {
  referenceDate: string
  gmv: {
    dod: number   // ì–´ì œ vs ê·¸ì €ê»˜
    wow: number   // ì–´ì œ vs 7ì¼ ì „
    mom: number   // ì–´ì œ vs 30ì¼ ì „
    yoy: number   // ì–´ì œ vs 365ì¼ ì „
  }
  orders: {
    dod: number
    wow: number
    mom: number
    yoy: number
  }
  // ... ê¸°íƒ€ KPI
}
```

### 8.4 ì „ì¼ ì£¼ìš” ë³€í™” API

```typescript
// GET /api/dashboard/daily-changes
// Query: { date?: string }  // ê¸°ë³¸ê°’: ì–´ì œ

interface DailyChangesResponse {
  referenceDate: string
  changes: {
    severity: 'critical' | 'warning' | 'positive' | 'neutral'
    metric: string
    previousValue: number
    currentValue: number
    changePercent: number
    changeAbsolute: number
    description: string
    actionRequired?: string
    link?: string
  }[]
}
```

### 8.5 ì£¼ê°„ íŠ¸ë Œë“œ API

```typescript
// GET /api/dashboard/weekly-trend
// Query: { endDate?: string }  // ê¸°ë³¸ê°’: ì–´ì œ

interface WeeklyTrendResponse {
  referenceDate: string
  weekRange: {
    start: string
    end: string
  }
  metrics: {
    name: string
    values: number[]
    trend: 'up' | 'down' | 'stable'
    changePercent: number
    sparkline: number[]
  }[]
  highlights: string[]
}
```

### 8.6 ê¸ˆì›” ì˜ˆì¸¡ API

```typescript
// GET /api/dashboard/monthly-forecast
// Query: { month?: string }  // ê¸°ë³¸ê°’: í˜„ì¬ ì›”

interface MonthlyForecastResponse {
  referenceDate: string
  currentMonth: string
  actualToDate: number
  daysElapsed: number
  totalDays: number
  forecast: {
    predicted: number
    lowerBound: number
    upperBound: number
    confidence: number
  }
  target: number
  achievementRate: number
  factors: {
    avgDailyGMV: number
    seasonWeight: number
    yoyGrowth: number
  }
  recommendation?: string
}
```

---

## ğŸ“Š êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1 (1~2ì£¼)

- [ ] `AnomalyAlert` ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ (ì „ì¼ ê¸°ì¤€ í‘œí˜„)
- [ ] `GrowthBadges` ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ (ì „ì¼ë¹„/ì „ì£¼ë¹„/ì „ì›”ë¹„/ì „ë…„ë¹„)
- [ ] `DailyChangeSummary` ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ (ì–´ì œ ì£¼ìš” ë³€í™”)
- [ ] `EnhancedKPICard`ì— `referenceDate`, `growthMetrics` props ì¶”ê°€
- [ ] Backend API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ (anomaly-detection, daily-changes, growth-metrics)

### Phase 2 (3~4ì£¼)

- [ ] `CountryContribution` ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
- [ ] `WeeklyTrendSummary` ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
- [ ] `GMVTrendChart`ì— ì‹œì¦Œ íŒ¨í„´ ì˜¤ë²„ë ˆì´ + ì „ë…„ ë™ê¸° ë¹„êµ ì¶”ê°€
- [ ] Backend API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ (country-contribution, weekly-trend, season-patterns)

### Phase 3 (5~8ì£¼)

- [ ] `MonthlyForecast` ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
- [ ] Backend ML ëª¨ë¸ êµ¬í˜„ (Prophet/ARIMA)
- [ ] AI ì¸ì‚¬ì´íŠ¸ ìë™ ìƒì„± (ì „ì¼ ê¸°ì¤€)
- [ ] Backend API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ (monthly-forecast)

---

> **ë¬¸ì„œ ì‘ì„±**: AI ìë™í™”íŒ€  
> **ìµœì¢… ì—…ë°ì´íŠ¸**: 2024-12-19 (v2.0)  
> **ì£¼ìš” ë³€ê²½ ì‚¬í•­**:
> - ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì— `referenceDate` (ê¸°ì¤€ì¼) ì¶”ê°€
> - í‘œí˜„ì„ "ì–´ì œ ê¸°ì¤€", "ì „ì¼ ëŒ€ë¹„" ë“±ìœ¼ë¡œ í†µì¼
> - ì‹¤ì‹œê°„ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ ì œê±° (SalesAlertBanner â†’ AnomalyAlertë¡œ í†µí•©)
> - `DailyChangeSummary`, `WeeklyTrendSummary` ì»´í¬ë„ŒíŠ¸ ì¶”ê°€
> - `MonthlyForecast` ì»´í¬ë„ŒíŠ¸ ì¶”ê°€ (ê¸ˆì›” ì˜ˆì¸¡)
> - API ëª…ì„¸ì— ê¸°ì¤€ì¼ íŒŒë¼ë¯¸í„° ì¶”ê°€
